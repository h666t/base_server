{"version":3,"file":"main.js","mappings":";yCAcA,IAAIA,EAAa,EAAQ,KACrBC,EAAO,EAAQ,KAgBnB,SAASC,EAASC,GAChB,KAAMC,gBAAgBF,GACpB,OAAO,IAAIA,EAAQC,GAGrBC,KAAKC,QAAUF,EAAIE,QACnBD,KAAKE,WAAa,IAAIN,EAAWG,EACnC,CAuLA,SAASI,EAAWC,GAClB,OAA8B,IAAvBA,EAAKC,QAAQ,KAChBR,EAAKS,OAAOF,GACZA,CACN,CAUA,SAASG,EAAWH,GAClB,MAAuB,iBAATA,CAChB,CAvNAI,EAAOC,QAAUX,EA2DjBA,EAAQY,UAAUN,KAClBN,EAAQY,UAAUC,MAAQ,SAAUC,GAClC,IAAID,EAAQC,EAGZ,GAAID,IAAUE,MAAMC,QAAQH,GAAQ,CAClCA,EAAQ,IAAIE,MAAME,UAAUC,QAC5B,IAAK,IAAIC,EAAI,EAAGA,EAAIN,EAAMK,OAAQC,IAChCN,EAAMM,GAAKF,UAAUE,EAEzB,CAGA,IAAKN,GAA0B,IAAjBA,EAAMK,OAClB,OAAOhB,KAAKE,WAAWgB,aAIzB,IAAKlB,KAAKC,QAAQkB,OAChB,OAAOR,EAAM,GAGf,IAAIS,EAAQT,EAAMU,IAAIlB,GAElBmB,EADUtB,KAAKE,WAAWgB,WAAWE,EAAMG,OAAOhB,IAClC,GAEpB,QAAOe,GACHX,EAAMS,EAAMf,QAAQiB,GAE1B,EAeAxB,EAAQY,UAAUc,SAClB1B,EAAQY,UAAUe,UAAY,SAAUC,GACtC,IAAID,EAAYC,EAGhB,GAAID,IAAcZ,MAAMC,QAAQW,GAAY,CAC1CA,EAAY,IAAIZ,MAAME,UAAUC,QAChC,IAAK,IAAIC,EAAI,EAAGA,EAAIQ,EAAUT,OAAQC,IACpCQ,EAAUR,GAAKF,UAAUE,EAE7B,CAGA,OAAKQ,GAAkC,IAArBA,EAAUT,OAIrBhB,KAAKE,WAAWuB,UAAUA,GAAW,KAAM,EAHzCzB,KAAKE,WAAWuB,WAI3B,EAeA3B,EAAQY,UAAUiB,QAClB7B,EAAQY,UAAUkB,SAAW,SAAUC,GACrC,IAAID,EAAWC,EAGf,GAAID,IAAaf,MAAMC,QAAQc,GAAW,CACxCA,EAAW,IAAIf,MAAME,UAAUC,QAC/B,IAAK,IAAIC,EAAI,EAAGA,EAAIW,EAASZ,OAAQC,IACnCW,EAASX,GAAKF,UAAUE,EAE5B,CAGA,OAAKW,GAAgC,IAApBA,EAASZ,OAInBhB,KAAKE,WAAW0B,SAASA,GAAU,KAAM,EAHvC5B,KAAKE,WAAW0B,UAI3B,EAeA9B,EAAQY,UAAUoB,KAClBhC,EAAQY,UAAUqB,MAClBjC,EAAQY,UAAUsB,SAClBlC,EAAQY,UAAUuB,UAAY,SAAUC,GACtC,IAAID,EAAYC,EAGhB,GAAID,IAAcpB,MAAMC,QAAQmB,GAAY,CAC1CA,EAAY,IAAIpB,MAAME,UAAUC,QAChC,IAAK,IAAIC,EAAI,EAAGA,EAAIgB,EAAUjB,OAAQC,IACpCgB,EAAUhB,GAAKF,UAAUE,EAE7B,CAGA,OAAKgB,GAAkC,IAArBA,EAAUjB,OAIrBhB,KAAKE,WAAW+B,UAAUA,GAAW,KAAM,EAHzCjC,KAAKE,WAAW+B,WAI3B,+BCjNA,MAAME,EAAY,EAAQ,KAGpBC,EAAe,IAFT,EAAQ,KAEC,CAAQ,KAE7B5B,EAAOC,QAAUL,IACf,IAAIiC,EAAWD,EAAaE,IAAIlC,GAKhC,OAJKiC,IACHA,EAAWF,EAAUI,YAAYnC,GACjCgC,EAAaI,IAAIpC,EAAMiC,IAElBA,CAAQ,YCRjB,IAAII,EAAQ5B,MAAMH,UAAU+B,MAqC5B,SAASC,EAAGC,GACV,IAAIC,EAAM5C,KACN6C,EAAOJ,EAAMK,KAAK/B,UAAW,GAKjC,OAAO,IAAIgC,SAAQ,SAASC,EAASC,GAEnC,GADmB,mBAARN,IAAoBA,EAAMA,EAAIO,MAAMN,EAAKC,KAC/CF,GAA2B,mBAAbA,EAAIQ,KAAqB,OAAOH,EAAQL,GAU3D,SAASS,EAAYC,GACnB,IAAIC,EACJ,IACEA,EAAMX,EAAIQ,KAAKE,EACjB,CAAE,MAAOE,GACP,OAAON,EAAOM,EAChB,CACAJ,EAAKG,EACP,CAQA,SAASE,EAAWC,GAClB,IAAIH,EACJ,IACEA,EAAMX,EAAIe,MAAMD,EAClB,CAAE,MAAOF,GACP,OAAON,EAAOM,EAChB,CACAJ,EAAKG,EACP,CAWA,SAASH,EAAKG,GACZ,GAAIA,EAAIK,KAAM,OAAOX,EAAQM,EAAIM,OACjC,IAAIA,EAAQC,EAAUf,KAAKF,EAAKU,EAAIM,OACpC,OAAIA,GAASE,EAAUF,GAAeA,EAAMG,KAAKX,EAAaI,GACvDA,EAAW,IAAIQ,UAAU,8GACeC,OAAOX,EAAIM,OAAS,KACrE,CAjDAR,GAkDF,GACF,CAUA,SAASS,EAAUK,GACjB,OAAKA,EACDJ,EAAUI,GAAaA,EAuG7B,SAA6BA,GAC3B,IAAIC,EAAcD,EAAIC,YACtB,QAAKA,IACD,sBAAwBA,EAAYC,MAAQ,sBAAwBD,EAAYE,aAC7EC,EAAYH,EAAYzD,WACjC,CA3GM6D,CAAoBL,IAAQI,EAAYJ,GAAaxB,EAAGI,KAAK9C,KAAMkE,GACnE,mBAAqBA,EAAYM,EAAe1B,KAAK9C,KAAMkE,GAC3DrD,MAAMC,QAAQoD,GAAaO,EAAe3B,KAAK9C,KAAMkE,GAoHlDQ,QAnHMR,EAmHQC,YAnHKQ,EAAgB7B,KAAK9C,KAAMkE,GAC9CA,EANUA,CAOnB,CAUA,SAASM,EAAeI,GACtB,IAAIhC,EAAM5C,KACV,OAAO,IAAI+C,SAAQ,SAAUC,EAASC,GACpC2B,EAAG9B,KAAKF,GAAK,SAAUa,EAAKJ,GAC1B,GAAII,EAAK,OAAOR,EAAOQ,GACnB1C,UAAUC,OAAS,IAAGqC,EAAMZ,EAAMK,KAAK/B,UAAW,IACtDiC,EAAQK,EACV,GACF,GACF,CAWA,SAASoB,EAAeP,GACtB,OAAOnB,QAAQ8B,IAAIX,EAAI7C,IAAIwC,EAAW7D,MACxC,CAWA,SAAS2E,EAAgBT,GAIvB,IAHA,IAAIY,EAAU,IAAIZ,EAAIC,YAClBY,EAAOL,OAAOK,KAAKb,GACnBc,EAAW,GACN/D,EAAI,EAAGA,EAAI8D,EAAK/D,OAAQC,IAAK,CACpC,IAAIgE,EAAMF,EAAK9D,GACXiE,EAAUrB,EAAUf,KAAK9C,KAAMkE,EAAIe,IACnCC,GAAWpB,EAAUoB,GAAUC,EAAMD,EAASD,GAC7CH,EAAQG,GAAOf,EAAIe,EAC1B,CACA,OAAOlC,QAAQ8B,IAAIG,GAAUjB,MAAK,WAChC,OAAOe,CACT,IAEA,SAASK,EAAMD,EAASD,GAEtBH,EAAQG,QAAOG,EACfJ,EAASK,KAAKH,EAAQnB,MAAK,SAAUV,GACnCyB,EAAQG,GAAO5B,CACjB,IACF,CACF,CAUA,SAASS,EAAUI,GACjB,MAAO,mBAAqBA,EAAIH,IAClC,CAUA,SAASO,EAAYJ,GACnB,MAAO,mBAAqBA,EAAIf,MAAQ,mBAAqBe,EAAIR,KACnE,CAvMAlD,EAAOC,QAAUiC,EAAY,QAAIA,EAAGA,GAAKA,EAczCA,EAAG4C,KAAO,SAAUV,GAElB,OADAW,EAAcC,sBAAwBZ,EAC/BW,EACP,SAASA,IACP,OAAO7C,EAAGI,KAAK9C,KAAM4E,EAAG1B,MAAMlD,KAAMe,WACtC,CACF,+BClBAP,EAAOC,QAkIP,SAA6BgF,EAAUC,GACrC,IAAIC,EAAOD,GAAW,CAAC,EAGnBtF,EAAOuF,EAAKvF,MAAQ,aAGpBwF,EAeN,SAAuBH,EAAUI,GAC/B,QAAiBT,IAAbK,EAAJ,CAIA,IAAIG,EAAS,CAAC,EAEd,GAAwB,iBAAbH,EACT,MAAM,IAAIzB,UAAU,6BAQtB,QAJiBoB,IAAbS,IACFA,GAAW,GAGW,iBAAbA,GAA6C,kBAAbA,EACzC,MAAM,IAAI7B,UAAU,wCAGtB,GAAwB,iBAAb6B,GAAyBC,EAAkBC,KAAKF,GACzD,MAAM,IAAI7B,UAAU,sCAItB,IAAII,EAAO4B,EAASP,GAGhBQ,EAAiBC,EAAYH,KAAK3B,GAGlC+B,EAAmC,iBAAbN,EACtBA,GAAYO,EAAUhC,GACtB4B,EAASH,GACTQ,EAAsC,iBAAjBF,GAA6BA,IAAiB/B,EAcvE,OAXIiC,IAAgBJ,GAAkBK,EAAkBP,KAAK3B,MAC3DwB,EAAO,aAAexB,IAIpB6B,GAAkBI,KACpBT,EAAOH,SAAWY,EACdF,EACA/B,GAGCwB,CA7CP,CA8CF,CAhEeW,CAAad,EAAUE,EAAKE,UAGzC,OAyEF,SAAiB3B,GACf,IAAIsC,EAAatC,EAAIsC,WACjBpG,EAAO8D,EAAI9D,KAEf,IAAKA,GAAwB,iBAATA,IAAsBqG,EAAaV,KAAK3F,GAC1D,MAAM,IAAI4D,UAAU,gBAItB,IAAI0C,EAASzC,OAAO7D,GAAMuG,cAG1B,GAAIH,GAAoC,iBAAfA,EAIvB,IAHA,IAAII,EACAhB,EAASlB,OAAOK,KAAKyB,GAAYK,OAE5B5F,EAAI,EAAGA,EAAI2E,EAAO5E,OAAQC,IAAK,CAGtC,IAAI6F,EAA2B,OAF/BF,EAAQhB,EAAO3E,IAEC8F,QAAQ,GACpBC,EAAQR,EAAWI,IACnBK,EAAQT,EAAWI,IAEvBF,GAAU,KAAOE,EAAQ,IAAME,CACjC,CAGF,OAAOJ,CACT,CArGSQ,CAAO,IAAIC,EAAmB/G,EAAMwF,GAC7C,EA5IApF,EAAOC,QAAQ2G,MA2Sf,SAAgBV,GACd,IAAKA,GAA4B,iBAAXA,EACpB,MAAM,IAAI1C,UAAU,+BAGtB,IAAIqD,EAAQC,EAAwBC,KAAKb,GAEzC,IAAKW,EACH,MAAM,IAAIrD,UAAU,uBAItB,IAGIiB,EAGArB,EANA4D,EAAQH,EAAM,GAAGrG,OACjBZ,EAAOiH,EAAM,GAAGV,cAGhBc,EAAQ,GACR7B,EAAS,CAAC,EASd,IALA4B,EAAQE,EAAaC,UAAoC,MAAxBN,EAAM,GAAGN,QAAQ,GAC9CS,EAAQ,EACRA,EAGIH,EAAQK,EAAaH,KAAKb,IAAU,CAC1C,GAAIW,EAAMG,QAAUA,EAClB,MAAM,IAAIxD,UAAU,4BAOtB,GAJAwD,GAASH,EAAM,GAAGrG,OAClBiE,EAAMoC,EAAM,GAAGV,cACf/C,EAAQyD,EAAM,IAEc,IAAxBI,EAAMpH,QAAQ4E,GAChB,MAAM,IAAIjB,UAAU,+BAGtByD,EAAMpC,KAAKJ,GAEPA,EAAI5E,QAAQ,KAAO,IAAM4E,EAAIjE,OAUN,iBAAhB4E,EAAOX,KAID,MAAbrB,EAAM,KAERA,EAAQA,EACLmD,OAAO,EAAGnD,EAAM5C,OAAS,GACzB4G,QAAQC,EAAa,OAG1BjC,EAAOX,GAAOrB,IAnBZqB,EAAMA,EAAIxC,MAAM,GAAI,GACpBmB,EAAQkE,EAAYlE,GAGpBgC,EAAOX,GAAOrB,EAgBlB,CAEA,IAAe,IAAX4D,GAAgBA,IAAUd,EAAO1F,OACnC,MAAM,IAAIgD,UAAU,4BAGtB,OAAO,IAAImD,EAAmB/G,EAAMwF,EACtC,EA1WA,IAAII,EAAW,iBACX+B,EAAS,eAOTC,EAA8B,wCAO9B1B,EAAoB,kBACpB2B,EAA4B,qBAO5BnC,EAAoB,yBAUpB+B,EAAc,uBAOdK,EAAe,WA2BfR,EAAe,oKACfxB,EAAc,0BACdO,EAAe,gCAwBf0B,EAAmB,sIAgBnBb,EAA0B,mDAsI9B,SAASQ,EAAaM,GACpB,IAAIf,EAAQc,EAAiBZ,KAAKa,GAElC,IAAKf,EACH,MAAM,IAAIrD,UAAU,gCAGtB,IAEIJ,EAFAjC,EAAU0F,EAAM,GAAGV,cAKnB0B,EAJUhB,EAAM,GAICO,QAAQK,EAA2BK,GAExD,OAAQ3G,GACN,IAAK,aACHiC,EAAQwC,EAAUiC,GAClB,MACF,IAAK,QACHzE,EAAQmE,EAAOQ,KAAKF,EAAQ,UAAUG,SAAS,QAC/C,MACF,QACE,MAAM,IAAIxE,UAAU,yCAGxB,OAAOJ,CACT,CAUA,SAASwC,EAAWU,GAElB,OAAO7C,OAAO6C,GAAKc,QAAQ9B,EAAmB,IAChD,CA2FA,SAASwC,EAASF,EAAKK,GACrB,OAAOxE,OAAOyE,aAAaC,SAASF,EAAK,IAC3C,CAUA,SAASG,EAASC,GAChB,MAAO,IAAM5E,OAAO4E,GACjBC,WAAW,GACXN,SAAS,IACTO,aACL,CAUA,SAAS9B,EAASH,GAGhB,MAAO,IAFG7C,OAAO6C,GAEAc,QAAQM,EAAc,QAAU,GACnD,CAUA,SAASlB,EAASF,GAChB,IAAIsB,EAAMnE,OAAO6C,GAMjB,MAAO,UAHOkC,mBAAmBZ,GAC9BR,QAAQI,EAA6BY,EAG1C,CAWA,SAASzB,EAAoB/G,EAAMoG,GACjCxG,KAAKI,KAAOA,EACZJ,KAAKwG,WAAaA,CACpB,6BCnbA,IAAIkB,EAAe,mKACfxB,EAAc,wCACdO,EAAe,gCAQfoB,EAAc,6BAKdK,EAAe,WASfe,EAAc,6DA4JlB,SAAShC,EAASH,GAChB,IAAIsB,EAAMnE,OAAO6C,GAGjB,GAAIL,EAAaV,KAAKqC,GACpB,OAAOA,EAGT,GAAIA,EAAIpH,OAAS,IAAMkF,EAAYH,KAAKqC,GACtC,MAAM,IAAIpE,UAAU,2BAGtB,MAAO,IAAMoE,EAAIR,QAAQM,EAAc,QAAU,GACnD,CAMA,SAASgB,EAAa9I,GACpBJ,KAAKwG,WAAa9B,OAAOyE,OAAO,MAChCnJ,KAAKI,KAAOA,CACd,CA3KAK,EAAQyG,OAWR,SAAiBhD,GACf,IAAKA,GAAsB,iBAARA,EACjB,MAAM,IAAIF,UAAU,4BAGtB,IAAIwC,EAAatC,EAAIsC,WACjBpG,EAAO8D,EAAI9D,KAEf,IAAKA,IAAS6I,EAAYlD,KAAK3F,GAC7B,MAAM,IAAI4D,UAAU,gBAGtB,IAAI0C,EAAStG,EAGb,GAAIoG,GAAoC,iBAAfA,EAIvB,IAHA,IAAII,EACAhB,EAASlB,OAAOK,KAAKyB,GAAYK,OAE5B5F,EAAI,EAAGA,EAAI2E,EAAO5E,OAAQC,IAAK,CAGtC,GAFA2F,EAAQhB,EAAO3E,IAEVwF,EAAaV,KAAKa,GACrB,MAAM,IAAI5C,UAAU,0BAGtB0C,GAAU,KAAOE,EAAQ,IAAMK,EAAQT,EAAWI,GACpD,CAGF,OAAOF,CACT,EAzCAjG,EAAQ2G,MAmDR,SAAgBV,GACd,IAAKA,EACH,MAAM,IAAI1C,UAAU,+BAItB,IAAIoF,EAA2B,iBAAX1C,EAiEtB,SAAyBxC,GACvB,IAAIkF,EAUJ,GAR6B,mBAAlBlF,EAAImF,UAEbD,EAASlF,EAAImF,UAAU,gBACS,iBAAhBnF,EAAIjE,UAEpBmJ,EAASlF,EAAIjE,SAAWiE,EAAIjE,QAAQ,iBAGhB,iBAAXmJ,EACT,MAAM,IAAIpF,UAAU,8CAGtB,OAAOoF,CACT,CAhFME,CAAe5C,GACfA,EAEJ,GAAsB,iBAAX0C,EACT,MAAM,IAAIpF,UAAU,8CAGtB,IAAIwD,EAAQ4B,EAAO/I,QAAQ,KACvBD,GAAkB,IAAXoH,EACP4B,EAAO3G,MAAM,EAAG+E,GAAO+B,OACvBH,EAAOG,OAEX,IAAKN,EAAYlD,KAAK3F,GACpB,MAAM,IAAI4D,UAAU,sBAGtB,IAAIE,EAAM,IAAIgF,EAAY9I,EAAKuG,eAG/B,IAAe,IAAXa,EAAc,CAChB,IAAIvC,EACAoC,EACAzD,EAIJ,IAFA8D,EAAaC,UAAYH,EAEjBH,EAAQK,EAAaH,KAAK6B,IAAU,CAC1C,GAAI/B,EAAMG,QAAUA,EAClB,MAAM,IAAIxD,UAAU,4BAGtBwD,GAASH,EAAM,GAAGrG,OAClBiE,EAAMoC,EAAM,GAAGV,cAGa,MAF5B/C,EAAQyD,EAAM,IAEJyB,WAAW,KAKU,KAH7BlF,EAAQA,EAAMnB,MAAM,GAAI,IAGdpC,QAAQ,QAChBuD,EAAQA,EAAMgE,QAAQC,EAAa,OAIvC3D,EAAIsC,WAAWvB,GAAOrB,CACxB,CAEA,GAAI4D,IAAU4B,EAAOpI,OACnB,MAAM,IAAIgD,UAAU,2BAExB,CAEA,OAAOE,CACT,+BC7JA,IAAIsF,EAAY,EAAQ,KAAR,CAAgB,WAC5BC,EAAU,EAAQ,MAClBC,EAAO,EAAQ,MACfC,EAAQ,CAAC,EAUTC,EAAqB,wCAMrBC,EAAmB,yBAEvB,SAASC,EAAQC,EAASC,EAAUtE,GAClC,KAAM1F,gBAAgB8J,GAAU,OAAO,IAAIA,EAAQC,EAASC,EAAUtE,GAEtE1F,KAAKiK,YAAS7E,EACdpF,KAAK+J,QAAUA,EACf/J,KAAKgK,SAAWA,EAEZtE,IACE7E,MAAMC,QAAQ4E,IAEhB8D,EAAU,0DACVxJ,KAAK+E,KAAO,IAAI0E,EAAQ/D,IACfA,EAAQvB,aAA4C,YAA7BuB,EAAQvB,YAAYC,MAEpDoF,EAAU,4DACVxJ,KAAK+E,KAAOW,IAEZ1F,KAAK+E,KAAOlE,MAAMC,QAAQ4E,EAAQX,MAAQ,IAAI0E,EAAQ/D,EAAQX,MAAQW,EAAQX,KAC9E/E,KAAKiK,OAASvE,EAAQuE,QAG5B,CAoEA,SAASC,EAAO9F,EAAMR,EAAOuG,GAC3B,IAAKP,EAAmB7D,KAAK3B,GAC3B,MAAM,IAAIJ,UAAU,4BAGtB,GAAIJ,IAAUgG,EAAmB7D,KAAKnC,GACpC,MAAM,IAAII,UAAU,6BAMtB,IAAK,IAAII,KAHTpE,KAAKoE,KAAOA,EACZpE,KAAK4D,MAAQA,GAAS,GAELuG,EACfnK,KAAKoE,GAAQ+F,EAAM/F,GAQrB,GALKpE,KAAK4D,QACR5D,KAAKoK,QAAU,IAAIC,KAAK,GACxBrK,KAAKsK,OAAS,MAGZtK,KAAKuK,OAASX,EAAmB7D,KAAK/F,KAAKuK,MAC7C,MAAM,IAAIvG,UAAU,0BAGtB,GAAIhE,KAAKwK,SAAWZ,EAAmB7D,KAAK/F,KAAKwK,QAC/C,MAAM,IAAIxG,UAAU,4BAGtB,GAAIhE,KAAKyK,WAA8B,IAAlBzK,KAAKyK,WAAsBZ,EAAiB9D,KAAK/F,KAAKyK,UACzE,MAAM,IAAIzG,UAAU,6BAExB,CAgDA,SAAS0G,EAAWzK,EAAS0K,GAC3B,GAAIA,EAAOC,UACT,IAAK,IAAI3J,EAAIhB,EAAQe,OAAS,EAAGC,GAAK,EAAGA,IACO,IAA1ChB,EAAQgB,GAAGZ,QAAQsK,EAAOvG,KAAO,MACnCnE,EAAQ4K,OAAO5J,EAAG,GAKxBhB,EAAQoF,KAAKsF,EAAOG,WACtB,CA5JAhB,EAAQpJ,UAAU4B,IAAM,SAAS8B,EAAMuB,GACrC,IACIyD,EAAQ/B,EAAOzD,EAAOmH,EAAQC,EAAMxD,EADpCyD,EAAU7G,EAAO,OAEjB8G,EAASvF,QAAwBP,IAAhBO,EAAKuF,OAAuBvF,EAAKuF,SAAWlL,KAAK+E,KAGtE,IADAqE,EAASpJ,KAAK+J,QAAQ9J,QAAgB,UAGtCoH,EAAQ+B,EAAO/B,MAgIjB,SAAoBjD,GAClB,OAAIuF,EAAMvF,GAAcuF,EAAMvF,GAEvBuF,EAAMvF,GAAQ,IAAI+G,OACvB,YACA/G,EAAKwD,QAAQ,2BAA4B,QACzC,WAEJ,CAxIuBwD,CAAWhH,IAC3BiD,GAAL,CAGA,GADAzD,EAAQyD,EAAM,IACT1B,IAASuF,EAAQ,OAAOtH,EAG7B,GADAmH,EAAS/K,KAAKsC,IAAI2I,GAClB,CAGA,GADAD,EAAO5G,EAAO,IAAMR,GACf5D,KAAK+E,KAAM,MAAM,IAAIsG,MAAM,qCAGhC,MAFA7D,EAAQxH,KAAK+E,KAAKyC,MAAMwD,EAAMD,IAElB,GAIV,OADAvD,GAASxH,KAAKwC,IAAIyI,EAASjL,KAAK+E,KAAKuG,KAAKN,GAAO,CAAEE,QAAQ,IACpDtH,EAHP5D,KAAKwC,IAAIyI,EAAS,KAAM,CAACV,KAAM,IAAKW,QAAQ,GAPjC,CAND,CAkBd,EAEApB,EAAQpJ,UAAU8B,IAAM,SAAS4B,EAAMR,EAAO+B,GAC5C,IAAItC,EAAMrD,KAAKgK,SACXjK,EAAMC,KAAK+J,QACX9J,EAAUoD,EAAIgG,UAAU,eAAiB,GACzCY,OAAyB7E,IAAhBpF,KAAKiK,SAAyBjK,KAAKiK,OAA0B,UAAjBlK,EAAIwL,UAAwBxL,EAAIyL,WAAWC,UAChGd,EAAS,IAAIT,EAAO9F,EAAMR,EAAO+B,GACjCuF,EAASvF,QAAwBP,IAAhBO,EAAKuF,OAAuBvF,EAAKuF,SAAWlL,KAAK+E,KAItE,GAFsB,iBAAX9E,IAAqBA,EAAU,CAACA,KAEtCgK,GAAUtE,GAAQA,EAAKsE,OAC1B,MAAM,IAAIoB,MAAM,yDAclB,GAXAV,EAAOV,OAAStE,QAAwBP,IAAhBO,EAAKsE,OACzBtE,EAAKsE,OACLA,EAEAtE,GAAQ,gBAAiBA,IAC3B6D,EAAU,wFACVmB,EAAOV,OAAStE,EAAK+F,aAGvBhB,EAAWzK,EAAS0K,GAEhBhF,GAAQuF,EAAQ,CAClB,IAAKlL,KAAK+E,KAAM,MAAM,IAAIsG,MAAM,qCAChCV,EAAO/G,MAAQ5D,KAAK+E,KAAKuG,KAAKX,EAAOnC,YACrCmC,EAAOvG,MAAQ,OACfsG,EAAWzK,EAAS0K,EACtB,CAIA,OAFgBtH,EAAIb,IAAMkH,EAAKiC,gBAAgBjL,UAAUkL,UAAYvI,EAAIuI,WAC/D9I,KAAKO,EAAK,aAAcpD,GAC3BD,IACT,EAoCAkK,EAAOxJ,UAAU6J,KAAO,IACxBL,EAAOxJ,UAAU0J,aAAUhF,EAC3B8E,EAAOxJ,UAAU8J,YAASpF,EAC1B8E,EAAOxJ,UAAUmL,UAAW,EAC5B3B,EAAOxJ,UAAU+J,UAAW,EAC5BP,EAAOxJ,UAAUuJ,QAAS,EAC1BC,EAAOxJ,UAAUkK,WAAY,EAE7BV,EAAOxJ,UAAU8H,SAAW,WAC1B,OAAOxI,KAAKoE,KAAO,IAAMpE,KAAK4D,KAChC,EAEAsG,EAAOxJ,UAAUoK,SAAW,WAC1B,IAAI1B,EAASpJ,KAAKwI,WAWlB,OATIxI,KAAKsK,SAAQtK,KAAKoK,QAAU,IAAIC,KAAKA,KAAKyB,MAAQ9L,KAAKsK,SAEvDtK,KAAKuK,OAAWnB,GAAU,UAAYpJ,KAAKuK,MAC3CvK,KAAKoK,UAAWhB,GAAU,aAAepJ,KAAKoK,QAAQ2B,eACtD/L,KAAKwK,SAAWpB,GAAU,YAAcpJ,KAAKwK,QAC7CxK,KAAKyK,WAAWrB,GAAU,gBAAmC,IAAlBpJ,KAAKyK,SAAoB,SAAWzK,KAAKyK,SAAS9D,gBAC7F3G,KAAKiK,SAAWb,GAAU,YAC1BpJ,KAAK6L,WAAWzC,GAAU,cAEvBA,CACT,EAGA1E,OAAOsH,eAAe9B,EAAOxJ,UAAW,SAAU,CAChDuL,cAAc,EACdC,YAAY,EACZ5J,IAAK,WAAc,OAAOtC,KAAKsK,MAAO,EACtC9H,IAAK,SAAUsE,GAAO,OAAO9G,KAAKsK,OAASxD,CAAI,IAEjD0C,EAAU2C,SAASjC,EAAOxJ,UAAW,SAAU,kCAwB/CoJ,EAAQsC,QAAUtC,EAAQuC,QAAU,SAAStH,GAC3C,OAAO,SAAShF,EAAKsD,EAAKF,GACxBpD,EAAIuM,QAAUjJ,EAAIiJ,QAAU,IAAIxC,EAAQ/J,EAAKsD,EAAK,CAChD0B,KAAMA,IAGR5B,GACF,CACF,EAEA2G,EAAQI,OAASA,EAEjB1J,EAAOC,QAAUqJ,yBChLjB,SAASyC,EAAc3H,EAAI4H,GACzB,GAAkB,mBAAP5H,EACT,MAAM,IAAIZ,UAAU,kCAGtB,OAAOY,CACT,CASA,SAAS6H,EAAcvI,EAAKwI,EAAMF,GAChC,IAAKtI,GAAuB,iBAARA,GAAmC,mBAARA,EAC7C,MAAM,IAAIF,UAAU,+BAGtB,IAAI2I,EAAajI,OAAOkI,yBAAyB1I,EAAKwI,GAEtD,IAAKC,EACH,MAAM,IAAI3I,UAAU,sCAGtB,IAAK2I,EAAWV,aACd,MAAM,IAAIjI,UAAU,gCAExB,CA/DAxD,EAAOC,QAMP,SAAeoM,GACb,IAAKA,EACH,MAAM,IAAI7I,UAAU,kCAGtB,SAASwF,EAAWgD,GAEpB,CAWA,OATAhD,EAAUsD,WAAQ1H,EAClBoE,EAAUuD,UAAW,EACrBvD,EAAUwD,WAAaH,EACvBrD,EAAUyD,SAAU,EACpBzD,EAAU0D,QAAUxI,OAAOyE,OAAO,MAElCK,EAAU2D,SAAWZ,EACrB/C,EAAU2C,SAAWM,EAEdjD,CACT,kBChCA/I,EAAQ2M,WA2IR,SAAoBvK,GAQnB,GAPAA,EAAK,IAAM7C,KAAKqN,UAAY,KAAO,IAClCrN,KAAK6M,WACJ7M,KAAKqN,UAAY,MAAQ,KAC1BxK,EAAK,IACJ7C,KAAKqN,UAAY,MAAQ,KAC1B,IAAM7M,EAAOC,QAAQ6M,SAAStN,KAAKuN,OAE/BvN,KAAKqN,UACT,OAGD,MAAMG,EAAI,UAAYxN,KAAKyN,MAC3B5K,EAAKgI,OAAO,EAAG,EAAG2C,EAAG,kBAKrB,IAAIhG,EAAQ,EACRkG,EAAQ,EACZ7K,EAAK,GAAG+E,QAAQ,eAAeP,IAChB,OAAVA,IAGJG,IACc,OAAVH,IAGHqG,EAAQlG,GACT,IAGD3E,EAAKgI,OAAO6C,EAAO,EAAGF,EACvB,EA3KA/M,EAAQkN,KA6LR,SAAcC,GACb,IACKA,EACHnN,EAAQoN,QAAQC,QAAQ,QAASF,GAEjCnN,EAAQoN,QAAQE,WAAW,QAE7B,CAAE,MAAOC,GAGT,CACD,EAvMAvN,EAAQwN,KA+MR,WACC,IAAIC,EACJ,IACCA,EAAIzN,EAAQoN,QAAQM,QAAQ,QAC7B,CAAE,MAAOH,GAGT,CAOA,OAJKE,GAAwB,oBAAZE,SAA2B,QAASA,UACpDF,EAAIE,QAAQC,IAAIC,OAGVJ,CACR,EA7NAzN,EAAQ4M,UAyGR,WAIC,QAAsB,oBAAXkB,SAA0BA,OAAOH,SAAoC,aAAxBG,OAAOH,QAAQhO,OAAuBmO,OAAOH,QAAQI,UAKpF,oBAAdC,YAA6BA,UAAUC,YAAaD,UAAUC,UAAU/H,cAAcU,MAAM,4BAM3E,oBAAbsH,UAA4BA,SAASC,iBAAmBD,SAASC,gBAAgBC,OAASF,SAASC,gBAAgBC,MAAMC,kBAEpH,oBAAXP,QAA0BA,OAAOQ,UAAYR,OAAOQ,QAAQC,SAAYT,OAAOQ,QAAQE,WAAaV,OAAOQ,QAAQG,QAGrG,oBAAdT,WAA6BA,UAAUC,WAAaD,UAAUC,UAAU/H,cAAcU,MAAM,mBAAqBsB,SAASwC,OAAOgE,GAAI,KAAO,IAE9H,oBAAdV,WAA6BA,UAAUC,WAAaD,UAAUC,UAAU/H,cAAcU,MAAM,sBACtG,EA/HA5G,EAAQoN,QAyOR,WACC,IAGC,OAAOuB,YACR,CAAE,MAAOpB,GAGT,CACD,CAlPkBqB,GAClB5O,EAAQ6O,QAAU,MACjB,IAAIC,GAAS,EAEb,MAAO,KACDA,IACJA,GAAS,EACTR,QAAQS,KAAK,yIACd,CAED,EATiB,GAelB/O,EAAQgP,OAAS,CAChB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAsFDhP,EAAQiP,IAAMX,QAAQY,OAASZ,QAAQW,KAAO,MAAS,GAkEvDlP,EAAOC,QAAU,EAAQ,KAAR,CAAoBA,GAErC,MAAM,WAACmP,GAAcpP,EAAOC,QAM5BmP,EAAWC,EAAI,SAAUC,GACxB,IACC,OAAOC,KAAKC,UAAUF,EACvB,CAAE,MAAO9B,GACR,MAAO,+BAAiCA,EAAMxB,OAC/C,CACD,kBCKAhM,EAAOC,QA3QP,SAAe4N,GAqDd,SAAS4B,EAAYpD,GACpB,IAAIqD,EAEAC,EACAC,EAFAC,EAAiB,KAIrB,SAASV,KAAS9M,GAEjB,IAAK8M,EAAMW,QACV,OAGD,MAAMC,EAAOZ,EAGPa,EAAOC,OAAO,IAAIpG,MAClBqG,EAAKF,GAAQN,GAAYM,GAC/BD,EAAKhD,KAAOmD,EACZH,EAAKI,KAAOT,EACZK,EAAKC,KAAOA,EACZN,EAAWM,EAEX3N,EAAK,GAAKoN,EAAYW,OAAO/N,EAAK,IAEX,iBAAZA,EAAK,IAEfA,EAAKgO,QAAQ,MAId,IAAIrJ,EAAQ,EACZ3E,EAAK,GAAKA,EAAK,GAAG+E,QAAQ,iBAAiB,CAACP,EAAOH,KAElD,GAAc,OAAVG,EACH,MAAO,IAERG,IACA,MAAMsJ,EAAYb,EAAYL,WAAW1I,GACzC,GAAyB,mBAAd4J,EAA0B,CACpC,MAAMhK,EAAMjE,EAAK2E,GACjBH,EAAQyJ,EAAUhO,KAAKyN,EAAMzJ,GAG7BjE,EAAKgI,OAAOrD,EAAO,GACnBA,GACD,CACA,OAAOH,CAAK,IAIb4I,EAAY7C,WAAWtK,KAAKyN,EAAM1N,IAEpB0N,EAAKb,KAAOO,EAAYP,KAChCxM,MAAMqN,EAAM1N,EACnB,CAgCA,OA9BA8M,EAAM9C,UAAYA,EAClB8C,EAAMtC,UAAY4C,EAAY5C,YAC9BsC,EAAMlC,MAAQwC,EAAYc,YAAYlE,GACtC8C,EAAMqB,OAASA,EACfrB,EAAML,QAAUW,EAAYX,QAE5B5K,OAAOsH,eAAe2D,EAAO,UAAW,CACvCzD,YAAY,EACZD,cAAc,EACd3J,IAAK,IACmB,OAAnB+N,EACIA,GAEJF,IAAoBF,EAAYrC,aACnCuC,EAAkBF,EAAYrC,WAC9BwC,EAAeH,EAAYK,QAAQzD,IAG7BuD,GAER5N,IAAKsN,IACJO,EAAiBP,CAAC,IAKY,mBAArBG,EAAYgB,MACtBhB,EAAYgB,KAAKtB,GAGXA,CACR,CAEA,SAASqB,EAAOnE,EAAWqE,GAC1B,MAAMC,EAAWlB,EAAYjQ,KAAK6M,gBAAkC,IAAdqE,EAA4B,IAAMA,GAAarE,GAErG,OADAsE,EAASzB,IAAM1P,KAAK0P,IACbyB,CACR,CAwFA,SAASC,EAAYC,GACpB,OAAOA,EAAO7I,WACZ8I,UAAU,EAAGD,EAAO7I,WAAWxH,OAAS,GACxC4G,QAAQ,UAAW,IACtB,CA0BA,OAvQAqI,EAAYN,MAAQM,EACpBA,EAAYsB,QAAUtB,EACtBA,EAAYW,OAoPZ,SAAgB9J,GACf,OAAIA,aAAeuE,MACXvE,EAAI0K,OAAS1K,EAAI0F,QAElB1F,CACR,EAxPAmJ,EAAYwB,QAwLZ,WACC,MAAM7D,EAAa,IACfqC,EAAYxI,MAAMpG,IAAI+P,MACtBnB,EAAYyB,MAAMrQ,IAAI+P,GAAa/P,KAAIwL,GAAa,IAAMA,KAC5D8E,KAAK,KAEP,OADA1B,EAAY2B,OAAO,IACZhE,CACR,EA9LAqC,EAAY2B,OAsJZ,SAAgBhE,GAOf,IAAI3M,EANJgP,EAAYtC,KAAKC,GACjBqC,EAAYrC,WAAaA,EAEzBqC,EAAYxI,MAAQ,GACpBwI,EAAYyB,MAAQ,GAGpB,MAAMG,GAA+B,iBAAfjE,EAA0BA,EAAa,IAAIiE,MAAM,UACjEC,EAAMD,EAAM7Q,OAElB,IAAKC,EAAI,EAAGA,EAAI6Q,EAAK7Q,IACf4Q,EAAM5Q,KAOW,OAFtB2M,EAAaiE,EAAM5Q,GAAG2G,QAAQ,MAAO,QAEtB,GACdqI,EAAYyB,MAAMrM,KAAK,IAAI8F,OAAO,IAAMyC,EAAWnL,MAAM,GAAK,MAE9DwN,EAAYxI,MAAMpC,KAAK,IAAI8F,OAAO,IAAMyC,EAAa,MAGxD,EA9KAqC,EAAYK,QAsMZ,SAAiBlM,GAChB,GAA8B,MAA1BA,EAAKA,EAAKpD,OAAS,GACtB,OAAO,EAGR,IAAIC,EACA6Q,EAEJ,IAAK7Q,EAAI,EAAG6Q,EAAM7B,EAAYyB,MAAM1Q,OAAQC,EAAI6Q,EAAK7Q,IACpD,GAAIgP,EAAYyB,MAAMzQ,GAAG8E,KAAK3B,GAC7B,OAAO,EAIT,IAAKnD,EAAI,EAAG6Q,EAAM7B,EAAYxI,MAAMzG,OAAQC,EAAI6Q,EAAK7Q,IACpD,GAAIgP,EAAYxI,MAAMxG,GAAG8E,KAAK3B,GAC7B,OAAO,EAIT,OAAO,CACR,EA1NA6L,EAAY3C,SAAW,EAAQ,MAC/B2C,EAAYX,QA0PZ,WACCP,QAAQS,KAAK,wIACd,EA1PA9K,OAAOK,KAAKsJ,GAAK0D,SAAQ9M,IACxBgL,EAAYhL,GAAOoJ,EAAIpJ,EAAI,IAO5BgL,EAAYxI,MAAQ,GACpBwI,EAAYyB,MAAQ,GAOpBzB,EAAYL,WAAa,CAAC,EAkB1BK,EAAYc,YAVZ,SAAqBlE,GACpB,IAAImF,EAAO,EAEX,IAAK,IAAI/Q,EAAI,EAAGA,EAAI4L,EAAU7L,OAAQC,IACrC+Q,GAASA,GAAQ,GAAKA,EAAQnF,EAAU/D,WAAW7H,GACnD+Q,GAAQ,EAGT,OAAO/B,EAAYR,OAAOwC,KAAKC,IAAIF,GAAQ/B,EAAYR,OAAOzO,OAC/D,EA2NAiP,EAAY2B,OAAO3B,EAAYhC,QAExBgC,CACR,iBC/QA,IAAIkC,EAAStR,MAAMH,UAAU+B,MACzB2P,EAAa,EAAQ,MACrBC,EAAc,EAAQ,MAEtBC,EAAY9R,EAAOC,QAAU,SAAU8R,EAAQC,EAAU7M,GAG3D,OAFKA,IAAMA,EAAO,CAAC,GAEf4M,IAAWC,IAGJD,aAAkBlI,MAAQmI,aAAoBnI,KAChDkI,EAAOE,YAAcD,EAASC,WAI3BF,IAAWC,GAA6B,iBAAVD,GAAyC,iBAAZC,EAC9D7M,EAAK+M,OAASH,IAAWC,EAAWD,GAAUC,EA0BzD,SAAkBG,EAAGC,EAAGjN,GACtB,IAAI1E,EAAGgE,EACP,GAAI4N,EAAkBF,IAAME,EAAkBD,GAC5C,OAAO,EAET,GAAID,EAAEjS,YAAckS,EAAElS,UAAW,OAAO,EAGxC,GAAI2R,EAAYM,GACd,QAAKN,EAAYO,KAGjBD,EAAIR,EAAOrP,KAAK6P,GAChBC,EAAIT,EAAOrP,KAAK8P,GACTN,EAAUK,EAAGC,EAAGjN,IAEzB,GAAImN,EAASH,GAAI,CACf,IAAKG,EAASF,GACZ,OAAO,EAET,GAAID,EAAE3R,SAAW4R,EAAE5R,OAAQ,OAAO,EAClC,IAAKC,EAAI,EAAGA,EAAI0R,EAAE3R,OAAQC,IACxB,GAAI0R,EAAE1R,KAAO2R,EAAE3R,GAAI,OAAO,EAE5B,OAAO,CACT,CACA,IACE,IAAI8R,EAAKX,EAAWO,GAChBK,EAAKZ,EAAWQ,EACtB,CAAE,MAAOrP,GACP,OAAO,CACT,CAGA,GAAIwP,EAAG/R,QAAUgS,EAAGhS,OAClB,OAAO,EAKT,IAHA+R,EAAGlM,OACHmM,EAAGnM,OAEE5F,EAAI8R,EAAG/R,OAAS,EAAGC,GAAK,EAAGA,IAC9B,GAAI8R,EAAG9R,IAAM+R,EAAG/R,GACd,OAAO,EAIX,IAAKA,EAAI8R,EAAG/R,OAAS,EAAGC,GAAK,EAAGA,IAE9B,GADAgE,EAAM8N,EAAG9R,IACJqR,EAAUK,EAAE1N,GAAM2N,EAAE3N,GAAMU,GAAO,OAAO,EAE/C,cAAcgN,UAAaC,CAC7B,CApEWK,CAASV,EAAQC,EAAU7M,GAEtC,EAEA,SAASkN,EAAkBjP,GACzB,OAAOA,OACT,CAEA,SAASkP,EAAUI,GACjB,SAAKA,GAAkB,iBAANA,GAAsC,iBAAbA,EAAElS,QACtB,mBAAXkS,EAAEC,MAA0C,mBAAZD,EAAEzQ,OAGzCyQ,EAAElS,OAAS,GAAqB,iBAATkS,EAAE,GAE/B,gBCxCA,IAAIE,EAEI,sBAFqB,WAC3B,OAAO1O,OAAOhE,UAAU8H,SAAS1F,KAAK/B,UACvC,CAF4B,GAO7B,SAASsS,EAAUC,GACjB,MAAiD,sBAA1C5O,OAAOhE,UAAU8H,SAAS1F,KAAKwQ,EACxC,CAGA,SAASC,EAAYD,GACnB,OAAOA,GACY,iBAAVA,GACiB,iBAAjBA,EAAOtS,QACd0D,OAAOhE,UAAU8S,eAAe1Q,KAAKwQ,EAAQ,YAC5C5O,OAAOhE,UAAU+S,qBAAqB3Q,KAAKwQ,EAAQ,YACpD,CACJ,EAfA7S,EAAUD,EAAOC,QAAU2S,EAAyBC,EAAYE,GAExDF,UAAYA,EAKpB5S,EAAQ8S,YAAcA,gBCPtB,SAASG,EAAMxP,GACb,IAAIa,EAAO,GACX,IAAK,IAAIE,KAAOf,EAAKa,EAAKM,KAAKJ,GAC/B,OAAOF,CACT,EARUvE,EAAOC,QAAiC,mBAAhBiE,OAAOK,KACrCL,OAAOK,KAAO2O,GAEVA,KAAOA,YCYf,SAASC,EAAUC,EAAOC,GACxB,KAAM7T,gBAAgB2T,GAAY,OAAO,IAAIA,EAAUC,EAAOC,GAC9D7T,KAAK4T,MAAQA,EACb5T,KAAK6T,OAASA,EACd7T,KAAK8T,QAAU,GACf9T,KAAK+T,QAAU,GACf/T,KAAKgU,QAAU,GACfhU,KAAKiU,QAAU,EACjB,CAlBAzT,EAAOC,QAAUkT,EA4BjBA,EAAUjT,UAAUwT,OAAS,SAAS9P,GACpC,IAAIwP,EAAQ5T,KAAK4T,MACbC,EAAS7T,KAAK6T,OAOlB,OANA7T,KAAK8T,QAAQzO,KAAKjB,GAElBwP,EAAMxP,GAAQ,WACZ,OAAOpE,KAAK6T,GAAQzP,GAAMlB,MAAMlD,KAAK6T,GAAS9S,UAChD,EAEOf,IACT,EAUA2T,EAAUjT,UAAUyT,OAAS,SAAS/P,GACpC,OAAOpE,KAAKoU,OAAOhQ,GAAMiQ,OAAOjQ,EAClC,EAUAuP,EAAUjT,UAAU0T,OAAS,SAAShQ,GACpC,IAAIwP,EAAQ5T,KAAK4T,MACbC,EAAS7T,KAAK6T,OAOlB,OANA7T,KAAK+T,QAAQ1O,KAAKjB,GAElBwP,EAAMU,iBAAiBlQ,GAAM,WAC3B,OAAOpE,KAAK6T,GAAQzP,EACtB,IAEOpE,IACT,EAUA2T,EAAUjT,UAAU2T,OAAS,SAASjQ,GACpC,IAAIwP,EAAQ5T,KAAK4T,MACbC,EAAS7T,KAAK6T,OAOlB,OANA7T,KAAKgU,QAAQ3O,KAAKjB,GAElBwP,EAAMW,iBAAiBnQ,GAAM,SAAS0C,GACpC,OAAO9G,KAAK6T,GAAQzP,GAAQ0C,CAC9B,IAEO9G,IACT,EAUA2T,EAAUjT,UAAU8T,OAAS,SAAUpQ,GACrC,IAAIwP,EAAQ5T,KAAK4T,MACbC,EAAS7T,KAAK6T,OAYlB,OAXA7T,KAAKiU,QAAQ5O,KAAKjB,GAElBwP,EAAMxP,GAAQ,SAAS0C,GACrB,YAAI,IAAsBA,GACxB9G,KAAK6T,GAAQzP,GAAQ0C,EACd9G,MAEAA,KAAK6T,GAAQzP,EAExB,EAEOpE,IACT,yBCzEA,SAASuM,EAAc3H,EAAI4H,GACzB,GAAkB,mBAAP5H,EACT,MAAM,IAAIZ,UAAU,kCAGtB,OAAOY,CACT,CASA,SAAS6H,EAAcvI,EAAKwI,EAAMF,GAChC,IAAKtI,GAAuB,iBAARA,GAAmC,mBAARA,EAC7C,MAAM,IAAIF,UAAU,+BAGtB,IAAI2I,EAAajI,OAAOkI,yBAAyB1I,EAAKwI,GAEtD,IAAKC,EACH,MAAM,IAAI3I,UAAU,sCAGtB,IAAK2I,EAAWV,aACd,MAAM,IAAIjI,UAAU,gCAExB,CA/DAxD,EAAOC,QAMP,SAAeoM,GACb,IAAKA,EACH,MAAM,IAAI7I,UAAU,kCAGtB,SAASwF,EAAWgD,GAEpB,CAWA,OATAhD,EAAUsD,WAAQ1H,EAClBoE,EAAUuD,UAAW,EACrBvD,EAAUwD,WAAaH,EACvBrD,EAAUyD,SAAU,EACpBzD,EAAU0D,QAAUxI,OAAOyE,OAAO,MAElCK,EAAU2D,SAAWZ,EACrB/C,EAAU2C,SAAWM,EAEdjD,CACT,+BCxBA,IAAIiL,EAAe,qBACfC,EAAa,mBACbC,EAAS,EAAQ,MACjBC,EAAO,EAAQ,MAyKnB,SAASC,IAAS,CAQlB,SAASC,IACP9U,KAAK+U,SAASC,OAChB,CAOA,SAASC,IACgB,iBAAZjV,KAAKkV,IAEdlV,KAAKmV,OAET,CAxLA3U,EAAOC,QAUP,SAAkB2U,EAAQC,GAcxB,OAkHF,SAAyBD,GACvB,OAAOA,aAAkBV,CAC3B,CAjIMY,CAAeF,GAwIrB,SAAuBA,GACrB,OAAOA,aAAkBR,EAAKW,MAC5BH,aAAkBR,EAAKY,QACvBJ,aAAkBR,EAAKa,SACvBL,aAAkBR,EAAKc,YACvBN,aAAkBR,EAAKe,SACvBP,aAAkBR,EAAKgB,YACvBR,aAAkBR,EAAKiB,KAC3B,CA9IaC,CAAaV,GAsE1B,SAA4BA,GACI,mBAAnBA,EAAO9F,QAGZ8F,EAAOL,UAETK,EAAO9F,UACH8F,EAAOW,aACTX,EAAOY,YAAa,EACpBZ,EAAOa,KAAK,QAASnB,IAErBM,EAAOL,SAASC,SAETI,EAAOc,UAAYd,EAAOc,WAAavB,EAAOwB,UAAUzV,UAAUwV,SAE3Ed,EAAO9F,UACE8F,EAAOc,UAAoC,mBAAjBd,EAAOD,OAE1CC,EAAOgB,WAAY,EACnBhB,EAAOD,SAIPC,EAAO9F,UAEwB,mBAAjB8F,EAAOD,OAvD3B,SAA0BC,GACxB,IAAyB,IAArBA,EAAOiB,UAAoB,CAC7B,IAAI3J,EAA2B,OAApB0I,EAAOL,SACd,WACA,UAEJK,EAAO1I,GAAQ,CACbyI,MAAO,WAAcnV,KAAK0M,GAAQ,IAAK,EAE3C,CAEA0I,EAAOD,OACT,CA6CImB,CAAgBlB,EAEpB,CAlGImB,CAAkBnB,GAyGtB,SAAqBA,GACnB,OAAOA,aAAkBT,GACG,mBAAnBS,EAAO9F,OAClB,CA3GakH,CAAWpB,IACpBA,EAAO9F,UAkBX,SAA4B8F,GAC1BA,EAAO9F,UAEqB,mBAAjB8F,EAAOD,OAEhBC,EAAOqB,GAAG,OAAQxB,EAEtB,CA7BIyB,CAAkBtB,GAODA,aA+GGX,GA/GQY,IAC5BD,EAAOuB,mBAAmB,SAC1BvB,EAAOwB,YAAY,QAAS/B,IAGvBO,CACT,yBC8BA,SAASyB,EAASC,EAAOnT,GACvB,OAAO,SAAiBoT,GAQtB,IAPA,IAAIlU,EAAO,IAAIhC,MAAME,UAAUC,QAE3ByC,EAAgB,UAAVqT,EACNC,EACA,KAGK9V,EAAI,EAAGA,EAAI4B,EAAK7B,OAAQC,IAC/B4B,EAAK5B,GAAKF,UAAUE,GAGtB0C,EAAKF,EAVIzD,KAUK8W,EAAOjU,EACvB,CACF,CAjFArC,EAAOC,QAUP,SAAeuW,EAAOrT,GACpB,IAAK9C,MAAMC,QAAQkW,GACjB,MAAM,IAAIhT,UAAU,kDAItB,IAFA,IAAIiT,EAAW,GAENhW,EAAI,EAAGA,EAAI+V,EAAMhW,OAAQC,IAAK,CACrC,IAAIiW,EAAMF,EAAM/V,GAEhB,IAAKJ,MAAMC,QAAQoW,IAAQA,EAAIlW,OAAS,EACtC,MAAM,IAAIgD,UAAU,6CAItB,IAFA,IAAImT,EAAKD,EAAI,GAEJrH,EAAI,EAAGA,EAAIqH,EAAIlW,OAAQ6O,IAAK,CACnC,IAAIiH,EAAQI,EAAIrH,GACZjL,EAAKiS,EAASC,EAAOM,GAGzBD,EAAGV,GAAGK,EAAOlS,GAEbqS,EAAS5R,KAAK,CACZ8R,GAAIA,EACJL,MAAOA,EACPlS,GAAIA,GAER,CACF,CAEA,SAASwS,IACPC,IACA1T,EAAKT,MAAM,KAAMnC,UACnB,CAEA,SAASsW,IAEP,IADA,IAAInE,EACKjS,EAAI,EAAGA,EAAIgW,EAASjW,OAAQC,KACnCiS,EAAI+D,EAAShW,IACXkW,GAAGG,eAAepE,EAAE4D,MAAO5D,EAAEtO,GAEnC,CAEA,SAAS2S,EAAM3S,GACbjB,EAAOiB,CACT,CAIA,OAFA2S,EAAMC,OAASH,EAERE,CACT,wBC3DA/W,EAAOC,QA0CP,SAAoBgX,GAClB,OAAOxT,OAAOwT,GACX7P,QAAQ8P,EAAiCC,GACzC/P,QAAQgQ,EAAqBC,UAClC,EAtCA,IAAID,EAAsB,2GAOtBF,EAAkC,2EAOlCC,EAAmC,+BCpBvC,IAAIG,EAAkB,UAOtBtX,EAAOC,QAUP,SAAoBiG,GAClB,IAOIqR,EAPA3P,EAAM,GAAK1B,EACXW,EAAQyQ,EAAgBvQ,KAAKa,GAEjC,IAAKf,EACH,OAAOe,EAIT,IAAI4P,EAAO,GACPxQ,EAAQ,EACRG,EAAY,EAEhB,IAAKH,EAAQH,EAAMG,MAAOA,EAAQY,EAAIpH,OAAQwG,IAAS,CACrD,OAAQY,EAAIU,WAAWtB,IACrB,KAAK,GACHuQ,EAAS,SACT,MACF,KAAK,GACHA,EAAS,QACT,MACF,KAAK,GACHA,EAAS,QACT,MACF,KAAK,GACHA,EAAS,OACT,MACF,KAAK,GACHA,EAAS,OACT,MACF,QACE,SAGApQ,IAAcH,IAChBwQ,GAAQ5P,EAAIkJ,UAAU3J,EAAWH,IAGnCG,EAAYH,EAAQ,EACpBwQ,GAAQD,CACV,CAEA,OAAOpQ,IAAcH,EACjBwQ,EAAO5P,EAAIkJ,UAAU3J,EAAWH,GAChCwQ,CACN,yBC/DA,IAAIC,EAAgC,iCA+EpC,SAASC,EAAeC,GACtB,IAAIC,EAAYD,GAAQ9N,KAAKjD,MAAM+Q,GAGnC,MAA4B,iBAAdC,EACVA,EACAC,GACN,CA/EA7X,EAAOC,QAWP,SAAgB6X,EAAYC,GAE1B,IAAIC,EAAgBF,EAAW,qBAC3BG,EAAYH,EAAW,iBAG3B,IAAKE,IAAkBC,EACrB,OAAO,EAMT,IAAIC,EAAeJ,EAAW,iBAC9B,GAAII,GAAgBT,EAA8BlS,KAAK2S,GACrD,OAAO,EAIT,GAAID,GAA2B,MAAdA,EAAmB,CAClC,IAAIE,EAAOJ,EAAiB,KAE5B,IAAKI,EACH,OAAO,EAKT,IAFA,IAAIC,GAAY,EACZC,EAkDR,SAAyBzQ,GAMvB,IALA,IAAI0Q,EAAM,EACNC,EAAO,GACPC,EAAQ,EAGH/X,EAAI,EAAG6Q,EAAM1J,EAAIpH,OAAQC,EAAI6Q,EAAK7Q,IACzC,OAAQmH,EAAIU,WAAW7H,IACrB,KAAK,GACC+X,IAAUF,IACZE,EAAQF,EAAM7X,EAAI,GAEpB,MACF,KAAK,GACH8X,EAAK1T,KAAK+C,EAAIkJ,UAAU0H,EAAOF,IAC/BE,EAAQF,EAAM7X,EAAI,EAClB,MACF,QACE6X,EAAM7X,EAAI,EAQhB,OAFA8X,EAAK1T,KAAK+C,EAAIkJ,UAAU0H,EAAOF,IAExBC,CACT,CA7EkBE,CAAeR,GACpBxX,EAAI,EAAGA,EAAI4X,EAAQ7X,OAAQC,IAAK,CACvC,IAAIoG,EAAQwR,EAAQ5X,GACpB,GAAIoG,IAAUsR,GAAQtR,IAAU,KAAOsR,GAAQ,KAAOtR,IAAUsR,EAAM,CACpEC,GAAY,EACZ,KACF,CACF,CAEA,GAAIA,EACF,OAAO,CAEX,CAGA,GAAIJ,EAAe,CACjB,IAAIU,EAAeX,EAAW,iBAG9B,KAFqBW,GAAkBhB,EAAcgB,IAAiBhB,EAAcM,IAGlF,OAAO,CAEX,CAEA,OAAO,CACT,yBCjFAhY,EAAOC,QAAU,WAChB,GAAsB,mBAAX0Y,QAAiE,mBAAjCzU,OAAO0U,sBAAwC,OAAO,EACjG,GAA+B,iBAApBD,OAAOE,SAAyB,OAAO,EAElD,IAAInV,EAAM,CAAC,EACPoV,EAAMH,OAAO,QACbI,EAAS7U,OAAO4U,GACpB,GAAmB,iBAARA,EAAoB,OAAO,EAEtC,GAA4C,oBAAxC5U,OAAOhE,UAAU8H,SAAS1F,KAAKwW,GAA8B,OAAO,EACxE,GAA+C,oBAA3C5U,OAAOhE,UAAU8H,SAAS1F,KAAKyW,GAAiC,OAAO,EAY3E,IAAKD,KADLpV,EAAIoV,GADS,GAEDpV,EAAO,OAAO,EAC1B,GAA2B,mBAAhBQ,OAAOK,MAAmD,IAA5BL,OAAOK,KAAKb,GAAKlD,OAAgB,OAAO,EAEjF,GAA0C,mBAA/B0D,OAAO8U,qBAAiF,IAA3C9U,OAAO8U,oBAAoBtV,GAAKlD,OAAgB,OAAO,EAE/G,IAAIyY,EAAO/U,OAAO0U,sBAAsBlV,GACxC,GAAoB,IAAhBuV,EAAKzY,QAAgByY,EAAK,KAAOH,EAAO,OAAO,EAEnD,IAAK5U,OAAOhE,UAAU+S,qBAAqB3Q,KAAKoB,EAAKoV,GAAQ,OAAO,EAEpE,GAA+C,mBAApC5U,OAAOkI,yBAAyC,CAC1D,IAAID,EAAajI,OAAOkI,yBAAyB1I,EAAKoV,GACtD,GAdY,KAcR3M,EAAW/I,QAA8C,IAA1B+I,EAAWT,WAAuB,OAAO,CAC7E,CAEA,OAAO,CACR,+BCvCA,IAAIwN,EAAa,EAAQ,MAEzBlZ,EAAOC,QAAU,WAChB,OAAOiZ,OAAkBP,OAAOQ,WACjC,iBCNA,IAAIC,EAAc,EAAQ,MACtBC,EAAM,EAAQ,KAIlB,SAASC,EAAQlW,EAAOmW,EAAQC,EAAKrU,GACnC,IAAI/B,EACJ,MAAMgW,EAAYG,EAAQC,EAAKrU,EACjC,CALAnF,EAAOC,QAAUqZ,EAOjBA,EAAOG,KAAO,SAAUF,EAAQC,EAAKrU,GACnCmU,GAAO,EAAOC,EAAQC,EAAKrU,EAC7B,EAEAmU,EAAOI,MAAQ,SAAUvH,EAAGC,EAAGmH,EAAQC,EAAKrU,GAC1CmU,EAAOnH,GAAKC,EAAGmH,EAAQC,EAAKrU,EAC9B,EAEAmU,EAAOK,SAAW,SAAUxH,EAAGC,EAAGmH,EAAQC,EAAKrU,GAC7CmU,EAAOnH,GAAKC,EAAGmH,EAAQC,EAAKrU,EAC9B,EAEAmU,EAAOM,GAAK,SAAUxW,EAAOmW,EAAQC,EAAKrU,GACxCmU,EAAOlW,EAAOmW,EAAQC,EAAKrU,EAC7B,EAEAmU,EAAOO,YAAc,SAAU1H,EAAGC,EAAGmH,EAAQC,EAAKrU,GAChDmU,EAAOnH,IAAMC,EAAGmH,EAAQC,EAAKrU,EAC/B,EAEAmU,EAAOQ,eAAiB,SAAU3H,EAAGC,EAAGmH,EAAQC,EAAKrU,GACnDmU,EAAOnH,IAAMC,EAAGmH,EAAQC,EAAKrU,EAC/B,EAEAmU,EAAOxH,UAAY,SAAUK,EAAGC,EAAGmH,EAAQC,EAAKrU,GAC9CmU,EAAOD,EAAIlH,EAAGC,GAAImH,EAAQC,EAAKrU,EACjC,EAEAmU,EAAOS,aAAe,SAAU5H,EAAGC,EAAGmH,EAAQC,EAAKrU,GACjDmU,GAAQD,EAAIlH,EAAGC,GAAImH,EAAQC,EAAKrU,EAClC,+BC1BA,IAsKoC6U,EAtKhChR,EAAY,EAAQ,KAAR,CAAgB,eAC5BiR,EAAiB,EAAQ,MACzBC,EAAW,EAAQ,MACnBC,EAAW,EAAQ,MACnBC,EAAe,EAAQ,MAmB3B,SAASC,EAAWd,GAClB,OAAOtJ,OAAOxM,OAAO8V,GAAQe,OAAO,GAAK,KAC3C,CAkNA,SAASC,EAAUC,EAAM5W,GACvB,IAAI6W,EAAOvW,OAAOkI,yBAAyBoO,EAAM,QAE7CC,GAAQA,EAAKhP,eACfgP,EAAKrX,MAAQQ,EACbM,OAAOsH,eAAegP,EAAM,OAAQC,GAExC,CAsCA,SAASC,EAAa9W,GACpB,MAA2B,UAApBA,EAAK2C,QAAQ,GAChB3C,EAAO,QACPA,CACN,CAjRA5D,EAAOC,QAuBP,SAASmZ,IAMP,IAJA,IAAInW,EACAuW,EACAD,EAAS,IACToB,EAAQ,CAAC,EACJla,EAAI,EAAGA,EAAIF,UAAUC,OAAQC,IAAK,CACzC,IAAIma,EAAMra,UAAUE,GACpB,GAAIma,aAAe/P,MAEjB0O,GADAtW,EAAM2X,GACOrB,QAAUtW,EAAI4X,YAActB,OAG3C,cAAeqB,GACb,IAAK,SACHpB,EAAMoB,EACN,MACF,IAAK,SACHrB,EAASqB,EACC,IAANna,GACFuI,EAAU,4DAA8D4R,EAAM,UAEhF,MACF,IAAK,SACHD,EAAQC,EAGd,CAEsB,iBAAXrB,IAAwBA,EAAS,KAAOA,GAAU,MAC3DvQ,EAAU,4DAGU,iBAAXuQ,IACPW,EAASX,KAAYA,EAAS,KAAOA,GAAU,QACjDA,EAAS,KAIX,IAAIS,EAAYZ,EAAYG,IAAWH,EAAYiB,EAAUd,IAgB7D,IAAK,IAAI9U,KAdJxB,IAEHA,EAAM+W,EACF,IAAIA,EAAUR,GACd,IAAI3O,MAAM2O,GAAOU,EAASX,IAC9B1O,MAAMiQ,kBAAkB7X,EAAKmW,IAG1BY,GAAe/W,aAAe+W,GAAc/W,EAAIsW,SAAWA,IAE9DtW,EAAI8X,OAASxB,EAAS,IACtBtW,EAAIsW,OAAStW,EAAI4X,WAAatB,GAGhBoB,EACF,WAARlW,GAA4B,eAARA,IACtBxB,EAAIwB,GAAOkW,EAAMlW,IAIrB,OAAOxB,CACT,EApFAjD,EAAOC,QAAQ+Z,UA2Ff,WACE,SAASA,IACP,MAAM,IAAIxW,UAAU,kCACtB,CAIA,OAFA2W,EAASH,EAAWnP,OAEbmP,CACT,CAnG2BgB,GAC3Bhb,EAAOC,QAAQgb,aAyJqBjB,EAzJmBha,EAAOC,QAAQ+Z,UA0J7D,SAAsB1T,GAC3B,SAAKA,GAAsB,iBAARA,KAIfA,aAAe0T,GAIZ1T,aAAeuE,OACE,kBAAfvE,EAAIyU,QACe,iBAAnBzU,EAAIuU,YAA2BvU,EAAIiT,SAAWjT,EAAIuU,WAC7D,GAsEF,SAAqC5a,EAASib,EAAOlB,GACnDkB,EAAM3J,SAAQ,SAAsB4J,GAClC,IAAIC,EACAxX,EAAOwW,EAAaF,EAASiB,IAEjC,OAAQd,EAAUc,IAChB,KAAK,IACHC,EA1IR,SAAuCpB,EAAWpW,EAAMuX,GACtD,IAAIE,EAAYX,EAAY9W,GAE5B,SAAS0X,EAAatP,GAEpB,IAAIwN,EAAiB,MAAXxN,EAAkBA,EAAUkO,EAASiB,GAC3ClY,EAAM,IAAI4H,MAAM2O,GAwBpB,OArBA3O,MAAMiQ,kBAAkB7X,EAAKqY,GAG7BrB,EAAehX,EAAKqY,EAAYpb,WAGhCgE,OAAOsH,eAAevI,EAAK,UAAW,CACpCyI,YAAY,EACZD,cAAc,EACdrI,MAAOoW,EACP+B,UAAU,IAIZrX,OAAOsH,eAAevI,EAAK,OAAQ,CACjCyI,YAAY,EACZD,cAAc,EACdrI,MAAOiY,EACPE,UAAU,IAGLtY,CACT,CASA,OAPAkX,EAASmB,EAAatB,GACtBO,EAASe,EAAaD,GAEtBC,EAAYpb,UAAUqZ,OAAS4B,EAC/BG,EAAYpb,UAAU2a,WAAaM,EACnCG,EAAYpb,UAAU6a,QAAS,EAExBO,CACT,CAiGoBE,CAA6BxB,EAAWpW,EAAMuX,GAC1D,MACF,KAAK,IACHC,EAxER,SAAuCpB,EAAWpW,EAAMuX,GACtD,IAAIE,EAAYX,EAAY9W,GAE5B,SAAS6X,EAAazP,GAEpB,IAAIwN,EAAiB,MAAXxN,EAAkBA,EAAUkO,EAASiB,GAC3ClY,EAAM,IAAI4H,MAAM2O,GAwBpB,OArBA3O,MAAMiQ,kBAAkB7X,EAAKwY,GAG7BxB,EAAehX,EAAKwY,EAAYvb,WAGhCgE,OAAOsH,eAAevI,EAAK,UAAW,CACpCyI,YAAY,EACZD,cAAc,EACdrI,MAAOoW,EACP+B,UAAU,IAIZrX,OAAOsH,eAAevI,EAAK,OAAQ,CACjCyI,YAAY,EACZD,cAAc,EACdrI,MAAOiY,EACPE,UAAU,IAGLtY,CACT,CASA,OAPAkX,EAASsB,EAAazB,GACtBO,EAASkB,EAAaJ,GAEtBI,EAAYvb,UAAUqZ,OAAS4B,EAC/BM,EAAYvb,UAAU2a,WAAaM,EACnCM,EAAYvb,UAAU6a,QAAS,EAExBU,CACT,CA+BoBC,CAA6B1B,EAAWpW,EAAMuX,GAI1DC,IAEFnb,EAAQkb,GAAQC,EAChBnb,EAAQ2D,GAAQwX,EAEpB,IAGAnb,EAAQ,cAAgB+I,EAAU2D,SAAS1M,EAAQ0b,UACjD,yCACJ,CAjQAC,CAA2B5b,EAAOC,QAASia,EAASgB,MAAOlb,EAAOC,QAAQ+Z,qBC9B7C,mBAAlB9V,OAAOyE,OAEhB3I,EAAOC,QAAU,SAAkB4b,EAAMC,GACnCA,IACFD,EAAKE,OAASD,EACdD,EAAK3b,UAAYgE,OAAOyE,OAAOmT,EAAU5b,UAAW,CAClDyD,YAAa,CACXP,MAAOyY,EACPnQ,YAAY,EACZ6P,UAAU,EACV9P,cAAc,KAItB,EAGAzL,EAAOC,QAAU,SAAkB4b,EAAMC,GACvC,GAAIA,EAAW,CACbD,EAAKE,OAASD,EACd,IAAIE,EAAW,WAAa,EAC5BA,EAAS9b,UAAY4b,EAAU5b,UAC/B2b,EAAK3b,UAAY,IAAI8b,EACrBH,EAAK3b,UAAUyD,YAAckY,CAC/B,CACF,+BCvBF,IAcII,EAdAC,EAAQhY,OAAOhE,UAAU8H,SACzBmU,EAAUC,SAASlc,UAAU8H,SAC7BqU,EAAY,sBACZC,EAAiB,EAAQ,KAAR,GACjBC,EAAWrY,OAAOsY,eAYtBxc,EAAOC,QAAU,SAA6BmE,GAC7C,GAAkB,mBAAPA,EACV,OAAO,EAER,GAAIiY,EAAU9W,KAAK4W,EAAQ7Z,KAAK8B,IAC/B,OAAO,EAER,IAAKkY,EAEJ,MAAe,+BADLJ,EAAM5Z,KAAK8B,GAGtB,IAAKmY,EACJ,OAAO,EAER,QAAiC,IAAtBN,EAAmC,CAC7C,IAAIQ,EA1BiB,WACtB,IAAKH,EACJ,OAAO,EAER,IACC,OAAOF,SAAS,wBAATA,EACR,CAAE,MAAOrZ,GACT,CACD,CAkBsB2Z,GACpBT,IAAoBQ,GAAgBF,EAASE,EAC9C,CACA,OAAOF,EAASnY,KAAQ6X,CACzB,+BC7BA,IAAIU,EAAU,EAAQ,MAClBC,EAAS,EAAQ,MAErB,SAAS3T,EAAQ1E,EAAMsY,EAAW7b,GAGhC,GAFK6b,IAAWA,EAAY,QACvB7b,IAAUA,EAAW,YACpBxB,gBAAgByJ,GAAU,OAAO,IAAIA,EAAQ1E,EAAMsY,EAAW7b,GAEpE,IAAKuD,KAAU,KAAKA,GAClB,MAAM,IAAIsG,MAAM,0BAGlB,SAASC,EAAKN,EAAM/F,GAClB,OAAOmY,EACJE,WAAWD,EAAWpY,GACtBsY,OAAOvS,GAAMwS,OAAOhc,GACpBoG,QAAQ,YAAY,SAASsL,GAC5B,MAAO,CAAG,IAAK,IAAK,IAAK,IAAK,IAAK,IAAMA,EAC3C,GACJ,CAEAlT,KAAKsL,KAAO,SAASN,GAAO,OAAOM,EAAKN,EAAMjG,EAAK,GAAI,EAEvD/E,KAAKyd,OAAS,SAASzS,EAAMwS,GAC3B,OAAOxd,KAAKwH,MAAMwD,EAAMwS,IAAW,CACrC,EAEAxd,KAAKwH,MAAQ,SAASwD,EAAMwS,GAC1B,IAAK,IAAIvc,EAAI,EAAGyc,EAAI3Y,EAAK/D,OAAQC,EAAIyc,EAAGzc,IACtC,GAAIkc,EAAQK,EAAQlS,EAAKN,EAAMjG,EAAK9D,KAClC,OAAOA,EAIX,OAAQ,CACV,CACF,CAEAwI,EAAQ6B,KAAO7B,EAAQgU,OAAShU,EAAQjC,MAAQ,WAC9C,MAAM,IAAI6D,MAAM,6CAClB,EAEA7K,EAAOC,QAAUgJ,yBC5CjBjJ,EAAOC,QAYP,SAAkBkd,GAChB,IAAK9c,MAAMC,QAAQ6c,GAAa,MAAM,IAAI3Z,UAAU,sCACpD,IAAK,MAAMY,KAAM+Y,EACf,GAAkB,mBAAP/Y,EAAmB,MAAM,IAAIZ,UAAU,6CASpD,OAAO,SAAU4Z,EAASza,GAExB,IAAIqE,GAAS,EACb,OACA,SAASqW,EAAU5c,GACjB,GAAIA,GAAKuG,EAAO,OAAOzE,QAAQE,OAAO,IAAIoI,MAAM,iCAChD7D,EAAQvG,EACR,IAAI2D,EAAK+Y,EAAW1c,GAEpB,GADIA,IAAM0c,EAAW3c,SAAQ4D,EAAKzB,IAC7ByB,EAAI,OAAO7B,QAAQC,UACxB,IACE,OAAOD,QAAQC,QAAQ4B,EAAGgZ,EAASC,EAASC,KAAK,KAAM7c,EAAI,IAC7D,CAAE,MAAOwC,GACP,OAAOV,QAAQE,OAAOQ,EACxB,CACF,CAZOoa,CAAS,EAalB,CACF,+BCzCA,MAAMnb,EAAK,EAAQ,MACbqb,EAAU,EAAQ,MAgBxB,SAASC,EAASC,GAChB,GAAkB,mBAAPA,EACT,MAAM,IAAIja,UAAU,iCAItB,GAC0B,sBAAxBia,EAAG9Z,YAAYC,MACS,2BAAxB6Z,EAAG9Z,YAAYC,KAEf,OAAO6Z,EAGT,MAAMC,EAAY,SAAUtb,EAAKO,GAC/B,OAAOT,EAAGI,KACRF,EACAqb,EAAGnb,KACDF,EACA,UAAaO,GAAQ,aAAaA,GAAQ,CAA1C,CAA4CA,IAElD,EAGA,OADA+a,EAAUC,MAAQF,EAAGE,OAASF,EAAG7Z,KAC1B8Z,CACT,CAlCA1d,EAAOC,QAAUud,EA+CjBA,EAAQD,QAAU,SAAU7G,GAK1B,OAJKrW,MAAMC,QAAQoW,KACjBA,EAAMrW,MAAM0H,KAAKxH,YAGZgd,EAAQ7G,EAAI7V,IAAI2c,GACzB,EAUAA,EAAQI,KAAO,SAAUH,GACvB,GAAkB,mBAAPA,EACT,MAAM,IAAIja,UAAU,iCAItB,GAA4B,sBAAxBia,EAAG9Z,YAAYC,MAAwD,2BAAxB6Z,EAAG9Z,YAAYC,KAChE,OAAO6Z,EAGT,MAAMC,EAAY,UAAY/a,GAC5B,MAAMP,EAAM5C,KACZ,IAAIqe,GAAS,QAEPJ,EAAGrb,GAAK,WACZ,GAAIyb,EAGF,MAAM,IAAIhT,MAAM,gCAIlB,OADAgT,GAAS,EACF3b,EAAGI,KAAKF,EAAKO,EACtB,GACF,EAGA,OADA+a,EAAUC,MAAQF,EAAGE,OAASF,EAAG7Z,KAC1B8Z,CACT,+BCjGA,MAAM3Z,EAAsB,EAAQ,MAC9BoL,EAAQ,EAAQ,KAAR,CAAiB,mBACzB2O,EAAa,EAAQ,KACrBxE,EAAS,EAAQ,MACjB9P,EAAW,EAAQ,MACnB+T,EAAU,EAAQ,MAClBH,EAAU,EAAQ,MAClB7T,EAAU,EAAQ,MAClB2Q,EAAW,EAAQ,MACnB6D,EAAU,EAAQ,MAClBC,EAAO,EAAQ,MACf7J,EAAS,EAAQ,MACjBjL,EAAO,EAAQ,MACf+U,EAAO,EAAQ,MACfT,EAAU,EAAQ,MAClBxU,EAAY,EAAQ,KAAR,CAAgB,QAC5B,UAAEgR,GAAc,EAAQ,MAO9Bha,EAAOC,QAAU,MAAMie,UAAoBH,EAmBzCpa,YAAYuB,GAkBV,GAjBAiZ,QACAjZ,EAAUA,GAAW,CAAC,EACtB1F,KAAK4e,MAAQlZ,EAAQkZ,QAAS,EAC9B5e,KAAK6e,gBAAkBnZ,EAAQmZ,iBAAmB,EAClD7e,KAAK8e,cAAgBpZ,EAAQoZ,eAAiB,kBAC9C9e,KAAK+e,YAAcrZ,EAAQqZ,aAAe,EAC1C/e,KAAKqO,IAAM3I,EAAQ2I,KAAO,aACtB3I,EAAQX,OAAM/E,KAAK+E,KAAOW,EAAQX,MACtC/E,KAAK2d,WAAa,GAClB3d,KAAK4d,QAAUlZ,OAAOyE,OAAOyU,GAC7B5d,KAAK+J,QAAUrF,OAAOyE,OAAOY,GAC7B/J,KAAKgK,SAAWtF,OAAOyE,OAAOa,GAG1BwU,EAAKQ,QAAQC,SACfjf,KAAKwe,EAAKQ,QAAQC,QAAUjf,KAAKgf,SAE/BtZ,EAAQwZ,kBAAmB,CAC7B,MAAM,kBAAEC,GAAsB,EAAQ,KACtCrF,EAAOqF,EAAmB,+DAC1Bnf,KAAKof,WAAa,IAAID,EACtBnf,KAAKqf,IAAIrf,KAAKsf,kCAChB,CACF,CAYAC,UAAU1c,GAGR,OAFA8M,EAAM,UACSjG,EAAK8V,aAAaxf,KAAKoX,YACxBmI,UAAU1c,EAC1B,CAUA4c,SACE,OAAOhB,EAAKze,KAAM,CAChB,kBACA,QACA,OAEJ,CASAgf,UACE,OAAOhf,KAAKyf,QACd,CAYAJ,IAAIza,GACF,GAAkB,mBAAPA,EAAmB,MAAM,IAAIZ,UAAU,kCASlD,OARIO,EAAoBK,KACtB4E,EAAU,gLAGV5E,EAAKoZ,EAAQpZ,IAEf+K,EAAM,SAAU/K,EAAGuZ,OAASvZ,EAAGR,MAAQ,KACvCpE,KAAK2d,WAAWtY,KAAKT,GACd5E,IACT,CAUAoX,WACE,MAAMxS,EAAKmZ,EAAQ/d,KAAK2d,YASxB,OAPK3d,KAAK0f,cAAc,UAAU1f,KAAKyW,GAAG,QAASzW,KAAK2f,SAElC,CAAC5f,EAAKsD,KAC1B,MAAMT,EAAM5C,KAAK4f,cAAc7f,EAAKsD,GACpC,OAAOrD,KAAK6f,cAAcjd,EAAKgC,EAAG,CAItC,CAKIkb,qBACF,GAAI9f,KAAKof,WAAY,OAAOpf,KAAKof,WAAWW,UAC9C,CAQAF,cAAcjd,EAAKod,GACjB,MAAM3c,EAAMT,EAAIS,IAChBA,EAAIgY,WAAa,IACjB,MAAMsE,EAAUlc,GAAOb,EAAI+c,QAAQlc,GAGnC,OADA6a,EAAWjb,EAAKsc,GACTK,EAAapd,GAAKmB,MAFF,IAwE3B,SAAiBnB,GAEf,IAAI,IAAUA,EAAIqd,QAAS,OAE3B,IAAKrd,EAAImZ,SAAU,OAEnB,MAAM1Y,EAAMT,EAAIS,IAChB,IAAI6c,EAAOtd,EAAIsd,KACf,MAAMvE,EAAO/Y,EAAImX,OAGjB,GAAIW,EAASyF,MAAMxE,GAGjB,OADA/Y,EAAIsd,KAAO,KACJ7c,EAAIyV,MAGb,GAAI,SAAWlW,EAAIsR,OAAQ,CACzB,IAAK7Q,EAAI+c,cAAgBxd,EAAIoH,SAASqW,IAAI,kBAAmB,CAC3D,MAAM,OAAErf,GAAW4B,EAAIoH,SACnByG,OAAO6P,UAAUtf,KAAS4B,EAAI5B,OAASA,EAC7C,CACA,OAAOqC,EAAIyV,KACb,CAGA,OAAI,MAAQoH,EACNtd,EAAIoH,SAASuW,mBACf3d,EAAIoH,SAASwW,OAAO,gBACpB5d,EAAIoH,SAASwW,OAAO,qBACbnd,EAAIyV,QAGXoH,EADEtd,EAAI7C,IAAI0gB,kBAAoB,EACvBxc,OAAO0X,GAEP/Y,EAAI4J,SAAWvI,OAAO0X,GAE1BtY,EAAI+c,cACPxd,EAAIxC,KAAO,OACXwC,EAAI5B,OAAS+G,OAAO2Y,WAAWR,IAE1B7c,EAAIyV,IAAIoH,IAIbnY,OAAO+K,SAASoN,IAChB,iBAAoBA,EADU7c,EAAIyV,IAAIoH,GAEtCA,aAAgBvL,EAAeuL,EAAKS,KAAKtd,IAG7C6c,EAAOnQ,KAAKC,UAAUkQ,GACjB7c,EAAI+c,cACPxd,EAAI5B,OAAS+G,OAAO2Y,WAAWR,SAEjC7c,EAAIyV,IAAIoH,GACV,CA/HiCD,CAAQrd,KAESge,MAAMjB,EACtD,CAQAC,cAAc7f,EAAKsD,GACjB,MAAMua,EAAUlZ,OAAOyE,OAAOnJ,KAAK4d,SAC7B7T,EAAU6T,EAAQ7T,QAAUrF,OAAOyE,OAAOnJ,KAAK+J,SAC/CC,EAAW4T,EAAQ5T,SAAWtF,OAAOyE,OAAOnJ,KAAKgK,UASvD,OARA4T,EAAQiD,IAAM9W,EAAQ8W,IAAM7W,EAAS6W,IAAM7gB,KAC3C4d,EAAQ7d,IAAMgK,EAAQhK,IAAMiK,EAASjK,IAAMA,EAC3C6d,EAAQva,IAAM0G,EAAQ1G,IAAM2G,EAAS3G,IAAMA,EAC3C0G,EAAQnH,IAAMoH,EAASpH,IAAMgb,EAC7B7T,EAAQC,SAAWA,EACnBA,EAASD,QAAUA,EACnB6T,EAAQkD,YAAc/W,EAAQ+W,YAAc/gB,EAAI0X,IAChDmG,EAAQmD,MAAQ,CAAC,EACVnD,CACT,CASA+B,QAAQlc,GAON,KAF0C,mBAAxCiB,OAAOhE,UAAU8H,SAAS1F,KAAKW,IAC/BA,aAAe4H,OACG,MAAM,IAAIrH,UAAUwa,EAAKtX,OAAO,uBAAwBzD,IAE5E,GAAI,MAAQA,EAAIsW,QAAUtW,EAAI8X,OAAQ,OACtC,GAAIvb,KAAKghB,OAAQ,OAEjB,MAAMhH,EAAMvW,EAAI+N,OAAS/N,EAAI+E,WAC7BuG,QAAQf,MAAM,KAAKgM,EAAIpS,QAAQ,MAAO,UACxC,CAOW2J,qBACT,OAAOmN,CACT,CAEAY,kCACE,MAAMuB,EAAM7gB,KACZ,OAAOihB,eAA+Bre,EAAKO,SACnC0d,EAAIzB,WAAW8B,IAAIte,GAAKqe,eACf9d,KAEjB,CACF,GAqEF3C,EAAOC,QAAQ+Z,UAAYA,+BClT3B,MAAMgE,EAAO,EAAQ,MACf5E,EAAc,EAAQ,MACtBuH,EAAa,EAAQ,KACrBC,EAAW,EAAQ,MACnB1G,EAAW,EAAQ,MACnB5Q,EAAU,EAAQ,MAElBuX,EAAUlI,OAAO,mBAMjBvF,EAAQpT,EAAOC,QAAU,CAU7Bue,UACE,OAAIhf,OAAS4T,EAAc5T,KACpBA,KAAKyf,QACd,EAcAA,SACE,MAAO,CACL1V,QAAS/J,KAAK+J,QAAQ0V,SACtBzV,SAAUhK,KAAKgK,SAASyV,SACxBoB,IAAK7gB,KAAK6gB,IAAIpB,SACdqB,YAAa9gB,KAAK8gB,YAClB/gB,IAAK,sBACLsD,IAAK,sBACLie,OAAQ,yBAEZ,EAeAxH,OAAQqH,EAuBRzd,SAASb,GACP,MAAM+W,KAAe/W,EACvB,EASA8c,QAAQlc,GAIN,GAAI,MAAQA,EAAK,OAMyB,mBAAxCiB,OAAOhE,UAAU8H,SAAS1F,KAAKW,IAC/BA,aAAe4H,QACG5H,EAAM,IAAI4H,MAAMmT,EAAKtX,OAAO,uBAAwBzD,KAExE,IAAI8d,GAAa,EAWjB,IAVIvhB,KAAKuhB,YAAevhB,KAAK+b,WAC3BwF,EAAa9d,EAAI8d,YAAa,GAIhCvhB,KAAK6gB,IAAIW,KAAK,QAAS/d,EAAKzD,MAKxBuhB,EACF,OAGF,MAAM,IAAEle,GAAQrD,KAIkB,mBAAvBqD,EAAIoe,eACbpe,EAAIoe,iBAAiB1P,SAAQ3N,GAAQf,EAAIqe,aAAatd,KAEtDf,EAAIse,SAAW,CAAC,EAIlB3hB,KAAKwC,IAAIiB,EAAIxD,SAGbD,KAAKI,KAAO,OAEZ,IAAIib,EAAa5X,EAAIsW,QAAUtW,EAAI4X,WAG/B,WAAa5X,EAAIkY,OAAMN,EAAa,KAGpC,iBAAoBA,GAAeX,EAASW,KAAaA,EAAa,KAG1E,MAAMM,EAAOjB,EAASW,GAChBrB,EAAMvW,EAAI8X,OAAS9X,EAAI+I,QAAUmP,EACvC3b,KAAK+Z,OAAStW,EAAIsW,OAASsB,EAC3Brb,KAAKgB,OAAS+G,OAAO2Y,WAAW1G,GAChC3W,EAAIyV,IAAIkB,EACV,EAEI1N,cAOF,OANKtM,KAAKqhB,KACRrhB,KAAKqhB,GAAW,IAAIvX,EAAQ9J,KAAKD,IAAKC,KAAKqD,IAAK,CAC9C0B,KAAM/E,KAAK6gB,IAAI9b,KACfkF,OAAQjK,KAAK+J,QAAQE,UAGlBjK,KAAKqhB,EACd,EAEI/U,YAAQsV,GACV5hB,KAAKqhB,GAAWO,CAClB,GAWEpD,EAAKQ,QAAQC,SACfze,EAAOC,QAAQ+d,EAAKQ,QAAQC,QAAUze,EAAOC,QAAQue,SAOvDoC,EAASxN,EAAO,YACbM,OAAO,cACPA,OAAO,YACPA,OAAO,UACPA,OAAO,QACPA,OAAO,OACPA,OAAO,OACPA,OAAO,UACPA,OAAO,gBACPC,OAAO,UACPA,OAAO,WACPA,OAAO,QACPA,OAAO,UACPA,OAAO,QACPA,OAAO,gBACPA,OAAO,QACPC,OAAO,cACPA,OAAO,YAMVgN,EAASxN,EAAO,WACbM,OAAO,oBACPA,OAAO,oBACPA,OAAO,mBACPA,OAAO,WACPA,OAAO,OACPA,OAAO,MACPC,OAAO,eACPA,OAAO,cACPA,OAAO,UACPA,OAAO,UACPA,OAAO,UACPA,OAAO,SACPA,OAAO,QACPA,OAAO,OACPA,OAAO,UACPC,OAAO,UACPA,OAAO,QACPA,OAAO,cACPA,OAAO,YACPA,OAAO,QACPA,OAAO,YACPA,OAAO,OACPA,OAAO,UACPA,OAAO,WACPA,OAAO,UACPA,OAAO,SACPA,OAAO,SACPA,OAAO,OACPA,OAAO,mCCnPV,MAAMyN,EAAM,YACNC,EAAM,EAAQ,MACdC,EAAU,EAAQ,MAClBxf,EAAc,EAAQ,MACtByN,EAAY,eACZ5I,EAAQ,EAAQ,MAChB4a,EAAK,EAAQ,MACbC,EAAS,EAAQ,KACjBC,EAAQ,EAAQ,MAChBzD,EAAO,EAAQ,MACfD,EAAO,EAAQ,MAEf2D,EAAKhJ,OAAO,cAMlB3Y,EAAOC,QAAU,CASX2I,aACF,OAAOpJ,KAAKD,IAAIE,OAClB,EAQImJ,WAAOtC,GACT9G,KAAKD,IAAIE,QAAU6G,CACrB,EASI7G,cACF,OAAOD,KAAKD,IAAIE,OAClB,EAQIA,YAAQ6G,GACV9G,KAAKD,IAAIE,QAAU6G,CACrB,EASI2Q,UACF,OAAOzX,KAAKD,IAAI0X,GAClB,EAQIA,QAAI3Q,GACN9G,KAAKD,IAAI0X,IAAM3Q,CACjB,EASIsb,aACF,MAAO,GAAGpiB,KAAKuL,cAAcvL,KAAKqiB,MACpC,EASIC,WAEF,MAAI,gBAAgBvc,KAAK/F,KAAK8gB,aAAqB9gB,KAAK8gB,YACjD9gB,KAAKoiB,OAASpiB,KAAK8gB,WAC5B,EASI5M,aACF,OAAOlU,KAAKD,IAAImU,MAClB,EASIA,WAAOpN,GACT9G,KAAKD,IAAImU,OAASpN,CACpB,EASIyD,WACF,OAAOnD,EAAMpH,KAAKD,KAAKwiB,QACzB,EASIhY,SAAKA,GACP,MAAMkN,EAAMrQ,EAAMpH,KAAKD,KACnB0X,EAAI8K,WAAahY,IAErBkN,EAAI8K,SAAWhY,EACfkN,EAAIlN,KAAO,KAEXvK,KAAKyX,IAAMzH,EAAUyH,GACvB,EASI+K,YACF,MAAMpa,EAAMpI,KAAKyiB,YACXjV,EAAIxN,KAAK0iB,YAAc1iB,KAAK0iB,aAAe,CAAC,EAClD,OAAOlV,EAAEpF,KAASoF,EAAEpF,GAAO4Z,EAAG5a,MAAMgB,GACtC,EASIoa,UAAMte,GACRlE,KAAKyiB,YAAcT,EAAGhS,UAAU9L,EAClC,EASIue,kBACF,OAAKziB,KAAKD,KACHqH,EAAMpH,KAAKD,KAAKyiB,OADD,EAExB,EASIC,gBAAYra,GACd,MAAMqP,EAAMrQ,EAAMpH,KAAKD,KACnB0X,EAAIkL,SAAW,IAAIva,MAEvBqP,EAAIkL,OAASva,EACbqP,EAAIlN,KAAO,KAEXvK,KAAKyX,IAAMzH,EAAUyH,GACvB,EAUIkL,aACF,OAAK3iB,KAAKyiB,YACH,IAAIziB,KAAKyiB,cADc,EAEhC,EAUIE,WAAOva,GACTpI,KAAKyiB,YAAcra,CACrB,EAWIia,WAEF,IAAIA,EADUriB,KAAK6gB,IAAIjC,OACH5e,KAAKsC,IAAI,oBAK7B,OAJK+f,IACCriB,KAAKD,IAAI0gB,kBAAoB,IAAG4B,EAAOriB,KAAKsC,IAAI,eAC/C+f,IAAMA,EAAOriB,KAAKsC,IAAI,UAExB+f,EACEA,EAAKxQ,MAAM,UAAW,GAAG,GADd,EAEpB,EAWI+Q,eACF,MAAMP,EAAOriB,KAAKqiB,KAClB,OAAKA,EACD,MAAQA,EAAK,GAAWriB,KAAK6hB,IAAIe,UAAY,GAC1CP,EAAKxQ,MAAM,IAAK,GAAG,GAFR,EAGpB,EAUIgQ,UAEF,IAAK7hB,KAAK6iB,YAAa,CACrB,MAAM/B,EAAc9gB,KAAK8gB,aAAe,GACxC,IACE9gB,KAAK6iB,YAAc,IAAIhB,EAAI,GAAG7hB,KAAKoiB,SAAStB,IAC9C,CAAE,MAAOrd,GACPzD,KAAK6iB,YAAcne,OAAOyE,OAAO,KACnC,CACF,CACA,OAAOnJ,KAAK6iB,WACd,EAWIX,YACF,MAAMhO,EAASlU,KAAKkU,OACd4O,EAAI9iB,KAAK4C,IAAImX,OAGnB,OAAI,QAAU7F,GAAU,SAAWA,KAG9B4O,GAAK,KAAOA,EAAI,KAAQ,MAAQA,IAC5BZ,EAAMliB,KAAKoJ,OAAQpJ,KAAKgK,SAASZ,OAI5C,EAWI2Z,YACF,OAAQ/iB,KAAKkiB,KACf,EASIc,iBAEF,SADgB,CAAC,MAAO,OAAQ,MAAO,SAAU,UAAW,SAC1C3iB,QAAQL,KAAKkU,OACjC,EASIoN,aACF,OAAOthB,KAAKD,IAAIuhB,MAClB,EASI3f,cACF,IACE,MAAM,WAAE6E,GAAejE,EAAY6E,MAAMpH,KAAKD,KAC9C,OAAOyG,EAAW7E,SAAW,EAC/B,CAAE,MAAO4B,GACP,MAAO,EACT,CACF,EASIvC,aACF,MAAM8Q,EAAM9R,KAAKsC,IAAI,kBACrB,GAAY,KAARwP,EACJ,QAASA,CACX,EAcIvG,eACF,GAAIvL,KAAKshB,OAAO7V,UAAW,MAAO,QAClC,IAAKzL,KAAK6gB,IAAIjC,MAAO,MAAO,OAC5B,MAAMhL,EAAQ5T,KAAKsC,IAAI,qBACvB,OAAOsR,EAAQA,EAAM/B,MAAM,UAAW,GAAG,GAAK,MAChD,EAWI5H,aACF,MAAO,UAAYjK,KAAKuL,QAC1B,EAcI0X,UACF,MAAMrE,EAAQ5e,KAAK6gB,IAAIjC,MACjB9X,EAAM9G,KAAKsC,IAAItC,KAAK6gB,IAAI/B,eAC9B,IAAImE,EAAMrE,GAAS9X,EACfA,EAAI+K,MAAM,WACV,GAIJ,OAHI7R,KAAK6gB,IAAI9B,YAAc,IACzBkE,EAAMA,EAAIxgB,OAAOzC,KAAK6gB,IAAI9B,cAErBkE,CACT,EAWIC,SAIF,OAHKljB,KAAKmiB,KACRniB,KAAKmiB,GAAMniB,KAAKijB,IAAI,IAAMjjB,KAAKshB,OAAO6B,eAAiB,IAElDnjB,KAAKmiB,EACd,EAEIe,OAAGE,GACLpjB,KAAKmiB,GAAMiB,CACb,EAkBIC,iBACF,MAAMC,EAAStjB,KAAK6gB,IAAIhC,gBAClB+D,EAAW5iB,KAAK4iB,SACtB,OAAId,EAAIyB,KAAKX,GAAkB,GACxBA,EACJ/Q,MAAM,KACN2R,UACA/gB,MAAM6gB,EACX,EAUIniB,aACF,OAAOnB,KAAKyjB,UAAYzjB,KAAKyjB,QAAU1B,EAAQ/hB,KAAKD,KACtD,EASIoB,WAAO+C,GACTlE,KAAKyjB,QAAUvf,CACjB,EA2CA6d,WAAWlf,GACT,OAAO7C,KAAKmB,OAAOR,SAASkC,EAC9B,EAeA6gB,oBAAoB7gB,GAClB,OAAO7C,KAAKmB,OAAOM,aAAaoB,EAClC,EAeA8gB,mBAAmB9gB,GACjB,OAAO7C,KAAKmB,OAAOS,YAAYiB,EACjC,EAeA+gB,oBAAoB/gB,GAClB,OAAO7C,KAAKmB,OAAOc,aAAaY,EAClC,EA6BAghB,GAAGzjB,KAASO,GACV,OAAOshB,EAAOjiB,KAAKD,IAAKK,KAASO,EACnC,EAUIP,WACF,MAAMA,EAAOJ,KAAKsC,IAAI,gBACtB,OAAKlC,EACEA,EAAKyR,MAAM,KAAK,GADL,EAEpB,EAwBAvP,IAAIwhB,GACF,MAAM/jB,EAAMC,KAAKD,IACjB,OAAQ+jB,EAAQA,EAAMnd,eACpB,IAAK,UACL,IAAK,WACH,OAAO5G,EAAIE,QAAQ8jB,UAAYhkB,EAAIE,QAAQ+jB,SAAW,GACxD,QACE,OAAOjkB,EAAIE,QAAQ6jB,IAAU,GAEnC,EASA9E,UACE,GAAKhf,KAAKD,IACV,OAAOC,KAAKyf,QACd,EASAA,SACE,OAAOhB,EAAKze,KAAM,CAChB,SACA,MACA,UAEJ,GAWEwe,EAAKQ,QAAQC,SACfze,EAAOC,QAAQ+d,EAAKQ,QAAQC,QAAUze,EAAOC,QAAQue,sCC7sBvD,MAAMiF,EAAqB,EAAQ,MAC7BC,EAAU,EAAQ,MAClBC,EAAW,EAAQ,KACnBpM,EAAS,EAAQ,MACjBkK,EAAS,UACTvH,EAAW,EAAQ,MACnBpL,EAAU,EAAQ,MAClBwK,EAAS,EAAQ,MACjBsK,EAAU,gBACVC,EAAO,EAAQ,MACf5F,EAAO,EAAQ,MACfD,EAAO,EAAQ,MACf8F,EAAY,EAAQ,KACpB3P,EAAS,EAAQ,MAMvBnU,EAAOC,QAAU,CASX6gB,aACF,OAAOthB,KAAKqD,IAAIie,MAClB,EASIlY,aACF,MAAM,IAAE/F,GAAQrD,KAChB,MAAiC,mBAAnBqD,EAAIkhB,WACdlhB,EAAIkhB,aACJlhB,EAAIse,UAAY,CAAC,CACvB,EASI1hB,cACF,OAAOD,KAAKoJ,MACd,EASI2Q,aACF,OAAO/Z,KAAKqD,IAAIgY,UAClB,EASItB,WAAO4B,GACL3b,KAAKuhB,aAETzH,EAAOrJ,OAAO6P,UAAU3E,GAAO,gCAC/B7B,EAAO6B,GAAQ,KAAOA,GAAQ,IAAK,wBAAwBA,KAC3D3b,KAAKwkB,iBAAkB,EACvBxkB,KAAKqD,IAAIgY,WAAaM,EAClB3b,KAAKD,IAAI0gB,iBAAmB,IAAGzgB,KAAKqD,IAAIohB,cAAgB/J,EAASiB,IACjE3b,KAAKkgB,MAAQxF,EAASyF,MAAMxE,KAAO3b,KAAKkgB,KAAO,MACrD,EASI1T,cACF,OAAOxM,KAAKqD,IAAIohB,eAAiB/J,EAAS1a,KAAK+Z,OACjD,EASIvN,YAAQwN,GACVha,KAAKqD,IAAIohB,cAAgBzK,CAC3B,EASIkG,WACF,OAAOlgB,KAAK0kB,KACd,EASIxE,SAAKpZ,GACP,MAAM6d,EAAW3kB,KAAK0kB,MAItB,GAHA1kB,KAAK0kB,MAAQ5d,EAGT,MAAQA,EAMV,OALK4T,EAASyF,MAAMngB,KAAK+Z,UAAS/Z,KAAK+Z,OAAS,KACpC,OAARjT,IAAc9G,KAAKugB,mBAAoB,GAC3CvgB,KAAKwgB,OAAO,gBACZxgB,KAAKwgB,OAAO,uBACZxgB,KAAKwgB,OAAO,qBAKTxgB,KAAKwkB,kBAAiBxkB,KAAK+Z,OAAS,KAGzC,MAAM6K,GAAW5kB,KAAKqgB,IAAI,gBAG1B,MAAI,iBAAoBvZ,GAClB8d,IAAS5kB,KAAKI,KAAO,QAAQ2F,KAAKe,GAAO,OAAS,aACtD9G,KAAKgB,OAAS+G,OAAO2Y,WAAW5Z,KAK9BiB,OAAO+K,SAAShM,IACd8d,IAAS5kB,KAAKI,KAAO,YACzBJ,KAAKgB,OAAS8F,EAAI9F,SAKhB8F,aAAe6N,GACjBwP,EAASnkB,KAAKqD,IAAKiM,EAAQwO,KAAK,KAAMhX,IAClC6d,GAAY7d,IACdA,EAAImP,KAAK,SAASxS,GAAOzD,KAAK4C,IAAI+c,QAAQlc,KAEtC,MAAQkhB,GAAU3kB,KAAKwgB,OAAO,wBAGhCoE,IAAS5kB,KAAKI,KAAO,UAK3BJ,KAAKwgB,OAAO,uBACZxgB,KAAKI,KAAO,QACd,EASIY,WAAO6jB,GACJ7kB,KAAKqgB,IAAI,sBACZrgB,KAAKwC,IAAI,iBAAkBqiB,EAE/B,EASI7jB,aACF,GAAIhB,KAAKqgB,IAAI,kBACX,OAAO1X,SAAS3I,KAAKsC,IAAI,kBAAmB,KAAO,EAGrD,MAAM,KAAE4d,GAASlgB,KACjB,OAAKkgB,GAAQA,aAAgBvL,OAA7B,EACI,iBAAoBuL,EAAanY,OAAO2Y,WAAWR,GACnDnY,OAAO+K,SAASoN,GAAcA,EAAKlf,OAChC+G,OAAO2Y,WAAW3Q,KAAKC,UAAUkQ,GAC1C,EASIqB,iBACF,OAAOvhB,KAAKqD,IAAI+c,WAClB,EASAiE,KAAKP,GACC9jB,KAAKuhB,YAET8C,EAAKrkB,KAAKqD,IAAKygB,EACjB,EAqBAgB,SAASrN,EAAKsN,GASZ,GAPI,SAAWtN,IAAKA,EAAMzX,KAAK4C,IAAIN,IAAI,aAAeyiB,GAAO,KAC7D/kB,KAAKwC,IAAI,WAAY8hB,EAAU7M,IAG1BiD,EAASoK,SAAS9kB,KAAK+Z,UAAS/Z,KAAK+Z,OAAS,KAG/C/Z,KAAK4C,IAAImf,QAAQ,QAInB,OAHAtK,EAAMM,EAAON,GACbzX,KAAKI,KAAO,gCACZJ,KAAKkgB,KAAO,2BAA2BzI,MAAQA,UAKjDzX,KAAKI,KAAO,4BACZJ,KAAKkgB,KAAO,kBAAkBzI,IAChC,EASAuN,WAAWvf,EAAUC,GACfD,IAAUzF,KAAKI,KAAOgkB,EAAQ3e,IAClCzF,KAAKwC,IAAI,sBAAuByhB,EAAmBxe,EAAUC,GAC/D,EAkBItF,SAAKA,IACPA,EAAO8jB,EAAQ9jB,IAEbJ,KAAKwC,IAAI,eAAgBpC,GAEzBJ,KAAKwgB,OAAO,eAEhB,EAYItH,iBAAapS,GACX,iBAAoBA,IAAKA,EAAM,IAAIuD,KAAKvD,IAC5C9G,KAAKwC,IAAI,gBAAiBsE,EAAIiF,cAChC,EASImN,mBACF,MAAMf,EAAOnY,KAAKsC,IAAI,iBACtB,GAAI6V,EAAM,OAAO,IAAI9N,KAAK8N,EAC5B,EAcIQ,SAAK7R,GACF,WAAWf,KAAKe,KAAMA,EAAM,IAAIA,MACrC9G,KAAKwC,IAAI,OAAQsE,EACnB,EASI6R,WACF,OAAO3Y,KAAKsC,IAAI,OAClB,EAUIlC,WACF,MAAMA,EAAOJ,KAAKsC,IAAI,gBACtB,OAAKlC,EACEA,EAAKyR,MAAM,IAAK,GAAG,GADR,EAEpB,EAYAgS,GAAGzjB,KAASO,GACV,OAAOshB,EAAOjiB,KAAKI,KAAMA,KAASO,EACpC,EAkBA2B,IAAIwhB,GACF,OAAO9jB,KAAKoJ,OAAO0a,EAAMnd,gBAAkB,EAC7C,EAmBA0Z,IAAIyD,GACF,MAAqC,mBAAvB9jB,KAAKqD,IAAI4hB,UACnBjlB,KAAKqD,IAAI4hB,UAAUnB,GAEnBA,EAAMnd,gBAAiB3G,KAAKC,OAClC,EAiBAuC,IAAIshB,EAAOhd,GACT,IAAI9G,KAAKuhB,WAET,GAAI,IAAMxgB,UAAUC,OACdH,MAAMC,QAAQgG,GAAMA,EAAMA,EAAIzF,KAAIyO,GAAkB,iBAANA,EAAiBA,EAAI7L,OAAO6L,KACtD,iBAARhJ,IAAkBA,EAAM7C,OAAO6C,IAC/C9G,KAAKqD,IAAIuI,UAAUkY,EAAOhd,QAE1B,IAAK,MAAM7B,KAAO6e,EAChB9jB,KAAKwC,IAAIyC,EAAK6e,EAAM7e,GAG1B,EAkBAigB,OAAOpB,EAAOhd,GACZ,MAAM6J,EAAO3Q,KAAKsC,IAAIwhB,GAQtB,OANInT,IACF7J,EAAMjG,MAAMC,QAAQ6P,GAChBA,EAAKwU,OAAOre,GACZ,CAAC6J,GAAMwU,OAAOre,IAGb9G,KAAKwC,IAAIshB,EAAOhd,EACzB,EASA0Z,OAAOsD,GACD9jB,KAAKuhB,YAETvhB,KAAKqD,IAAIqe,aAAaoC,EACxB,EAWI/H,eAMF,GAAI/b,KAAKqD,IAAI+hB,eAAiBplB,KAAKqD,IAAIgiB,SAAU,OAAO,EAExD,MAAM/D,EAASthB,KAAKqD,IAAIie,OAGxB,OAAKA,GACEA,EAAOvF,QAChB,EASAiD,UACE,IAAKhf,KAAKqD,IAAK,OACf,MAAMiiB,EAAItlB,KAAKyf,SAEf,OADA6F,EAAEpF,KAAOlgB,KAAKkgB,KACPoF,CACT,EASA7F,SACE,OAAOhB,EAAKze,KAAM,CAChB,SACA,UACA,UAEJ,EAMAulB,eACEvlB,KAAKqD,IAAIkiB,cACX,GAWE/G,EAAKQ,QAAQC,SACfze,EAAOC,QAAQ+d,EAAKQ,QAAQC,QAAUze,EAAOC,QAAQue,gCC3hBvD,SAASzS,EAAc3H,EAAI4H,GACzB,GAAkB,mBAAP5H,EACT,MAAM,IAAIZ,UAAU,kCAGtB,OAAOY,CACT,CASA,SAAS6H,EAAcvI,EAAKwI,EAAMF,GAChC,IAAKtI,GAAuB,iBAARA,GAAmC,mBAARA,EAC7C,MAAM,IAAIF,UAAU,+BAGtB,IAAI2I,EAAajI,OAAOkI,yBAAyB1I,EAAKwI,GAEtD,IAAKC,EACH,MAAM,IAAI3I,UAAU,sCAGtB,IAAK2I,EAAWV,aACd,MAAM,IAAIjI,UAAU,gCAExB,CA/DAxD,EAAOC,QAMP,SAAeoM,GACb,IAAKA,EACH,MAAM,IAAI7I,UAAU,kCAGtB,SAASwF,EAAWgD,GAEpB,CAWA,OATAhD,EAAUsD,WAAQ1H,EAClBoE,EAAUuD,UAAW,EACrBvD,EAAUwD,WAAaH,EACvBrD,EAAUyD,SAAU,EACpBzD,EAAU0D,QAAUxI,OAAOyE,OAAO,MAElCK,EAAU2D,SAAWZ,EACrB/C,EAAU2C,SAAWM,EAEdjD,CACT,gBCTA,IAAIgc,EAAc,yJACdC,EAAa,kCACbC,EAAc,sCAQdC,EAAa,uBAKbC,EAAc,WAkBdC,EAAoB,0CACpBC,EAAiB,yCACjBC,EAAa,yFA6JjB,SAAS9e,EAAQH,GACf,IAAIsB,EAAMnE,OAAO6C,GAGjB,GAAI4e,EAAY3f,KAAKqC,GACnB,OAAOA,EAGT,GAAIA,EAAIpH,OAAS,IAAMykB,EAAW1f,KAAKqC,GACrC,MAAM,IAAIpE,UAAU,2BAGtB,MAAO,IAAMoE,EAAIR,QAAQge,EAAa,QAAU,GAClD,CApKAnlB,EAAQyG,OAWR,SAAgBhD,GACd,IAAKA,GAAsB,iBAARA,EACjB,MAAM,IAAIF,UAAU,4BAGtB,IAAIwC,EAAatC,EAAIsC,WACjBwf,EAAU9hB,EAAI8hB,QACdC,EAAS/hB,EAAI+hB,OACb7lB,EAAO8D,EAAI9D,KAEf,IAAKA,IAAS0lB,EAAe/f,KAAK3F,GAChC,MAAM,IAAI4D,UAAU,gBAGtB,IAAKgiB,IAAYH,EAAkB9f,KAAKigB,GACtC,MAAM,IAAIhiB,UAAU,mBAItB,IAAI0C,EAAStG,EAAO,IAAM4lB,EAG1B,GAAIC,EAAQ,CACV,IAAKH,EAAe/f,KAAKkgB,GACvB,MAAM,IAAIjiB,UAAU,kBAGtB0C,GAAU,IAAMuf,CAClB,CAGA,GAAIzf,GAAoC,iBAAfA,EAIvB,IAHA,IAAII,EACAhB,EAASlB,OAAOK,KAAKyB,GAAYK,OAE5B5F,EAAI,EAAGA,EAAI2E,EAAO5E,OAAQC,IAAK,CAGtC,GAFA2F,EAAQhB,EAAO3E,IAEVykB,EAAY3f,KAAKa,GACpB,MAAM,IAAI5C,UAAU,0BAGtB0C,GAAU,KAAOE,EAAQ,IAAMK,EAAQT,EAAWI,GACpD,CAGF,OAAOF,CACT,EAzDAjG,EAAQ2G,MAmER,SAAeV,GACb,IAAKA,EACH,MAAM,IAAI1C,UAAU,+BAQtB,GAJsB,iBAAX0C,IACTA,EAwDJ,SAAwBxC,GACtB,MAA6B,mBAAlBA,EAAImF,UAENnF,EAAImF,UAAU,gBAGI,iBAAhBnF,EAAIjE,QAENiE,EAAIjE,SAAWiE,EAAIjE,QAAQ,qBAFpC,CAIF,CAlEaqJ,CAAe5C,IAGJ,iBAAXA,EACT,MAAM,IAAI1C,UAAU,8CAGtB,IAKIiB,EACAoC,EAGAzD,EATA4D,EAAQd,EAAOrG,QAAQ,KAOvB6D,EAqFN,SAAmBwC,GACjB,IAAIW,EAAQ0e,EAAWxe,KAAKb,EAAOC,eAEnC,IAAKU,EACH,MAAM,IAAIrD,UAAU,sBAGtB,IAEIiiB,EAFA7lB,EAAOiH,EAAM,GACb2e,EAAU3e,EAAM,GAIhBG,EAAQwe,EAAQE,YAAY,KAYhC,OAXe,IAAX1e,IACFye,EAASD,EAAQjf,OAAOS,EAAQ,GAChCwe,EAAUA,EAAQjf,OAAO,EAAGS,IAGpB,CACRpH,KAAMA,EACN4lB,QAASA,EACTC,OAAQA,EAIZ,CA9GYE,EANY,IAAX3e,EACPd,EAAOK,OAAO,EAAGS,GACjBd,GAKAd,EAAS,CAAC,EAKd,IAFA4f,EAAY7d,UAAYH,EAEjBH,EAAQme,EAAYje,KAAKb,IAAS,CACvC,GAAIW,EAAMG,QAAUA,EAClB,MAAM,IAAIxD,UAAU,4BAGtBwD,GAASH,EAAM,GAAGrG,OAClBiE,EAAMoC,EAAM,GAAGV,cAGE,OAFjB/C,EAAQyD,EAAM,IAEJ,KAERzD,EAAQA,EACLmD,OAAO,EAAGnD,EAAM5C,OAAS,GACzB4G,QAAQ+d,EAAY,OAGzB/f,EAAOX,GAAOrB,CAChB,CAEA,IAAe,IAAX4D,GAAgBA,IAAUd,EAAO1F,OACnC,MAAM,IAAIgD,UAAU,4BAKtB,OAFAE,EAAIsC,WAAaZ,EAEV1B,CACT,kBCpLA1D,EAAOC,QAAU,EAAjB,kCCGA,IA2IuB2lB,EAAYzlB,EAE7B0lB,EA7IFC,EAAK,EAAQ,MACblC,EAAU,gBAOVmC,EAAsB,0BACtBC,EAAmB,WAyBvB,SAAS7kB,EAASvB,GAChB,IAAKA,GAAwB,iBAATA,EAClB,OAAO,EAIT,IAAIiH,EAAQkf,EAAoBhf,KAAKnH,GACjCP,EAAOwH,GAASif,EAAGjf,EAAM,GAAGV,eAEhC,OAAI9G,GAAQA,EAAK8B,QACR9B,EAAK8B,WAIV0F,IAASmf,EAAiBzgB,KAAKsB,EAAM,MAChC,OAIX,CArCA5G,EAAQkB,QAAUA,EAClBlB,EAAQmB,SAAW,CAAEtB,OAAQqB,GAC7BlB,EAAQ8B,YA4CR,SAAsB6F,GAEpB,IAAKA,GAAsB,iBAARA,EACjB,OAAO,EAGT,IAAIvI,GAA6B,IAAtBuI,EAAI/H,QAAQ,KACnBI,EAAQH,OAAO8H,GACfA,EAEJ,IAAKvI,EACH,OAAO,EAIT,IAAiC,IAA7BA,EAAKQ,QAAQ,WAAmB,CAClC,IAAIsB,EAAUlB,EAAQkB,QAAQ9B,GAC1B8B,IAAS9B,GAAQ,aAAe8B,EAAQgF,cAC9C,CAEA,OAAO9G,CACT,EAhEAY,EAAQgmB,UAyER,SAAoBrmB,GAClB,IAAKA,GAAwB,iBAATA,EAClB,OAAO,EAIT,IAAIiH,EAAQkf,EAAoBhf,KAAKnH,GAGjCsmB,EAAOrf,GAAS5G,EAAQ2lB,WAAW/e,EAAM,GAAGV,eAEhD,SAAK+f,IAASA,EAAK1lB,SAIZ0lB,EAAK,EACd,EAxFAjmB,EAAQ2lB,WAAa1hB,OAAOyE,OAAO,MACnC1I,EAAQH,OAgGR,SAAiBiK,GACf,IAAKA,GAAwB,iBAATA,EAClB,OAAO,EAIT,IAAIkc,EAAYrC,EAAQ,KAAO7Z,GAC5B5D,cACAI,OAAO,GAEV,OAAK0f,GAIEhmB,EAAQE,MAAM8lB,KAHZ,CAIX,EA9GAhmB,EAAQE,MAAQ+D,OAAOyE,OAAO,MAqHPid,EAlHV3lB,EAAQ2lB,WAkHczlB,EAlHFF,EAAQE,MAoHnC0lB,EAAa,CAAC,QAAS,cAAUjhB,EAAW,QAEhDV,OAAOK,KAAKuhB,GAAIvU,SAAQ,SAA0B3R,GAChD,IAAIP,EAAOymB,EAAGlmB,GACVsmB,EAAO7mB,EAAKumB,WAEhB,GAAKM,GAASA,EAAK1lB,OAAnB,CAKAolB,EAAWhmB,GAAQsmB,EAGnB,IAAK,IAAIzlB,EAAI,EAAGA,EAAIylB,EAAK1lB,OAAQC,IAAK,CACpC,IAAIwlB,EAAYC,EAAKzlB,GAErB,GAAIN,EAAM8lB,GAAY,CACpB,IAAIle,EAAO8d,EAAWhmB,QAAQimB,EAAG3lB,EAAM8lB,IAAYE,QAC/CC,EAAKP,EAAWhmB,QAAQR,EAAK8mB,QAEjC,GAAyB,6BAArBhmB,EAAM8lB,KACPle,EAAOqe,GAAOre,IAASqe,GAAyC,iBAAnCjmB,EAAM8lB,GAAW1f,OAAO,EAAG,KAEzD,QAEJ,CAGApG,EAAM8lB,GAAarmB,CACrB,CAtBA,CAuBF,cCtLF,IAAI0iB,EAAI,IACJ+D,EAAQ,GAAJ/D,EACJgE,EAAQ,GAAJD,EACJE,EAAQ,GAAJD,EAuJR,SAASE,EAAOtW,EAAIuW,EAAOpC,EAAGzgB,GAC5B,IAAI8iB,EAAWD,GAAa,IAAJpC,EACxB,OAAO5S,KAAKkV,MAAMzW,EAAKmU,GAAK,IAAMzgB,GAAQ8iB,EAAW,IAAM,GAC7D,CAxIA1mB,EAAOC,QAAU,SAASqG,EAAKpB,GAC7BA,EAAUA,GAAW,CAAC,EACtB,IA8GegL,EACXuW,EA/GA7mB,SAAc0G,EAClB,GAAa,WAAT1G,GAAqB0G,EAAI9F,OAAS,EACpC,OAkBJ,SAAeoH,GAEb,MADAA,EAAMnE,OAAOmE,IACLpH,OAAS,KAAjB,CAGA,IAAIqG,EAAQ,mIAAmIE,KAC7Ia,GAEF,GAAKf,EAAL,CAGA,IAAIwd,EAAIuC,WAAW/f,EAAM,IAEzB,QADYA,EAAM,IAAM,MAAMV,eAE5B,IAAK,QACL,IAAK,OACL,IAAK,MACL,IAAK,KACL,IAAK,IACH,OAzDEogB,SAyDKlC,EACT,IAAK,QACL,IAAK,OACL,IAAK,IACH,OA9DEkC,OA8DKlC,EACT,IAAK,OACL,IAAK,MACL,IAAK,IACH,OAAOA,EAAIkC,EACb,IAAK,QACL,IAAK,OACL,IAAK,MACL,IAAK,KACL,IAAK,IACH,OAAOlC,EAAIiC,EACb,IAAK,UACL,IAAK,SACL,IAAK,OACL,IAAK,MACL,IAAK,IACH,OAAOjC,EAAIgC,EACb,IAAK,UACL,IAAK,SACL,IAAK,OACL,IAAK,MACL,IAAK,IACH,OAAOhC,EAAI/B,EACb,IAAK,eACL,IAAK,cACL,IAAK,QACL,IAAK,OACL,IAAK,KACH,OAAO+B,EACT,QACE,OA3CJ,CANA,CAmDF,CAzEWzd,CAAMN,GACR,GAAa,WAAT1G,GAAqBinB,SAASvgB,GACvC,OAAOpB,EAAQ4hB,MA0GF5W,EA1GiB5J,GA2G5BmgB,EAAQhV,KAAKC,IAAIxB,KACRqW,EACJC,EAAOtW,EAAIuW,EAAOF,EAAG,OAE1BE,GAASH,EACJE,EAAOtW,EAAIuW,EAAOH,EAAG,QAE1BG,GAASJ,EACJG,EAAOtW,EAAIuW,EAAOJ,EAAG,UAE1BI,GAASnE,EACJkE,EAAOtW,EAAIuW,EAAOnE,EAAG,UAEvBpS,EAAK,OAvCd,SAAkBA,GAChB,IAAIuW,EAAQhV,KAAKC,IAAIxB,GACrB,OAAIuW,GAASF,EACJ9U,KAAKkV,MAAMzW,EAAKqW,GAAK,IAE1BE,GAASH,EACJ7U,KAAKkV,MAAMzW,EAAKoW,GAAK,IAE1BG,GAASJ,EACJ5U,KAAKkV,MAAMzW,EAAKmW,GAAK,IAE1BI,GAASnE,EACJ7Q,KAAKkV,MAAMzW,EAAKoS,GAAK,IAEvBpS,EAAK,IACd,CAhGyC6W,CAASzgB,GAEhD,MAAM,IAAIuE,MACR,wDACE0E,KAAKC,UAAUlJ,GAErB,8BC3BA,IAAI0gB,EAAoB,EAAQ,MAC5BC,EAAqB,EAAQ,MAC7BC,EAAqB,EAAQ,MAC7BC,EAAsB,EAAQ,MAgBlC,SAAS/nB,EAAWmK,GAClB,KAAM/J,gBAAgBJ,GACpB,OAAO,IAAIA,EAAWmK,GAGxB/J,KAAK+J,QAAUA,CACjB,CAfAvJ,EAAOC,QAAUb,EACjBY,EAAOC,QAAQb,WAAaA,EAgB5BA,EAAWc,UAAUiB,QAAU,SAAiBimB,GAC9C,IAAIplB,EAAMxC,KAAK4B,SAASgmB,GACxB,OAAOplB,GAAOA,EAAI,EACpB,EAEA5C,EAAWc,UAAUkB,SAAW,SAAkBgmB,GAChD,OAAOJ,EAAkBxnB,KAAK+J,QAAQ9J,QAAQ,kBAAmB2nB,EACnE,EAEAhoB,EAAWc,UAAUc,SAAW,SAAkBomB,GAChD,IAAIplB,EAAMxC,KAAKyB,UAAUmmB,GACzB,OAAOplB,GAAOA,EAAI,EACpB,EAEA5C,EAAWc,UAAUe,UAAY,SAAmBmmB,GAClD,OAAOH,EAAmBznB,KAAK+J,QAAQ9J,QAAQ,mBAAoB2nB,EACrE,EAEAhoB,EAAWc,UAAUsB,SAAW,SAAkB4lB,GAChD,IAAIplB,EAAMxC,KAAKiC,UAAU2lB,GACzB,OAAOplB,GAAOA,EAAI,EACpB,EAEA5C,EAAWc,UAAUuB,UAAY,SAAmB2lB,GAClD,OAAOF,EAAmB1nB,KAAK+J,QAAQ9J,QAAQ,mBAAoB2nB,EACrE,EAEAhoB,EAAWc,UAAUmnB,UAAY,SAAmBD,GAClD,IAAIplB,EAAMxC,KAAKkB,WAAW0mB,GAC1B,OAAOplB,GAAOA,EAAI,EACpB,EAEA5C,EAAWc,UAAUQ,WAAa,SAAoB0mB,GACpD,OAAOD,EAAoB3nB,KAAK+J,QAAQ9J,QAAQkB,OAAQymB,EAC1D,EAGAhoB,EAAWc,UAAUonB,iBAAmBloB,EAAWc,UAAUiB,QAC7D/B,EAAWc,UAAU8mB,kBAAoB5nB,EAAWc,UAAUkB,SAC9DhC,EAAWc,UAAUqnB,kBAAoBnoB,EAAWc,UAAUc,SAC9D5B,EAAWc,UAAU+mB,mBAAqB7nB,EAAWc,UAAUe,UAC/D7B,EAAWc,UAAUsnB,kBAAoBpoB,EAAWc,UAAUsB,SAC9DpC,EAAWc,UAAUgnB,mBAAqB9nB,EAAWc,UAAUuB,UAC/DrC,EAAWc,UAAUunB,mBAAqBroB,EAAWc,UAAUmnB,UAC/DjoB,EAAWc,UAAUinB,oBAAsB/nB,EAAWc,UAAUQ,kCClEhEV,EAAOC,QAAU+mB,EACjBhnB,EAAOC,QAAQ+mB,kBAAoBA,EAOnC,IAAIU,EAAsB,8BA6B1B,SAASC,EAAa/f,EAAKnH,GACzB,IAAIoG,EAAQ6gB,EAAoB3gB,KAAKa,GACrC,IAAKf,EAAO,OAAO,KAEnB,IAAI1F,EAAU0F,EAAM,GAChB+gB,EAAI,EACR,GAAI/gB,EAAM,GAER,IADA,IAAIzB,EAASyB,EAAM,GAAGwK,MAAM,KACnBhC,EAAI,EAAGA,EAAIjK,EAAO5E,OAAQ6O,IAAK,CACtC,IAAIwY,EAAIziB,EAAOiK,GAAGtG,OAAOsI,MAAM,KAC/B,GAAa,MAATwW,EAAE,GAAY,CAChBD,EAAIhB,WAAWiB,EAAE,IACjB,KACF,CACF,CAGF,MAAO,CACL1mB,QAASA,EACTymB,EAAGA,EACHnnB,EAEJ,CA0BA,SAASqnB,EAAQ3mB,EAAS4mB,EAAM/gB,GAC9B,IAAIsb,EAAI,EACR,GAAGyF,EAAK5mB,QAAQgF,gBAAkBhF,EAAQgF,cACxCmc,GAAK,OACA,GAAqB,MAAjByF,EAAK5mB,QACd,OAAO,KAGT,MAAO,CACLV,EACAqkB,EAAGiD,EAAKtnB,EACRmnB,EAAGG,EAAKH,EACRtF,EAAGA,EAEP,CAOA,SAAS0E,EAAkBrmB,EAAQqnB,GAEjC,IAAIzG,EA7FN,SAA4B5gB,GAG1B,IAFA,IAAI4gB,EAAU5gB,EAAO0Q,MAAM,KAElB5Q,EAAI,EAAG4O,EAAI,EAAG5O,EAAI8gB,EAAQ/gB,OAAQC,IAAK,CAC9C,IAAIU,EAAUwmB,EAAapG,EAAQ9gB,GAAGsI,OAAQtI,GAE1CU,IACFogB,EAAQlS,KAAOlO,EAEnB,CAKA,OAFAogB,EAAQ/gB,OAAS6O,EAEVkS,CACT,CA8EgB0G,MAA8BrjB,IAAXjE,EAAuB,IAAMA,GAAU,IAExE,IAAKqnB,EAEH,OAAOzG,EACJxgB,OAAOmnB,GACP7hB,KAAK8hB,GACLtnB,IAAIunB,GAGT,IAAIC,EAAaL,EAASnnB,KAAI,SAAqBjB,EAAMoH,GACvD,OArDJ,SAA4B7F,EAASmnB,EAAUthB,GAG7C,IAFA,IAAIuhB,EAAW,CAACzD,GAAI,EAAG8C,EAAG,EAAGtF,EAAG,GAEvB7hB,EAAI,EAAGA,EAAI6nB,EAAS9nB,OAAQC,IAAK,CACxC,IAAIsnB,EAAOD,EAAQ3mB,EAASmnB,EAAS7nB,GAAIuG,GAErC+gB,IAASQ,EAASjG,EAAIyF,EAAKzF,GAAKiG,EAASX,EAAIG,EAAKH,GAAKW,EAASzD,EAAIiD,EAAKjD,GAAK,IAChFyD,EAAWR,EAEf,CAEA,OAAOQ,CACT,CAyCWC,CAAmB5oB,EAAM2hB,EAASva,EAC3C,IAGA,OAAOqhB,EAAWtnB,OAAOmnB,GAAW7hB,KAAK8hB,GAActnB,KAAI,SAAoB0nB,GAC7E,OAAOP,EAASK,EAAWxoB,QAAQ0oB,GACrC,GACF,CAOA,SAASJ,EAAahW,EAAGC,GACvB,OAAQA,EAAEwV,EAAIzV,EAAEyV,GAAOxV,EAAEkQ,EAAInQ,EAAEmQ,GAAOnQ,EAAE2S,EAAI1S,EAAE0S,GAAO3S,EAAE1R,EAAI2R,EAAE3R,GAAM,CACrE,CAOA,SAAS2nB,EAAeL,GACtB,OAAOA,EAAK5mB,OACd,CAOA,SAAS+mB,EAAUH,GACjB,OAAOA,EAAKH,EAAI,CAClB,yBCzJA5nB,EAAOC,QAAUgnB,EACjBjnB,EAAOC,QAAQgnB,mBAAqBA,EAOpC,IAAIwB,EAAuB,8BA6C3B,SAASC,EAAc9gB,EAAKnH,GAC1B,IAAIoG,EAAQ4hB,EAAqB1hB,KAAKa,GACtC,IAAKf,EAAO,OAAO,KAEnB,IAAI7F,EAAW6F,EAAM,GACjB+gB,EAAI,EACR,GAAI/gB,EAAM,GAER,IADA,IAAIzB,EAASyB,EAAM,GAAGwK,MAAM,KACnBhC,EAAI,EAAGA,EAAIjK,EAAO5E,OAAQ6O,IAAK,CACtC,IAAIwY,EAAIziB,EAAOiK,GAAGtG,OAAOsI,MAAM,KAC/B,GAAa,MAATwW,EAAE,GAAY,CAChBD,EAAIhB,WAAWiB,EAAE,IACjB,KACF,CACF,CAGF,MAAO,CACL7mB,SAAUA,EACV4mB,EAAGA,EACHnnB,EAEJ,CA0BA,SAASqnB,EAAQ9mB,EAAU+mB,EAAM/gB,GAC/B,IAAIsb,EAAI,EACR,GAAGyF,EAAK/mB,SAASmF,gBAAkBnF,EAASmF,cAC1Cmc,GAAK,OACA,GAAsB,MAAlByF,EAAK/mB,SACd,OAAO,KAGT,MAAO,CACLP,EACAqkB,EAAGiD,EAAKtnB,EACRmnB,EAAGG,EAAKH,EACRtF,EAAGA,EAEP,CAOA,SAAS2E,EAAmBtmB,EAAQqnB,GAClC,IAAIzG,EA5GN,SAA6B5gB,GAK3B,IAJA,IAAI4gB,EAAU5gB,EAAO0Q,MAAM,KACvBsX,GAAc,EACdC,EAAa,EAERnoB,EAAI,EAAG4O,EAAI,EAAG5O,EAAI8gB,EAAQ/gB,OAAQC,IAAK,CAC9C,IAAIO,EAAW0nB,EAAcnH,EAAQ9gB,GAAGsI,OAAQtI,GAE5CO,IACFugB,EAAQlS,KAAOrO,EACf2nB,EAAcA,GAAeb,EAAQ,WAAY9mB,GACjD4nB,EAAanX,KAAKoX,IAAID,EAAY5nB,EAAS4mB,GAAK,GAEpD,CAiBA,OAfKe,IAKHpH,EAAQlS,KAAO,CACbrO,SAAU,WACV4mB,EAAGgB,EACHnoB,EAAGA,IAKP8gB,EAAQ/gB,OAAS6O,EAEVkS,CACT,CA6EgBuH,CAAoBnoB,GAAU,IAE5C,IAAKqnB,EAEH,OAAOzG,EACJxgB,OAAOmnB,GACP7hB,KAAK8hB,GACLtnB,IAAIkoB,GAGT,IAAIV,EAAaL,EAASnnB,KAAI,SAAqBjB,EAAMoH,GACvD,OApDJ,SAA6BhG,EAAUsnB,EAAUthB,GAG/C,IAFA,IAAIuhB,EAAW,CAACzD,GAAI,EAAG8C,EAAG,EAAGtF,EAAG,GAEvB7hB,EAAI,EAAGA,EAAI6nB,EAAS9nB,OAAQC,IAAK,CACxC,IAAIsnB,EAAOD,EAAQ9mB,EAAUsnB,EAAS7nB,GAAIuG,GAEtC+gB,IAASQ,EAASjG,EAAIyF,EAAKzF,GAAKiG,EAASX,EAAIG,EAAKH,GAAKW,EAASzD,EAAIiD,EAAKjD,GAAK,IAChFyD,EAAWR,EAEf,CAEA,OAAOQ,CACT,CAwCWS,CAAoBppB,EAAM2hB,EAASva,EAC5C,IAGA,OAAOqhB,EAAWtnB,OAAOmnB,GAAW7hB,KAAK8hB,GAActnB,KAAI,SAAqB0nB,GAC9E,OAAOP,EAASK,EAAWxoB,QAAQ0oB,GACrC,GACF,CAOA,SAASJ,EAAahW,EAAGC,GACvB,OAAQA,EAAEwV,EAAIzV,EAAEyV,GAAOxV,EAAEkQ,EAAInQ,EAAEmQ,GAAOnQ,EAAE2S,EAAI1S,EAAE0S,GAAO3S,EAAE1R,EAAI2R,EAAE3R,GAAM,CACrE,CAOA,SAASsoB,EAAgBhB,GACvB,OAAOA,EAAK/mB,QACd,CAOA,SAASknB,EAAUH,GACjB,OAAOA,EAAKH,EAAI,CAClB,yBCxKA5nB,EAAOC,QAAUinB,EACjBlnB,EAAOC,QAAQinB,mBAAqBA,EAOpC,IAAI+B,EAAuB,+CA6B3B,SAASC,EAActhB,EAAKnH,GAC1B,IAAIoG,EAAQoiB,EAAqBliB,KAAKa,GACtC,IAAKf,EAAO,OAAO,KAEnB,IAAIsiB,EAAStiB,EAAM,GACf4e,EAAS5e,EAAM,GACfuiB,EAAOD,EAEP1D,IAAQ2D,GAAQ,IAAM3D,GAE1B,IAAImC,EAAI,EACR,GAAI/gB,EAAM,GAER,IADA,IAAIzB,EAASyB,EAAM,GAAGwK,MAAM,KACnBhC,EAAI,EAAGA,EAAIjK,EAAO5E,OAAQ6O,IAAK,CACtC,IAAIwY,EAAIziB,EAAOiK,GAAGgC,MAAM,KACX,MAATwW,EAAE,KAAYD,EAAIhB,WAAWiB,EAAE,IACrC,CAGF,MAAO,CACLsB,OAAQA,EACR1D,OAAQA,EACRmC,EAAGA,EACHnnB,EACA2oB,KAAMA,EAEV,CA0BA,SAAStB,EAAQtmB,EAAUumB,EAAM/gB,GAC/B,IAAI6gB,EAAIqB,EAAc1nB,GACtB,IAAKqmB,EAAG,OAAO,KACf,IAAIvF,EAAI,EACR,GAAGyF,EAAKqB,KAAKjjB,gBAAkB0hB,EAAEuB,KAAKjjB,cACpCmc,GAAK,OACA,GAAIyF,EAAKoB,OAAOhjB,gBAAkB0hB,EAAEuB,KAAKjjB,cAC9Cmc,GAAK,OACA,GAAIyF,EAAKqB,KAAKjjB,gBAAkB0hB,EAAEsB,OAAOhjB,cAC9Cmc,GAAK,OACA,GAAkB,MAAdyF,EAAKqB,KACd,OAAO,KAGT,MAAO,CACL3oB,EAAGuG,EACH8d,EAAGiD,EAAKtnB,EACRmnB,EAAGG,EAAKH,EACRtF,EAAGA,EAEP,CAOA,SAAS4E,EAAmBvmB,EAAQqnB,GAElC,IAAIzG,EAvGN,SAA6B5gB,GAG3B,IAFA,IAAI4gB,EAAU5gB,EAAO0Q,MAAM,KAElB5Q,EAAI,EAAG4O,EAAI,EAAG5O,EAAI8gB,EAAQ/gB,OAAQC,IAAK,CAC9C,IAAIe,EAAW0nB,EAAc3H,EAAQ9gB,GAAGsI,OAAQtI,GAE5Ce,IACF+f,EAAQlS,KAAO7N,EAEnB,CAKA,OAFA+f,EAAQ/gB,OAAS6O,EAEVkS,CACT,CAwFgB8H,MAA+BzkB,IAAXjE,EAAuB,IAAMA,GAAU,IAEzE,IAAKqnB,EAEH,OAAOzG,EACJxgB,OAAOmnB,GACP7hB,KAAK8hB,GACLtnB,IAAIyoB,GAGT,IAAIjB,EAAaL,EAASnnB,KAAI,SAAqBjB,EAAMoH,GACvD,OA3DJ,SAA6BxF,EAAU8mB,EAAUthB,GAG/C,IAFA,IAAIuhB,EAAW,CAACzD,GAAI,EAAG8C,EAAG,EAAGtF,EAAG,GAEvB7hB,EAAI,EAAGA,EAAI6nB,EAAS9nB,OAAQC,IAAK,CACxC,IAAIsnB,EAAOD,EAAQtmB,EAAU8mB,EAAS7nB,GAAIuG,GAEtC+gB,IAASQ,EAASjG,EAAIyF,EAAKzF,GAAKiG,EAASX,EAAIG,EAAKH,GAAKW,EAASzD,EAAIiD,EAAKjD,GAAK,IAChFyD,EAAWR,EAEf,CAEA,OAAOQ,CACT,CA+CWgB,CAAoB3pB,EAAM2hB,EAASva,EAC5C,IAGA,OAAOqhB,EAAWtnB,OAAOmnB,GAAW7hB,KAAK8hB,GAActnB,KAAI,SAAqB0nB,GAC9E,OAAOP,EAASK,EAAWxoB,QAAQ0oB,GACrC,GACF,CAOA,SAASJ,EAAahW,EAAGC,GACvB,OAAQA,EAAEwV,EAAIzV,EAAEyV,GAAOxV,EAAEkQ,EAAInQ,EAAEmQ,GAAOnQ,EAAE2S,EAAI1S,EAAE0S,GAAO3S,EAAE1R,EAAI2R,EAAE3R,GAAM,CACrE,CAOA,SAAS6oB,EAAgBvB,GACvB,OAAOA,EAAKqB,IACd,CAOA,SAASlB,EAAUH,GACjB,OAAOA,EAAKH,EAAI,CAClB,yBCnKA5nB,EAAOC,QAAUknB,EACjBnnB,EAAOC,QAAQknB,oBAAsBA,EAOrC,IAAIqC,EAAwB,2CA6B5B,SAASC,EAAe7hB,EAAKnH,GAC3B,IAAIoG,EAAQ2iB,EAAsBziB,KAAKa,GACvC,IAAKf,EAAO,OAAO,KAEnB,IAAIzB,EAASlB,OAAOyE,OAAO,MACvBif,EAAI,EACJpC,EAAU3e,EAAM,GAChBjH,EAAOiH,EAAM,GAEjB,GAAIA,EAAM,GAGR,IAFA,IAAI6iB,EAoNR,SAAyB9hB,GAGvB,IAFA,IAAI5B,EAAa4B,EAAIyJ,MAAM,KAElB5Q,EAAI,EAAG4O,EAAI,EAAG5O,EAAIuF,EAAWxF,OAAQC,IACxCkpB,EAAW3jB,EAAWqJ,IAAM,GAAK,EACnCrJ,IAAaqJ,GAAKrJ,EAAWvF,GAE7BuF,EAAWqJ,IAAM,IAAMrJ,EAAWvF,GAOtC,IAFAuF,EAAWxF,OAAS6O,EAAI,EAEf5O,EAAI,EAAGA,EAAIuF,EAAWxF,OAAQC,IACrCuF,EAAWvF,GAAKuF,EAAWvF,GAAGsI,OAGhC,OAAO/C,CACT,CAvOe4jB,CAAgB/iB,EAAM,IAAIhG,IAAIgpB,GAEhCxa,EAAI,EAAGA,EAAIqa,EAAKlpB,OAAQ6O,IAAK,CACpC,IAAIya,EAAOJ,EAAKra,GACZ5K,EAAMqlB,EAAK,GAAG3jB,cACdG,EAAMwjB,EAAK,GAGX1mB,EAAQkD,GAAkB,MAAXA,EAAI,IAAsC,MAAxBA,EAAIA,EAAI9F,OAAS,GAClD8F,EAAIC,OAAO,EAAGD,EAAI9F,OAAS,GAC3B8F,EAEJ,GAAY,MAAR7B,EAAa,CACfmjB,EAAIhB,WAAWxjB,GACf,KACF,CAGAgC,EAAOX,GAAOrB,CAChB,CAGF,MAAO,CACLxD,KAAMA,EACN4lB,QAASA,EACTpgB,OAAQA,EACRwiB,EAAGA,EACHnnB,EAEJ,CA0BA,SAASqnB,EAAQloB,EAAMmoB,EAAM/gB,GAC3B,IAAI6gB,EAAI4B,EAAe7pB,GACnB0iB,EAAI,EAER,IAAKuF,EACH,OAAO,KAGT,GAAGE,EAAKnoB,KAAKuG,eAAiB0hB,EAAEjoB,KAAKuG,cACnCmc,GAAK,OACA,GAAgB,KAAbyF,EAAKnoB,KACb,OAAO,KAGT,GAAGmoB,EAAKvC,QAAQrf,eAAiB0hB,EAAErC,QAAQrf,cACzCmc,GAAK,OACA,GAAmB,KAAhByF,EAAKvC,QACb,OAAO,KAGT,IAAIjhB,EAAOL,OAAOK,KAAKwjB,EAAK3iB,QAC5B,GAAIb,EAAK/D,OAAS,EAAG,CACnB,IAAI+D,EAAKwlB,OAAM,SAAUC,GACvB,MAAyB,KAAlBjC,EAAK3iB,OAAO4kB,KAAcjC,EAAK3iB,OAAO4kB,IAAM,IAAI7jB,gBAAkB0hB,EAAEziB,OAAO4kB,IAAM,IAAI7jB,aAC9F,IAGE,OAAO,KAFPmc,GAAK,CAIT,CAEA,MAAO,CACL7hB,EAAGuG,EACH8d,EAAGiD,EAAKtnB,EACRmnB,EAAGG,EAAKH,EACRtF,EAAGA,EAEP,CAOA,SAAS6E,EAAoBxmB,EAAQqnB,GAEnC,IAAIzG,EArIN,SAAqB5gB,GAGnB,IAFA,IAAI4gB,EA6NN,SAAyB5gB,GAGvB,IAFA,IAAI4gB,EAAU5gB,EAAO0Q,MAAM,KAElB5Q,EAAI,EAAG4O,EAAI,EAAG5O,EAAI8gB,EAAQ/gB,OAAQC,IACrCkpB,EAAWpI,EAAQlS,IAAM,GAAK,EAChCkS,IAAUlS,GAAKkS,EAAQ9gB,GAEvB8gB,EAAQlS,IAAM,IAAMkS,EAAQ9gB,GAOhC,OAFA8gB,EAAQ/gB,OAAS6O,EAAI,EAEdkS,CACT,CA5OgB0I,CAAgBtpB,GAErBF,EAAI,EAAG4O,EAAI,EAAG5O,EAAI8gB,EAAQ/gB,OAAQC,IAAK,CAC9C,IAAI4mB,EAAYoC,EAAelI,EAAQ9gB,GAAGsI,OAAQtI,GAE9C4mB,IACF9F,EAAQlS,KAAOgY,EAEnB,CAKA,OAFA9F,EAAQ/gB,OAAS6O,EAEVkS,CACT,CAsHgB2I,MAAuBtlB,IAAXjE,EAAuB,MAAQA,GAAU,IAEnE,IAAKqnB,EAEH,OAAOzG,EACJxgB,OAAOmnB,GACP7hB,KAAK8hB,GACLtnB,IAAIspB,GAGT,IAAI9B,EAAaL,EAASnnB,KAAI,SAAqBjB,EAAMoH,GACvD,OA5EJ,SAA8BpH,EAAM0oB,EAAUthB,GAG5C,IAFA,IAAIuhB,EAAW,CAACzD,GAAI,EAAG8C,EAAG,EAAGtF,EAAG,GAEvB7hB,EAAI,EAAGA,EAAI6nB,EAAS9nB,OAAQC,IAAK,CACxC,IAAIsnB,EAAOD,EAAQloB,EAAM0oB,EAAS7nB,GAAIuG,GAElC+gB,IAASQ,EAASjG,EAAIyF,EAAKzF,GAAKiG,EAASX,EAAIG,EAAKH,GAAKW,EAASzD,EAAIiD,EAAKjD,GAAK,IAChFyD,EAAWR,EAEf,CAEA,OAAOQ,CACT,CAgEW6B,CAAqBxqB,EAAM2hB,EAASva,EAC7C,IAGA,OAAOqhB,EAAWtnB,OAAOmnB,GAAW7hB,KAAK8hB,GAActnB,KAAI,SAAiB0nB,GAC1E,OAAOP,EAASK,EAAWxoB,QAAQ0oB,GACrC,GACF,CAOA,SAASJ,EAAahW,EAAGC,GACvB,OAAQA,EAAEwV,EAAIzV,EAAEyV,GAAOxV,EAAEkQ,EAAInQ,EAAEmQ,GAAOnQ,EAAE2S,EAAI1S,EAAE0S,GAAO3S,EAAE1R,EAAI2R,EAAE3R,GAAM,CACrE,CAOA,SAAS0pB,EAAYpC,GACnB,OAAOA,EAAKnoB,KAAO,IAAMmoB,EAAKvC,OAChC,CAOA,SAAS0C,EAAUH,GACjB,OAAOA,EAAKH,EAAI,CAClB,CAOA,SAAS+B,EAAWzjB,GAIlB,IAHA,IAAImkB,EAAQ,EACRrjB,EAAQ,GAEqC,KAAzCA,EAAQd,EAAOrG,QAAQ,IAAKmH,KAClCqjB,IACArjB,IAGF,OAAOqjB,CACT,CAOA,SAASR,EAAkBjiB,GACzB,IACInD,EACA6B,EAFAU,EAAQY,EAAI/H,QAAQ,KAWxB,OAPe,IAAXmH,EACFvC,EAAMmD,GAENnD,EAAMmD,EAAIrB,OAAO,EAAGS,GACpBV,EAAMsB,EAAIrB,OAAOS,EAAQ,IAGpB,CAACvC,EAAK6B,EACf,8BCvOAtG,EAAOC,QA+BP,SAAqBuZ,EAAKnD,GACxB,OAAwB,IAApBiU,EAAW9Q,IACb7U,EAAM0R,EAAU,KAAMmD,GACfA,IA4FX,SAAyBA,EAAKnD,GAC5B,IAAIkU,EAAW/Q,EAAIgR,aAGdD,GAAaA,EAASE,QACzBF,EAAW/Q,EAAIgR,aAenB,SAAyBhR,GACvB,SAASnD,EAAUpT,GAEjB,GADIuW,EAAIgR,eAAiBnU,IAAUmD,EAAIgR,aAAe,MACjDnU,EAASoU,MAAd,CAEA,IAAIA,EAAQpU,EAASoU,MACrBpU,EAASoU,MAAQ,KAEjB,IAAK,IAAIhqB,EAAI,EAAGA,EAAIgqB,EAAMjqB,OAAQC,IAChCgqB,EAAMhqB,GAAGwC,EAAKuW,EANK,CAQvB,CAIA,OAFAnD,EAASoU,MAAQ,GAEVpU,CACT,CA/BkCqU,CAAelR,GAvDjD,SAAiCA,EAAK5C,GACpC,IAAI+T,EACAC,EACA/F,GAAW,EAEf,SAASlB,EAAUnW,GACjBmd,EAAM3T,SACN4T,EAAS5T,SAET6N,GAAW,EACXjO,EAASpJ,EACX,CAKA,SAASqd,EAAU/J,GAEjBtH,EAAI1C,eAAe,SAAU+T,GAEzBhG,GACA8F,IAAUC,IAGdA,EAAW9pB,EAAM,CAAC,CAACggB,EAAQ,QAAS,UAAW6C,GACjD,CAXAgH,EAAQC,EAAW9pB,EAAM,CAAC,CAAC0Y,EAAK,MAAO,WAAYmK,GAa/CnK,EAAIsH,OAEN+J,EAASrR,EAAIsH,SAKftH,EAAIvD,GAAG,SAAU4U,QAEEjmB,IAAf4U,EAAIsH,QA6DV,SAA4Bje,EAAK+T,GAC/B,IAAIkU,EAAejoB,EAAIioB,aAEK,mBAAjBA,IAGXjoB,EAAIioB,aAAe,SAAwBhK,GACzCgK,EAAaxoB,KAAK9C,KAAMshB,GACxBlK,EAASkK,EACX,EACF,CArEIiK,CAAkBvR,EAAKqR,GAE3B,CAgBIG,CAAuBxR,EAAK+Q,IAG9BA,EAASE,MAAM5lB,KAAKwR,EACtB,CAlGE4U,CAAezR,GAsKFpV,EAtKYiS,EA0KrB6U,EAAWC,gBACbtoB,EAAM,IAAIqoB,EAAWC,cAAc/mB,EAAGR,MAAQ,uBAI3Cf,GAAQA,EAAIuoB,gBAKVvoB,EAAIuoB,gBAAgB9N,KAAKza,EAAKuB,EAAI,MAJhCA,IA9KFoV,GAoKT,IAAepV,EACTvB,CApKN,EAxCA7C,EAAOC,QAAQqqB,WAAaA,EAO5B,IAAIY,EAsLJ,WACE,IACE,OAAO,EAAQ,IACjB,CAAE,MAAOnoB,GACP,MAAO,CAAC,CACV,CACF,CA5LiBsoB,GACbvqB,EAAQ,EAAQ,MAQhB6D,EAAgC,mBAAjB2mB,aACfA,aACA,SAAUlnB,GAAMwJ,QAAQ2d,SAASnnB,EAAGkZ,KAAK5a,MAAM0B,EAAI7D,WAAY,EAgCnE,SAAS+pB,EAAY9Q,GACnB,IAAIsH,EAAStH,EAAIsH,OAEjB,MAA4B,kBAAjBtH,EAAIqL,SAEN2G,QAAQhS,EAAIqL,UAAa/D,IAAWA,EAAOvF,UAGxB,kBAAjB/B,EAAIiS,SAEND,QAAQhS,EAAIkS,UAAY5K,IAAWA,EAAO6K,UAAanS,EAAIiS,WAAajS,EAAImS,eAFrF,CAOF,YC/EA3rB,EAAOC,QAAU,SAASyD,EAAKa,GAG7B,OAFAb,EAAMA,GAAO,CAAC,EACV,iBAAmBa,IAAMA,EAAOA,EAAK8M,MAAM,OACxC9M,EAAKqnB,QAAO,SAAS9oB,EAAK2B,GAC/B,OAAI,MAAQf,EAAIe,KAChB3B,EAAI2B,GAAOf,EAAIe,IADc3B,CAG/B,GAAG,CAAC,EACN,+BCKA,IAAImU,EAAM,EAAQ,MACdrQ,EAAQqQ,EAAIrQ,MACZilB,EAAM5U,EAAI4U,IAkBd,SAASC,EAAUvsB,GACjB,IAAI0X,EAAM1X,EAAI0X,IAEd,QAAYrS,IAARqS,EAAJ,CAKA,IAAI8U,EAASxsB,EAAIysB,WAEjB,OAAItK,EAAMzK,EAAK8U,GAENA,IAITA,EAASE,EAAUhV,IACZiV,KAAOjV,EAEN1X,EAAIysB,WAAaD,EAbzB,CAcF,CAwCA,SAASE,EAAWrkB,GAClB,GAAmB,iBAARA,GAA0C,KAAtBA,EAAIU,WAAW,GAC5C,OAAO1B,EAAMgB,GAUf,IAPA,IAAIma,EAAWna,EACXoa,EAAQ,KACRG,EAAS,KAKJ1hB,EAAI,EAAGA,EAAImH,EAAIpH,OAAQC,IAC9B,OAAQmH,EAAIU,WAAW7H,IACrB,KAAK,GACY,OAAX0hB,IACFJ,EAAWna,EAAIkJ,UAAU,EAAGrQ,GAC5BuhB,EAAQpa,EAAIkJ,UAAUrQ,EAAI,GAC1B0hB,EAASva,EAAIkJ,UAAUrQ,IAEzB,MACF,KAAK,EACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,IACL,KAAK,MACH,OAAOmG,EAAMgB,GAInB,IAAIqP,OAAcrS,IAARinB,EACN,IAAIA,EACJ,CAAC,EAWL,OATA5U,EAAIlN,KAAOnC,EACXqP,EAAI6K,KAAOla,EACXqP,EAAI8K,SAAWA,EAEA,OAAXI,IACFlL,EAAI+K,MAAQA,EACZ/K,EAAIkL,OAASA,GAGRlL,CACT,CAWA,SAASyK,EAAOzK,EAAKkV,GACnB,MAA4B,iBAAdA,GACE,OAAdA,SACSvnB,IAARinB,GAAqBM,aAAqBN,IAC3CM,EAAUD,OAASjV,CACvB,CAtIAjX,EAAOC,QAAU6rB,EACjB9rB,EAAOC,QAAQkkB,SAwCf,SAAsB5kB,GACpB,IAAI0X,EAAM1X,EAAI+gB,YAEd,GAAmB,iBAARrJ,EAET,OAAO6U,EAASvsB,GAGlB,IAAIwsB,EAASxsB,EAAI6sB,mBAEjB,OAAI1K,EAAMzK,EAAK8U,GAENA,IAITA,EAASE,EAAUhV,IACZiV,KAAOjV,EAEN1X,EAAI6sB,mBAAqBL,EACnC,kBClFA,IAAIM,EAAS,EAAQ,MACjB9kB,EAAS8kB,EAAO9kB,OAGpB,SAAS+kB,EAAWC,EAAKC,GACvB,IAAK,IAAI/nB,KAAO8nB,EACdC,EAAI/nB,GAAO8nB,EAAI9nB,EAEnB,CASA,SAASgoB,EAAY7R,EAAK8R,EAAkBlsB,GAC1C,OAAO+G,EAAOqT,EAAK8R,EAAkBlsB,EACvC,CAVI+G,EAAOQ,MAAQR,EAAOolB,OAASplB,EAAOqlB,aAAerlB,EAAOslB,gBAC9D7sB,EAAOC,QAAUosB,GAGjBC,EAAUD,EAAQpsB,GAClBA,EAAQsH,OAASklB,GAOnBA,EAAWvsB,UAAYgE,OAAOyE,OAAOpB,EAAOrH,WAG5CosB,EAAU/kB,EAAQklB,GAElBA,EAAW1kB,KAAO,SAAU6S,EAAK8R,EAAkBlsB,GACjD,GAAmB,iBAARoa,EACT,MAAM,IAAIpX,UAAU,iCAEtB,OAAO+D,EAAOqT,EAAK8R,EAAkBlsB,EACvC,EAEAisB,EAAWE,MAAQ,SAAUG,EAAMC,EAAM/rB,GACvC,GAAoB,iBAAT8rB,EACT,MAAM,IAAItpB,UAAU,6BAEtB,IAAIwpB,EAAMzlB,EAAOulB,GAUjB,YATaloB,IAATmoB,EACsB,iBAAb/rB,EACTgsB,EAAID,KAAKA,EAAM/rB,GAEfgsB,EAAID,KAAKA,GAGXC,EAAID,KAAK,GAEJC,CACT,EAEAP,EAAWG,YAAc,SAAUE,GACjC,GAAoB,iBAATA,EACT,MAAM,IAAItpB,UAAU,6BAEtB,OAAO+D,EAAOulB,EAChB,EAEAL,EAAWI,gBAAkB,SAAUC,GACrC,GAAoB,iBAATA,EACT,MAAM,IAAItpB,UAAU,6BAEtB,OAAO6oB,EAAOY,WAAWH,EAC3B,yBC9DA9sB,EAAOC,QAAUiE,OAAO+V,iBAAmB,CAAEiT,UAAW,cAAgB7sB,MAExE,SAAqBqD,EAAK0P,GAExB,OADA1P,EAAIwpB,UAAY9Z,EACT1P,CACT,EAEA,SAA0BA,EAAK0P,GAC7B,IAAK,IAAIlH,KAAQkH,EACVlP,OAAOhE,UAAU8S,eAAe1Q,KAAKoB,EAAKwI,KAC7CxI,EAAIwI,GAAQkH,EAAMlH,IAGtB,OAAOxI,CACT,gCCFA,IAAIwX,EAAQ,EAAQ,KA8EpB,SAAS3B,EAAQ4B,GACf,GAAoB,iBAATA,EAAmB,CAC5B,IAAK5B,EAAO4B,GAAO,MAAM,IAAItQ,MAAM,wBAA0BsQ,GAC7D,OAAOA,CACT,CAEA,GAAoB,iBAATA,EACT,MAAM,IAAI3X,UAAU,mCAItB,IAAI6gB,EAAIlc,SAASgT,EAAM,IACvB,IAAKgS,MAAM9I,GAAI,CACb,IAAK9K,EAAO8K,GAAI,MAAM,IAAIxZ,MAAM,wBAA0BwZ,GAC1D,OAAOA,CACT,CAGA,KADAA,EAAI9K,EAAO4B,EAAKhV,gBACR,MAAM,IAAI0E,MAAM,4BAA8BsQ,EAAO,KAC7D,OAAOkJ,CACT,CA3FArkB,EAAOC,QAAUsZ,EAGjBA,EAAO6T,aAAelS,EAGtB3B,EAAO2B,MAgCP,SAA8BhB,EAAUgB,GACtC,IAAIxE,EAAM,GAeV,OAbAxS,OAAOK,KAAK2W,GAAO3J,SAAQ,SAAsB4J,GAC/C,IAAInP,EAAUkP,EAAMC,GAChB5B,EAAStJ,OAAOkL,GAGpBjB,EAASX,GAAUvN,EACnBkO,EAASlO,GAAWuN,EACpBW,EAASlO,EAAQ7F,eAAiBoT,EAGlC7C,EAAI7R,KAAK0U,EACX,IAEO7C,CACT,CAjDe2W,CAAoB9T,EAAQ2B,GAG3C3B,EAAO+K,SAAW,CAChB,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,GAIP/K,EAAOoG,MAAQ,CACb,KAAK,EACL,KAAK,EACL,KAAK,GAIPpG,EAAO+T,MAAQ,CACb,KAAK,EACL,KAAK,EACL,KAAK,0BCtCPttB,EAAOC,QAUP,SAAuB2H,GACrB,OAAOA,EACJyJ,MAAM,KACNxQ,KAAI,SAAU0sB,GACb,OAAOA,EAAMtrB,MAAM,EAAG,GAAGsG,cAAgBglB,EAAMtrB,MAAM,EACvD,IACCkP,KAAK,IACL/J,QAAQ,gBAAiB,GAC9B,qCC9BA,IAAIomB,EAAahuB,MAAQA,KAAKguB,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIprB,WAAU,SAAUC,EAASC,GAC/C,SAASorB,EAAUzqB,GAAS,IAAM0qB,EAAKF,EAAUjrB,KAAKS,GAAS,CAAE,MAAOL,GAAKN,EAAOM,EAAI,CAAE,CAC1F,SAASgrB,EAAS3qB,GAAS,IAAM0qB,EAAKF,EAAiB,MAAExqB,GAAS,CAAE,MAAOL,GAAKN,EAAOM,EAAI,CAAE,CAC7F,SAAS+qB,EAAKE,GAJlB,IAAe5qB,EAIa4qB,EAAO7qB,KAAOX,EAAQwrB,EAAO5qB,QAJ1CA,EAIyD4qB,EAAO5qB,MAJhDA,aAAiBuqB,EAAIvqB,EAAQ,IAAIuqB,GAAE,SAAUnrB,GAAWA,EAAQY,EAAQ,KAIjBG,KAAKsqB,EAAWE,EAAW,CAC7GD,GAAMF,EAAYA,EAAUlrB,MAAM+qB,EAASC,GAAc,KAAK/qB,OAClE,GACJ,EACIsrB,EAAezuB,MAAQA,KAAKyuB,aAAgB,SAAUR,EAAS/N,GAC/D,IAAsGwO,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,EAAI,EAAGK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAE1rB,KAAMgsB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,mBAAXhW,SAA0B0V,EAAE1V,OAAOE,UAAY,WAAa,OAAOrZ,IAAM,GAAI6uB,EACvJ,SAASM,EAAKtK,GAAK,OAAO,SAAU/U,GAAK,OACzC,SAAcsf,GACV,GAAIV,EAAG,MAAM,IAAI1qB,UAAU,mCAC3B,KAAO6qB,IAAMA,EAAI,EAAGO,EAAG,KAAON,EAAI,IAAKA,OACnC,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARQ,EAAG,GAAST,EAAU,OAAIS,EAAG,GAAKT,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAE9rB,KAAK6rB,GAAI,GAAKA,EAAExrB,SAAWyrB,EAAIA,EAAE9rB,KAAK6rB,EAAGS,EAAG,KAAKzrB,KAAM,OAAOirB,EAE3J,OADID,EAAI,EAAGC,IAAGQ,EAAK,CAAS,EAARA,EAAG,GAAQR,EAAEhrB,QACzBwrB,EAAG,IACP,KAAK,EAAG,KAAK,EAAGR,EAAIQ,EAAI,MACxB,KAAK,EAAc,OAAXN,EAAEC,QAAgB,CAAEnrB,MAAOwrB,EAAG,GAAIzrB,MAAM,GAChD,KAAK,EAAGmrB,EAAEC,QAASJ,EAAIS,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKN,EAAEI,IAAIG,MAAOP,EAAEG,KAAKI,MAAO,SACxC,QACI,MAAkBT,GAAZA,EAAIE,EAAEG,MAAYjuB,OAAS,GAAK4tB,EAAEA,EAAE5tB,OAAS,KAAkB,IAAVouB,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEN,EAAI,EAAG,QAAU,CAC3G,GAAc,IAAVM,EAAG,MAAcR,GAAMQ,EAAG,GAAKR,EAAE,IAAMQ,EAAG,GAAKR,EAAE,IAAM,CAAEE,EAAEC,MAAQK,EAAG,GAAI,KAAO,CACrF,GAAc,IAAVA,EAAG,IAAYN,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIQ,EAAI,KAAO,CACpE,GAAIR,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAI7pB,KAAK+pB,GAAK,KAAO,CAC9DR,EAAE,IAAIE,EAAEI,IAAIG,MAChBP,EAAEG,KAAKI,MAAO,SAEtBD,EAAKlP,EAAKpd,KAAKmrB,EAASa,EAC5B,CAAE,MAAOvrB,GAAK6rB,EAAK,CAAC,EAAG7rB,GAAIorB,EAAI,CAAG,CAAE,QAAUD,EAAIE,EAAI,CAAG,CACzD,GAAY,EAARQ,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAExrB,MAAOwrB,EAAG,GAAKA,EAAG,QAAK,EAAQzrB,MAAM,EAC9E,CAtBgD2qB,CAAK,CAACzJ,EAAG/U,GAAK,CAAG,CAuBrE,EACIwf,EAAmBtvB,MAAQA,KAAKsvB,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,EACxD,EACA7qB,OAAOsH,eAAevL,EAAS,aAAc,CAAEmD,OAAO,IACtD,IAAI6rB,EAAQH,EAAgB,EAAQ,OAChCI,EAAc,EAAQ,MACtBC,EAAYL,EAAgB,EAAQ,OACpCM,EAAY,IAAIF,EAAYG,UAAU,CACtCC,QAAS,SACTjiB,QAAS,oBACTkiB,cAAeJ,EAAUpe,QACzBye,eAAgB,CAIhB,IAEJ,IAC0BhC,OAAU,OAAQ,OAAQ,GAAQ,WACpD,OAAOS,EAAYzuB,MAAM,SAAUiwB,GAC/B,OAAQA,EAAGlB,OACP,KAAK,EAAG,MAAO,CAAC,EAAaa,EAAUM,gBACvC,KAAK,EAGD,OAFAD,EAAGjB,OACHjgB,QAAQW,IAAI,iDACL,CAAC,GAEpB,GACJ,GACJ,CACA,MAAO1B,GACHe,QAAQf,MAAM,qCAAsCA,EACxD,CACW4hB,EAAUO,OAAO,OAAQ,CAEhCC,UAAW,CACPhwB,KAAMsvB,EAAYW,UAAUC,OAC5BC,WAAW,GAEfC,SAAU,CACNpwB,KAAMsvB,EAAYW,UAAUC,SAGjC,CACCG,UAAW,YAGVC,OAQL,IAAI7P,EAAM,IAAI4O,EAAMle,QACpBsP,EAAIxB,KAAI,SAAUzc,GAAO,OAAOorB,OAAU,OAAQ,OAAQ,GAAQ,WAC9D,OAAOS,EAAYzuB,MAAM,SAAUiwB,GAG/B,OAFAlhB,QAAQW,IAAI,mBACZ9M,EAAIsd,KAAO,cACJ,CAAC,EACZ,GACJ,GAAI,IACJW,EAAItB,OAAO,kCC5FX,IAAInC,EAAS,EAAQ,MA6BrB5c,EAAOC,QAVP,SAAyBkS,EAAGC,GAC1B,IAAI+d,EAAK1sB,OAAO0O,GACZie,EAAK3sB,OAAO2O,GACZ3N,EAAMmY,EAAOyT,kBAAkB,IAInC,OAxBF,SAAqBle,EAAGC,GACtB,GAAID,EAAE3R,SAAW4R,EAAE5R,OACjB,OAAO,EAIT,GAAIoc,EAAO0T,gBACT,OAAO1T,EAAO0T,gBAAgBne,EAAGC,GAEnC,IAAK,IAAI3R,EAAI,EAAGA,EAAI0R,EAAE3R,OAAQC,IAC5B,GAAI0R,EAAE1R,KAAO2R,EAAE3R,GACb,OAAO,EAGX,OAAO,CACT,CASS8vB,CAHE3T,EAAOE,WAAW,SAAUrY,GAAKsY,OAAOoT,GAAInT,SAC5CJ,EAAOE,WAAW,SAAUrY,GAAKsY,OAAOqT,GAAIpT,WAEvB7K,IAAMC,CACtC,8BCrBA,IAAIoe,EAAQ,EAAQ,MAChBnxB,EAAO,EAAQ,KA2BnB,SAASoiB,EAAQre,EAAOhD,GACtB,IAAIK,EAwBAb,EAvBAO,EAAQC,EAGRkG,EAgNN,SAA2BlD,GACzB,IAAKA,EACH,OAAO,KAGT,IACE,OAzBJ,SAAwBA,GAEtB,IAAIxD,EAAO4wB,EAAM5pB,MAAMxD,GAMvB,OAHAxD,EAAKoG,gBAAapB,EAGX4rB,EAAM9pB,OAAO9G,EACtB,CAgBW6wB,CAAcrtB,EACvB,CAAE,MAAOH,GACP,OAAO,IACT,CACF,CA1NYytB,CAAiBttB,GAG3B,IAAKkD,EACH,OAAO,EAIT,GAAInG,IAAUE,MAAMC,QAAQH,GAE1B,IADAA,EAAQ,IAAIE,MAAME,UAAUC,OAAS,GAChCC,EAAI,EAAGA,EAAIN,EAAMK,OAAQC,IAC5BN,EAAMM,GAAKF,UAAUE,EAAI,GAK7B,IAAKN,IAAUA,EAAMK,OACnB,OAAO8F,EAIT,IAAK7F,EAAI,EAAGA,EAAIN,EAAMK,OAAQC,IAC5B,GAAIkwB,EAAUC,EAAUhxB,EAAOO,EAAMM,IAAK6F,GACxC,MAAmB,MAAZ1G,EAAK,KAAqC,IAAvBA,EAAKC,QAAQ,KACnCyG,EACA1G,EAKR,OAAO,CACT,CAaA,SAASixB,EAAStxB,GAChB,YAA4CqF,IAArCrF,EAAIE,QAAQ,uBAChB0tB,MAAM5tB,EAAIE,QAAQ,kBACvB,CAkEA,SAASmxB,EAAWhxB,GAClB,GAAoB,iBAATA,EAET,OAAO,EAGT,OAAQA,GACN,IAAK,aACH,MAAO,oCACT,IAAK,YACH,MAAO,cAGX,MAAgB,MAAZA,EAAK,GAEA,MAAQA,GAGa,IAAvBA,EAAKC,QAAQ,KAChBR,EAAKS,OAAOF,GACZA,CACN,CAaA,SAAS+wB,EAAW3e,EAAUD,GAE5B,IAAiB,IAAbC,EACF,OAAO,EAIT,IAAI8e,EAAc/e,EAAOV,MAAM,KAC3B0f,EAAgB/e,EAASX,MAAM,KAGnC,OAA2B,IAAvByf,EAAYtwB,QAAyC,IAAzBuwB,EAAcvwB,SAKrB,MAArBuwB,EAAc,IAAcA,EAAc,KAAOD,EAAY,MAK3B,OAAlCC,EAAc,GAAGxqB,OAAO,EAAG,GACtBwqB,EAAc,GAAGvwB,QAAUswB,EAAY,GAAGtwB,OAAS,GACxDuwB,EAAc,GAAGxqB,OAAO,KAAOuqB,EAAY,GAAGvqB,OAAO,EAAIwqB,EAAc,GAAGvwB,QAIrD,MAArBuwB,EAAc,IAAcA,EAAc,KAAOD,EAAY,GAKnE,CA5MA9wB,EAAOC,QAoGP,SAAwBV,EAAKa,GAC3B,IAAID,EAAQC,EAGZ,IAAKywB,EAAQtxB,GACX,OAAO,KAIT,GAAIgB,UAAUC,OAAS,EAAG,CACxBL,EAAQ,IAAIE,MAAME,UAAUC,OAAS,GACrC,IAAK,IAAIC,EAAI,EAAGA,EAAIN,EAAMK,OAAQC,IAChCN,EAAMM,GAAKF,UAAUE,EAAI,EAE7B,CAKA,OAAOghB,EAFKliB,EAAIE,QAAQ,gBAEHU,EACvB,EAvHAH,EAAOC,QAAQojB,GAAK5B,EACpBzhB,EAAOC,QAAQ+wB,QAAUH,EACzB7wB,EAAOC,QAAQ2wB,UAAYA,EAC3B5wB,EAAOC,QAAQ4G,MAAQ8pB,yBCdvB3wB,EAAOC,QAwHP,SAAe4C,EAAKygB,GAClB,IAAKzgB,IAAQA,EAAIgG,YAAchG,EAAIuI,UAEjC,MAAM,IAAI5H,UAAU,4BAItB,IAAI8C,EAAMzD,EAAIgG,UAAU,SAAW,GAC/BD,EAASvI,MAAMC,QAAQgG,GACvBA,EAAI6K,KAAK,MACT1N,OAAO6C,IAGNA,EAAMoe,EAAO9b,EAAQ0a,KACxBzgB,EAAIuI,UAAU,OAAQ9E,EAE1B,EAvIAtG,EAAOC,QAAQykB,OAASA,EAaxB,IAAIuM,EAAoB,iCAWxB,SAASvM,EAAQ9b,EAAQ0a,GACvB,GAAsB,iBAAX1a,EACT,MAAM,IAAIpF,UAAU,+BAGtB,IAAK8f,EACH,MAAM,IAAI9f,UAAU,8BAStB,IALA,IAAI0tB,EAAU7wB,MAAMC,QAAQgjB,GAExBA,EADA1c,EAAMnD,OAAO6f,IAIRjU,EAAI,EAAGA,EAAI6hB,EAAO1wB,OAAQ6O,IACjC,IAAK4hB,EAAkB1rB,KAAK2rB,EAAO7hB,IACjC,MAAM,IAAI7L,UAAU,kDAKxB,GAAe,MAAXoF,EACF,OAAOA,EAIT,IAAItC,EAAMsC,EACNuoB,EAAOvqB,EAAMgC,EAAOzC,eAGxB,IAA6B,IAAzB+qB,EAAOrxB,QAAQ,OAAsC,IAAvBsxB,EAAKtxB,QAAQ,KAC7C,MAAO,IAGT,IAAK,IAAIY,EAAI,EAAGA,EAAIywB,EAAO1wB,OAAQC,IAAK,CACtC,IAAI2wB,EAAMF,EAAOzwB,GAAG0F,eAGO,IAAvBgrB,EAAKtxB,QAAQuxB,KACfD,EAAKtsB,KAAKusB,GACV9qB,EAAMA,EACFA,EAAM,KAAO4qB,EAAOzwB,GACpBywB,EAAOzwB,GAEf,CAEA,OAAO6F,CACT,CAUA,SAASM,EAAOgC,GAMd,IALA,IAAI0P,EAAM,EACNC,EAAO,GACPC,EAAQ,EAGH/X,EAAI,EAAG6Q,EAAM1I,EAAOpI,OAAQC,EAAI6Q,EAAK7Q,IAC5C,OAAQmI,EAAON,WAAW7H,IACxB,KAAK,GACC+X,IAAUF,IACZE,EAAQF,EAAM7X,EAAI,GAEpB,MACF,KAAK,GACH8X,EAAK1T,KAAK+D,EAAOkI,UAAU0H,EAAOF,IAClCE,EAAQF,EAAM7X,EAAI,EAClB,MACF,QACE6X,EAAM7X,EAAI,EAQhB,OAFA8X,EAAK1T,KAAK+D,EAAOkI,UAAU0H,EAAOF,IAE3BC,CACT,wBClBAvY,EAAOC,QAtGP,MACE0D,YAAY0tB,GACV7xB,KAAK6xB,IAAMA,EACX7xB,KAAKstB,KAAO,EACZttB,KAAK2J,MAAQ,IAAImoB,IACjB9xB,KAAK+xB,OAAS,IAAID,GACpB,CAEAxvB,IAAI2C,EAAKS,GACP,IAAIssB,EAAOhyB,KAAK2J,MAAMrH,IAAI2C,GAC1B,MAAMqF,EAAS5E,GAAWA,EAAQ4E,OAElC,IAAIwB,EACJ,SAASmmB,IAEP,OADAnmB,EAAMA,GAAOzB,KAAKyB,MACXA,CACT,CACA,GAAIkmB,EAAM,CAER,GAAIA,EAAKE,SAAWD,IAAWD,EAAKE,QAClCF,EAAKE,QAAU,EACfF,EAAKpuB,WAAQwB,OAGb,QAAeA,IAAXkF,EAAsB,CACxB,MAAM4nB,EAAU5nB,EAAS2nB,IAAW3nB,EAAS,EAC7C0nB,EAAKE,QAAUA,CACjB,CAEF,OAAOF,EAAKpuB,KACd,CAIA,GADAouB,EAAOhyB,KAAK+xB,OAAOzvB,IAAI2C,GACnB+sB,EAAM,CAER,GAAIA,EAAKE,SAAWD,IAAWD,EAAKE,QAClCF,EAAKE,QAAU,EACfF,EAAKpuB,WAAQwB,OAKb,GAFApF,KAAKmyB,QAAQltB,EAAK+sB,QAEH5sB,IAAXkF,EAAsB,CACxB,MAAM4nB,EAAU5nB,EAAS2nB,IAAW3nB,EAAS,EAC7C0nB,EAAKE,QAAUA,CACjB,CAEF,OAAOF,EAAKpuB,KACd,CACF,CAEApB,IAAIyC,EAAKrB,EAAO8B,GACd,MAAM4E,EAAS5E,GAAWA,EAAQ4E,OAC5B4nB,EAAU5nB,EAASD,KAAKyB,MAAQxB,EAAS,EAC/C,IAAI0nB,EAAOhyB,KAAK2J,MAAMrH,IAAI2C,GACtB+sB,GACFA,EAAKE,QAAUA,EACfF,EAAKpuB,MAAQA,IAEbouB,EAAO,CACLpuB,QACAsuB,WAEFlyB,KAAKmyB,QAAQltB,EAAK+sB,GAEtB,CAEAjtB,OACE,MAAMqtB,EAAY,IAAIC,IAChBvmB,EAAMzB,KAAKyB,MAEjB,IAAK,MAAMwmB,KAAStyB,KAAK2J,MAAM4oB,UAC7BC,EAAWF,GAGb,IAAK,MAAMA,KAAStyB,KAAK+xB,OAAOQ,UAC9BC,EAAWF,GAGb,SAASE,EAAWF,GAClB,MAAMrtB,EAAMqtB,EAAM,GACZN,EAAOM,EAAM,IACfA,EAAM,GAAG1uB,QAAW0uB,EAAM,GAAGJ,SAAYF,EAAKE,SAAWpmB,IAC3DsmB,EAAUK,IAAIxtB,EAElB,CAEA,OAAOpE,MAAM0H,KAAK6pB,EAAUrtB,OAC9B,CAEAotB,QAAQltB,EAAK+sB,GACXhyB,KAAK2J,MAAMnH,IAAIyC,EAAK+sB,GACpBhyB,KAAKstB,OACDttB,KAAKstB,MAAQttB,KAAK6xB,MACpB7xB,KAAKstB,KAAO,EACZttB,KAAK+xB,OAAS/xB,KAAK2J,MACnB3J,KAAK2J,MAAQ,IAAImoB,IAErB,0BCrGFtxB,EAAOC,QAAUiyB,QAAQ,gCCAzBlyB,EAAOC,QAAUiyB,QAAQ,sCCAzBlyB,EAAOC,QAAUiyB,QAAQ,iCCAzBlyB,EAAOC,QAAUiyB,QAAQ,iCCAzBlyB,EAAOC,QAAUiyB,QAAQ,iCCAzBlyB,EAAOC,QAAUiyB,QAAQ,6BCAzBlyB,EAAOC,QAAUiyB,QAAQ,+BCAzBlyB,EAAOC,QAAUiyB,QAAQ,8BCAzBlyB,EAAOC,QAAUiyB,QAAQ,+BCAzBlyB,EAAOC,QAAUiyB,QAAQ,sCCAzBlyB,EAAOC,QAAUiyB,QAAQ,iCCAzBlyB,EAAOC,QAAUiyB,QAAQ,8BCAzBlyB,EAAOC,QAAUiyB,QAAQ,+BCAzBlyB,EAAOC,QAAUiyB,QAAQ,+BCAzBlyB,EAAOC,QAAUiyB,QAAQ,oCCAzBlyB,EAAOC,QAAUiyB,QAAQ,q4gJCCrBC,EAA2B,CAAC,GAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBztB,IAAjB0tB,EACH,OAAOA,EAAaryB,QAGrB,IAAID,EAASmyB,EAAyBE,GAAY,CAGjDpyB,QAAS,CAAC,GAOX,OAHAsyB,EAAoBF,GAAU/vB,KAAKtC,EAAOC,QAASD,EAAQA,EAAOC,QAASmyB,GAGpEpyB,EAAOC,OACf,CCnB0BmyB,CAAoB","sources":["webpack://base_server/./node_modules/accepts/index.js","webpack://base_server/./node_modules/cache-content-type/index.js","webpack://base_server/./node_modules/co/index.js","webpack://base_server/./node_modules/content-disposition/index.js","webpack://base_server/./node_modules/content-type/index.js","webpack://base_server/./node_modules/cookies/index.js","webpack://base_server/./node_modules/cookies/node_modules/depd/lib/browser/index.js","webpack://base_server/./node_modules/debug/src/browser.js","webpack://base_server/./node_modules/debug/src/common.js","webpack://base_server/./node_modules/deep-equal/index.js","webpack://base_server/./node_modules/deep-equal/lib/is_arguments.js","webpack://base_server/./node_modules/deep-equal/lib/keys.js","webpack://base_server/./node_modules/delegates/index.js","webpack://base_server/./node_modules/depd/lib/browser/index.js","webpack://base_server/./node_modules/destroy/index.js","webpack://base_server/./node_modules/ee-first/index.js","webpack://base_server/./node_modules/encodeurl/index.js","webpack://base_server/./node_modules/escape-html/index.js","webpack://base_server/./node_modules/fresh/index.js","webpack://base_server/./node_modules/has-symbols/shams.js","webpack://base_server/./node_modules/has-tostringtag/shams.js","webpack://base_server/./node_modules/http-assert/index.js","webpack://base_server/./node_modules/http-errors/index.js","webpack://base_server/./node_modules/inherits/inherits_browser.js","webpack://base_server/./node_modules/is-generator-function/index.js","webpack://base_server/./node_modules/keygrip/index.js","webpack://base_server/./node_modules/koa-compose/index.js","webpack://base_server/./node_modules/koa-convert/index.js","webpack://base_server/./node_modules/koa/lib/application.js","webpack://base_server/./node_modules/koa/lib/context.js","webpack://base_server/./node_modules/koa/lib/request.js","webpack://base_server/./node_modules/koa/lib/response.js","webpack://base_server/./node_modules/koa/node_modules/depd/lib/browser/index.js","webpack://base_server/./node_modules/media-typer/index.js","webpack://base_server/./node_modules/mime-db/index.js","webpack://base_server/./node_modules/mime-types/index.js","webpack://base_server/./node_modules/ms/index.js","webpack://base_server/./node_modules/negotiator/index.js","webpack://base_server/./node_modules/negotiator/lib/charset.js","webpack://base_server/./node_modules/negotiator/lib/encoding.js","webpack://base_server/./node_modules/negotiator/lib/language.js","webpack://base_server/./node_modules/negotiator/lib/mediaType.js","webpack://base_server/./node_modules/on-finished/index.js","webpack://base_server/./node_modules/only/index.js","webpack://base_server/./node_modules/parseurl/index.js","webpack://base_server/./node_modules/safe-buffer/index.js","webpack://base_server/./node_modules/setprototypeof/index.js","webpack://base_server/./node_modules/statuses/index.js","webpack://base_server/./node_modules/toidentifier/index.js","webpack://base_server/./src/index.ts","webpack://base_server/./node_modules/tsscmp/lib/index.js","webpack://base_server/./node_modules/type-is/index.js","webpack://base_server/./node_modules/vary/index.js","webpack://base_server/./node_modules/ylru/index.js","webpack://base_server/external node-commonjs \"assert\"","webpack://base_server/external node-commonjs \"async_hooks\"","webpack://base_server/external node-commonjs \"buffer\"","webpack://base_server/external node-commonjs \"crypto\"","webpack://base_server/external node-commonjs \"events\"","webpack://base_server/external node-commonjs \"fs\"","webpack://base_server/external node-commonjs \"http\"","webpack://base_server/external node-commonjs \"net\"","webpack://base_server/external node-commonjs \"path\"","webpack://base_server/external node-commonjs \"querystring\"","webpack://base_server/external node-commonjs \"stream\"","webpack://base_server/external node-commonjs \"url\"","webpack://base_server/external node-commonjs \"util\"","webpack://base_server/external node-commonjs \"zlib\"","webpack://base_server/external var \"require('sequelize')\"","webpack://base_server/external var \"require('sqlite3')\"","webpack://base_server/webpack/bootstrap","webpack://base_server/webpack/startup"],"sourcesContent":["/*!\n * accepts\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar Negotiator = require('negotiator')\nvar mime = require('mime-types')\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = Accepts\n\n/**\n * Create a new Accepts object for the given req.\n *\n * @param {object} req\n * @public\n */\n\nfunction Accepts (req) {\n  if (!(this instanceof Accepts)) {\n    return new Accepts(req)\n  }\n\n  this.headers = req.headers\n  this.negotiator = new Negotiator(req)\n}\n\n/**\n * Check if the given `type(s)` is acceptable, returning\n * the best match when true, otherwise `undefined`, in which\n * case you should respond with 406 \"Not Acceptable\".\n *\n * The `type` value may be a single mime type string\n * such as \"application/json\", the extension name\n * such as \"json\" or an array `[\"json\", \"html\", \"text/plain\"]`. When a list\n * or array is given the _best_ match, if any is returned.\n *\n * Examples:\n *\n *     // Accept: text/html\n *     this.types('html');\n *     // => \"html\"\n *\n *     // Accept: text/*, application/json\n *     this.types('html');\n *     // => \"html\"\n *     this.types('text/html');\n *     // => \"text/html\"\n *     this.types('json', 'text');\n *     // => \"json\"\n *     this.types('application/json');\n *     // => \"application/json\"\n *\n *     // Accept: text/*, application/json\n *     this.types('image/png');\n *     this.types('png');\n *     // => undefined\n *\n *     // Accept: text/*;q=.5, application/json\n *     this.types(['html', 'json']);\n *     this.types('html', 'json');\n *     // => \"json\"\n *\n * @param {String|Array} types...\n * @return {String|Array|Boolean}\n * @public\n */\n\nAccepts.prototype.type =\nAccepts.prototype.types = function (types_) {\n  var types = types_\n\n  // support flattened arguments\n  if (types && !Array.isArray(types)) {\n    types = new Array(arguments.length)\n    for (var i = 0; i < types.length; i++) {\n      types[i] = arguments[i]\n    }\n  }\n\n  // no types, return all requested types\n  if (!types || types.length === 0) {\n    return this.negotiator.mediaTypes()\n  }\n\n  // no accept header, return first given type\n  if (!this.headers.accept) {\n    return types[0]\n  }\n\n  var mimes = types.map(extToMime)\n  var accepts = this.negotiator.mediaTypes(mimes.filter(validMime))\n  var first = accepts[0]\n\n  return first\n    ? types[mimes.indexOf(first)]\n    : false\n}\n\n/**\n * Return accepted encodings or best fit based on `encodings`.\n *\n * Given `Accept-Encoding: gzip, deflate`\n * an array sorted by quality is returned:\n *\n *     ['gzip', 'deflate']\n *\n * @param {String|Array} encodings...\n * @return {String|Array}\n * @public\n */\n\nAccepts.prototype.encoding =\nAccepts.prototype.encodings = function (encodings_) {\n  var encodings = encodings_\n\n  // support flattened arguments\n  if (encodings && !Array.isArray(encodings)) {\n    encodings = new Array(arguments.length)\n    for (var i = 0; i < encodings.length; i++) {\n      encodings[i] = arguments[i]\n    }\n  }\n\n  // no encodings, return all requested encodings\n  if (!encodings || encodings.length === 0) {\n    return this.negotiator.encodings()\n  }\n\n  return this.negotiator.encodings(encodings)[0] || false\n}\n\n/**\n * Return accepted charsets or best fit based on `charsets`.\n *\n * Given `Accept-Charset: utf-8, iso-8859-1;q=0.2, utf-7;q=0.5`\n * an array sorted by quality is returned:\n *\n *     ['utf-8', 'utf-7', 'iso-8859-1']\n *\n * @param {String|Array} charsets...\n * @return {String|Array}\n * @public\n */\n\nAccepts.prototype.charset =\nAccepts.prototype.charsets = function (charsets_) {\n  var charsets = charsets_\n\n  // support flattened arguments\n  if (charsets && !Array.isArray(charsets)) {\n    charsets = new Array(arguments.length)\n    for (var i = 0; i < charsets.length; i++) {\n      charsets[i] = arguments[i]\n    }\n  }\n\n  // no charsets, return all requested charsets\n  if (!charsets || charsets.length === 0) {\n    return this.negotiator.charsets()\n  }\n\n  return this.negotiator.charsets(charsets)[0] || false\n}\n\n/**\n * Return accepted languages or best fit based on `langs`.\n *\n * Given `Accept-Language: en;q=0.8, es, pt`\n * an array sorted by quality is returned:\n *\n *     ['es', 'pt', 'en']\n *\n * @param {String|Array} langs...\n * @return {Array|String}\n * @public\n */\n\nAccepts.prototype.lang =\nAccepts.prototype.langs =\nAccepts.prototype.language =\nAccepts.prototype.languages = function (languages_) {\n  var languages = languages_\n\n  // support flattened arguments\n  if (languages && !Array.isArray(languages)) {\n    languages = new Array(arguments.length)\n    for (var i = 0; i < languages.length; i++) {\n      languages[i] = arguments[i]\n    }\n  }\n\n  // no languages, return all requested languages\n  if (!languages || languages.length === 0) {\n    return this.negotiator.languages()\n  }\n\n  return this.negotiator.languages(languages)[0] || false\n}\n\n/**\n * Convert extnames to mime.\n *\n * @param {String} type\n * @return {String}\n * @private\n */\n\nfunction extToMime (type) {\n  return type.indexOf('/') === -1\n    ? mime.lookup(type)\n    : type\n}\n\n/**\n * Check if mime is valid.\n *\n * @param {String} type\n * @return {String}\n * @private\n */\n\nfunction validMime (type) {\n  return typeof type === 'string'\n}\n","'use strict';\n\nconst mimeTypes = require('mime-types');\nconst LRU = require('ylru');\n\nconst typeLRUCache = new LRU(100);\n\nmodule.exports = type => {\n  let mimeType = typeLRUCache.get(type);\n  if (!mimeType) {\n    mimeType = mimeTypes.contentType(type);\n    typeLRUCache.set(type, mimeType);\n  }\n  return mimeType;\n};\n","\n/**\n * slice() reference.\n */\n\nvar slice = Array.prototype.slice;\n\n/**\n * Expose `co`.\n */\n\nmodule.exports = co['default'] = co.co = co;\n\n/**\n * Wrap the given generator `fn` into a\n * function that returns a promise.\n * This is a separate function so that\n * every `co()` call doesn't create a new,\n * unnecessary closure.\n *\n * @param {GeneratorFunction} fn\n * @return {Function}\n * @api public\n */\n\nco.wrap = function (fn) {\n  createPromise.__generatorFunction__ = fn;\n  return createPromise;\n  function createPromise() {\n    return co.call(this, fn.apply(this, arguments));\n  }\n};\n\n/**\n * Execute the generator function or a generator\n * and return a promise.\n *\n * @param {Function} fn\n * @return {Promise}\n * @api public\n */\n\nfunction co(gen) {\n  var ctx = this;\n  var args = slice.call(arguments, 1)\n\n  // we wrap everything in a promise to avoid promise chaining,\n  // which leads to memory leak errors.\n  // see https://github.com/tj/co/issues/180\n  return new Promise(function(resolve, reject) {\n    if (typeof gen === 'function') gen = gen.apply(ctx, args);\n    if (!gen || typeof gen.next !== 'function') return resolve(gen);\n\n    onFulfilled();\n\n    /**\n     * @param {Mixed} res\n     * @return {Promise}\n     * @api private\n     */\n\n    function onFulfilled(res) {\n      var ret;\n      try {\n        ret = gen.next(res);\n      } catch (e) {\n        return reject(e);\n      }\n      next(ret);\n    }\n\n    /**\n     * @param {Error} err\n     * @return {Promise}\n     * @api private\n     */\n\n    function onRejected(err) {\n      var ret;\n      try {\n        ret = gen.throw(err);\n      } catch (e) {\n        return reject(e);\n      }\n      next(ret);\n    }\n\n    /**\n     * Get the next value in the generator,\n     * return a promise.\n     *\n     * @param {Object} ret\n     * @return {Promise}\n     * @api private\n     */\n\n    function next(ret) {\n      if (ret.done) return resolve(ret.value);\n      var value = toPromise.call(ctx, ret.value);\n      if (value && isPromise(value)) return value.then(onFulfilled, onRejected);\n      return onRejected(new TypeError('You may only yield a function, promise, generator, array, or object, '\n        + 'but the following object was passed: \"' + String(ret.value) + '\"'));\n    }\n  });\n}\n\n/**\n * Convert a `yield`ed value into a promise.\n *\n * @param {Mixed} obj\n * @return {Promise}\n * @api private\n */\n\nfunction toPromise(obj) {\n  if (!obj) return obj;\n  if (isPromise(obj)) return obj;\n  if (isGeneratorFunction(obj) || isGenerator(obj)) return co.call(this, obj);\n  if ('function' == typeof obj) return thunkToPromise.call(this, obj);\n  if (Array.isArray(obj)) return arrayToPromise.call(this, obj);\n  if (isObject(obj)) return objectToPromise.call(this, obj);\n  return obj;\n}\n\n/**\n * Convert a thunk to a promise.\n *\n * @param {Function}\n * @return {Promise}\n * @api private\n */\n\nfunction thunkToPromise(fn) {\n  var ctx = this;\n  return new Promise(function (resolve, reject) {\n    fn.call(ctx, function (err, res) {\n      if (err) return reject(err);\n      if (arguments.length > 2) res = slice.call(arguments, 1);\n      resolve(res);\n    });\n  });\n}\n\n/**\n * Convert an array of \"yieldables\" to a promise.\n * Uses `Promise.all()` internally.\n *\n * @param {Array} obj\n * @return {Promise}\n * @api private\n */\n\nfunction arrayToPromise(obj) {\n  return Promise.all(obj.map(toPromise, this));\n}\n\n/**\n * Convert an object of \"yieldables\" to a promise.\n * Uses `Promise.all()` internally.\n *\n * @param {Object} obj\n * @return {Promise}\n * @api private\n */\n\nfunction objectToPromise(obj){\n  var results = new obj.constructor();\n  var keys = Object.keys(obj);\n  var promises = [];\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var promise = toPromise.call(this, obj[key]);\n    if (promise && isPromise(promise)) defer(promise, key);\n    else results[key] = obj[key];\n  }\n  return Promise.all(promises).then(function () {\n    return results;\n  });\n\n  function defer(promise, key) {\n    // predefine the key in the result\n    results[key] = undefined;\n    promises.push(promise.then(function (res) {\n      results[key] = res;\n    }));\n  }\n}\n\n/**\n * Check if `obj` is a promise.\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isPromise(obj) {\n  return 'function' == typeof obj.then;\n}\n\n/**\n * Check if `obj` is a generator.\n *\n * @param {Mixed} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isGenerator(obj) {\n  return 'function' == typeof obj.next && 'function' == typeof obj.throw;\n}\n\n/**\n * Check if `obj` is a generator function.\n *\n * @param {Mixed} obj\n * @return {Boolean}\n * @api private\n */\nfunction isGeneratorFunction(obj) {\n  var constructor = obj.constructor;\n  if (!constructor) return false;\n  if ('GeneratorFunction' === constructor.name || 'GeneratorFunction' === constructor.displayName) return true;\n  return isGenerator(constructor.prototype);\n}\n\n/**\n * Check for plain object.\n *\n * @param {Mixed} val\n * @return {Boolean}\n * @api private\n */\n\nfunction isObject(val) {\n  return Object == val.constructor;\n}\n","/*!\n * content-disposition\n * Copyright(c) 2014-2017 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = contentDisposition\nmodule.exports.parse = parse\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar basename = require('path').basename\nvar Buffer = require('safe-buffer').Buffer\n\n/**\n * RegExp to match non attr-char, *after* encodeURIComponent (i.e. not including \"%\")\n * @private\n */\n\nvar ENCODE_URL_ATTR_CHAR_REGEXP = /[\\x00-\\x20\"'()*,/:;<=>?@[\\\\\\]{}\\x7f]/g // eslint-disable-line no-control-regex\n\n/**\n * RegExp to match percent encoding escape.\n * @private\n */\n\nvar HEX_ESCAPE_REGEXP = /%[0-9A-Fa-f]{2}/\nvar HEX_ESCAPE_REPLACE_REGEXP = /%([0-9A-Fa-f]{2})/g\n\n/**\n * RegExp to match non-latin1 characters.\n * @private\n */\n\nvar NON_LATIN1_REGEXP = /[^\\x20-\\x7e\\xa0-\\xff]/g\n\n/**\n * RegExp to match quoted-pair in RFC 2616\n *\n * quoted-pair = \"\\\" CHAR\n * CHAR        = <any US-ASCII character (octets 0 - 127)>\n * @private\n */\n\nvar QESC_REGEXP = /\\\\([\\u0000-\\u007f])/g // eslint-disable-line no-control-regex\n\n/**\n * RegExp to match chars that must be quoted-pair in RFC 2616\n * @private\n */\n\nvar QUOTE_REGEXP = /([\\\\\"])/g\n\n/**\n * RegExp for various RFC 2616 grammar\n *\n * parameter     = token \"=\" ( token | quoted-string )\n * token         = 1*<any CHAR except CTLs or separators>\n * separators    = \"(\" | \")\" | \"<\" | \">\" | \"@\"\n *               | \",\" | \";\" | \":\" | \"\\\" | <\">\n *               | \"/\" | \"[\" | \"]\" | \"?\" | \"=\"\n *               | \"{\" | \"}\" | SP | HT\n * quoted-string = ( <\"> *(qdtext | quoted-pair ) <\"> )\n * qdtext        = <any TEXT except <\">>\n * quoted-pair   = \"\\\" CHAR\n * CHAR          = <any US-ASCII character (octets 0 - 127)>\n * TEXT          = <any OCTET except CTLs, but including LWS>\n * LWS           = [CRLF] 1*( SP | HT )\n * CRLF          = CR LF\n * CR            = <US-ASCII CR, carriage return (13)>\n * LF            = <US-ASCII LF, linefeed (10)>\n * SP            = <US-ASCII SP, space (32)>\n * HT            = <US-ASCII HT, horizontal-tab (9)>\n * CTL           = <any US-ASCII control character (octets 0 - 31) and DEL (127)>\n * OCTET         = <any 8-bit sequence of data>\n * @private\n */\n\nvar PARAM_REGEXP = /;[\\x09\\x20]*([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\\x09\\x20]*=[\\x09\\x20]*(\"(?:[\\x20!\\x23-\\x5b\\x5d-\\x7e\\x80-\\xff]|\\\\[\\x20-\\x7e])*\"|[!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\\x09\\x20]*/g // eslint-disable-line no-control-regex\nvar TEXT_REGEXP = /^[\\x20-\\x7e\\x80-\\xff]+$/\nvar TOKEN_REGEXP = /^[!#$%&'*+.0-9A-Z^_`a-z|~-]+$/\n\n/**\n * RegExp for various RFC 5987 grammar\n *\n * ext-value     = charset  \"'\" [ language ] \"'\" value-chars\n * charset       = \"UTF-8\" / \"ISO-8859-1\" / mime-charset\n * mime-charset  = 1*mime-charsetc\n * mime-charsetc = ALPHA / DIGIT\n *               / \"!\" / \"#\" / \"$\" / \"%\" / \"&\"\n *               / \"+\" / \"-\" / \"^\" / \"_\" / \"`\"\n *               / \"{\" / \"}\" / \"~\"\n * language      = ( 2*3ALPHA [ extlang ] )\n *               / 4ALPHA\n *               / 5*8ALPHA\n * extlang       = *3( \"-\" 3ALPHA )\n * value-chars   = *( pct-encoded / attr-char )\n * pct-encoded   = \"%\" HEXDIG HEXDIG\n * attr-char     = ALPHA / DIGIT\n *               / \"!\" / \"#\" / \"$\" / \"&\" / \"+\" / \"-\" / \".\"\n *               / \"^\" / \"_\" / \"`\" / \"|\" / \"~\"\n * @private\n */\n\nvar EXT_VALUE_REGEXP = /^([A-Za-z0-9!#$%&+\\-^_`{}~]+)'(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}|[A-Za-z]{4,8}|)'((?:%[0-9A-Fa-f]{2}|[A-Za-z0-9!#$&+.^_`|~-])+)$/\n\n/**\n * RegExp for various RFC 6266 grammar\n *\n * disposition-type = \"inline\" | \"attachment\" | disp-ext-type\n * disp-ext-type    = token\n * disposition-parm = filename-parm | disp-ext-parm\n * filename-parm    = \"filename\" \"=\" value\n *                  | \"filename*\" \"=\" ext-value\n * disp-ext-parm    = token \"=\" value\n *                  | ext-token \"=\" ext-value\n * ext-token        = <the characters in token, followed by \"*\">\n * @private\n */\n\nvar DISPOSITION_TYPE_REGEXP = /^([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\\x09\\x20]*(?:$|;)/ // eslint-disable-line no-control-regex\n\n/**\n * Create an attachment Content-Disposition header.\n *\n * @param {string} [filename]\n * @param {object} [options]\n * @param {string} [options.type=attachment]\n * @param {string|boolean} [options.fallback=true]\n * @return {string}\n * @public\n */\n\nfunction contentDisposition (filename, options) {\n  var opts = options || {}\n\n  // get type\n  var type = opts.type || 'attachment'\n\n  // get parameters\n  var params = createparams(filename, opts.fallback)\n\n  // format into string\n  return format(new ContentDisposition(type, params))\n}\n\n/**\n * Create parameters object from filename and fallback.\n *\n * @param {string} [filename]\n * @param {string|boolean} [fallback=true]\n * @return {object}\n * @private\n */\n\nfunction createparams (filename, fallback) {\n  if (filename === undefined) {\n    return\n  }\n\n  var params = {}\n\n  if (typeof filename !== 'string') {\n    throw new TypeError('filename must be a string')\n  }\n\n  // fallback defaults to true\n  if (fallback === undefined) {\n    fallback = true\n  }\n\n  if (typeof fallback !== 'string' && typeof fallback !== 'boolean') {\n    throw new TypeError('fallback must be a string or boolean')\n  }\n\n  if (typeof fallback === 'string' && NON_LATIN1_REGEXP.test(fallback)) {\n    throw new TypeError('fallback must be ISO-8859-1 string')\n  }\n\n  // restrict to file base name\n  var name = basename(filename)\n\n  // determine if name is suitable for quoted string\n  var isQuotedString = TEXT_REGEXP.test(name)\n\n  // generate fallback name\n  var fallbackName = typeof fallback !== 'string'\n    ? fallback && getlatin1(name)\n    : basename(fallback)\n  var hasFallback = typeof fallbackName === 'string' && fallbackName !== name\n\n  // set extended filename parameter\n  if (hasFallback || !isQuotedString || HEX_ESCAPE_REGEXP.test(name)) {\n    params['filename*'] = name\n  }\n\n  // set filename parameter\n  if (isQuotedString || hasFallback) {\n    params.filename = hasFallback\n      ? fallbackName\n      : name\n  }\n\n  return params\n}\n\n/**\n * Format object to Content-Disposition header.\n *\n * @param {object} obj\n * @param {string} obj.type\n * @param {object} [obj.parameters]\n * @return {string}\n * @private\n */\n\nfunction format (obj) {\n  var parameters = obj.parameters\n  var type = obj.type\n\n  if (!type || typeof type !== 'string' || !TOKEN_REGEXP.test(type)) {\n    throw new TypeError('invalid type')\n  }\n\n  // start with normalized type\n  var string = String(type).toLowerCase()\n\n  // append parameters\n  if (parameters && typeof parameters === 'object') {\n    var param\n    var params = Object.keys(parameters).sort()\n\n    for (var i = 0; i < params.length; i++) {\n      param = params[i]\n\n      var val = param.substr(-1) === '*'\n        ? ustring(parameters[param])\n        : qstring(parameters[param])\n\n      string += '; ' + param + '=' + val\n    }\n  }\n\n  return string\n}\n\n/**\n * Decode a RFC 5987 field value (gracefully).\n *\n * @param {string} str\n * @return {string}\n * @private\n */\n\nfunction decodefield (str) {\n  var match = EXT_VALUE_REGEXP.exec(str)\n\n  if (!match) {\n    throw new TypeError('invalid extended field value')\n  }\n\n  var charset = match[1].toLowerCase()\n  var encoded = match[2]\n  var value\n\n  // to binary string\n  var binary = encoded.replace(HEX_ESCAPE_REPLACE_REGEXP, pdecode)\n\n  switch (charset) {\n    case 'iso-8859-1':\n      value = getlatin1(binary)\n      break\n    case 'utf-8':\n      value = Buffer.from(binary, 'binary').toString('utf8')\n      break\n    default:\n      throw new TypeError('unsupported charset in extended field')\n  }\n\n  return value\n}\n\n/**\n * Get ISO-8859-1 version of string.\n *\n * @param {string} val\n * @return {string}\n * @private\n */\n\nfunction getlatin1 (val) {\n  // simple Unicode -> ISO-8859-1 transformation\n  return String(val).replace(NON_LATIN1_REGEXP, '?')\n}\n\n/**\n * Parse Content-Disposition header string.\n *\n * @param {string} string\n * @return {object}\n * @public\n */\n\nfunction parse (string) {\n  if (!string || typeof string !== 'string') {\n    throw new TypeError('argument string is required')\n  }\n\n  var match = DISPOSITION_TYPE_REGEXP.exec(string)\n\n  if (!match) {\n    throw new TypeError('invalid type format')\n  }\n\n  // normalize type\n  var index = match[0].length\n  var type = match[1].toLowerCase()\n\n  var key\n  var names = []\n  var params = {}\n  var value\n\n  // calculate index to start at\n  index = PARAM_REGEXP.lastIndex = match[0].substr(-1) === ';'\n    ? index - 1\n    : index\n\n  // match parameters\n  while ((match = PARAM_REGEXP.exec(string))) {\n    if (match.index !== index) {\n      throw new TypeError('invalid parameter format')\n    }\n\n    index += match[0].length\n    key = match[1].toLowerCase()\n    value = match[2]\n\n    if (names.indexOf(key) !== -1) {\n      throw new TypeError('invalid duplicate parameter')\n    }\n\n    names.push(key)\n\n    if (key.indexOf('*') + 1 === key.length) {\n      // decode extended value\n      key = key.slice(0, -1)\n      value = decodefield(value)\n\n      // overwrite existing value\n      params[key] = value\n      continue\n    }\n\n    if (typeof params[key] === 'string') {\n      continue\n    }\n\n    if (value[0] === '\"') {\n      // remove quotes and escapes\n      value = value\n        .substr(1, value.length - 2)\n        .replace(QESC_REGEXP, '$1')\n    }\n\n    params[key] = value\n  }\n\n  if (index !== -1 && index !== string.length) {\n    throw new TypeError('invalid parameter format')\n  }\n\n  return new ContentDisposition(type, params)\n}\n\n/**\n * Percent decode a single character.\n *\n * @param {string} str\n * @param {string} hex\n * @return {string}\n * @private\n */\n\nfunction pdecode (str, hex) {\n  return String.fromCharCode(parseInt(hex, 16))\n}\n\n/**\n * Percent encode a single character.\n *\n * @param {string} char\n * @return {string}\n * @private\n */\n\nfunction pencode (char) {\n  return '%' + String(char)\n    .charCodeAt(0)\n    .toString(16)\n    .toUpperCase()\n}\n\n/**\n * Quote a string for HTTP.\n *\n * @param {string} val\n * @return {string}\n * @private\n */\n\nfunction qstring (val) {\n  var str = String(val)\n\n  return '\"' + str.replace(QUOTE_REGEXP, '\\\\$1') + '\"'\n}\n\n/**\n * Encode a Unicode string for HTTP (RFC 5987).\n *\n * @param {string} val\n * @return {string}\n * @private\n */\n\nfunction ustring (val) {\n  var str = String(val)\n\n  // percent encode as UTF-8\n  var encoded = encodeURIComponent(str)\n    .replace(ENCODE_URL_ATTR_CHAR_REGEXP, pencode)\n\n  return 'UTF-8\\'\\'' + encoded\n}\n\n/**\n * Class for parsed Content-Disposition header for v8 optimization\n *\n * @public\n * @param {string} type\n * @param {object} parameters\n * @constructor\n */\n\nfunction ContentDisposition (type, parameters) {\n  this.type = type\n  this.parameters = parameters\n}\n","/*!\n * content-type\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * RegExp to match *( \";\" parameter ) in RFC 7231 sec 3.1.1.1\n *\n * parameter     = token \"=\" ( token / quoted-string )\n * token         = 1*tchar\n * tchar         = \"!\" / \"#\" / \"$\" / \"%\" / \"&\" / \"'\" / \"*\"\n *               / \"+\" / \"-\" / \".\" / \"^\" / \"_\" / \"`\" / \"|\" / \"~\"\n *               / DIGIT / ALPHA\n *               ; any VCHAR, except delimiters\n * quoted-string = DQUOTE *( qdtext / quoted-pair ) DQUOTE\n * qdtext        = HTAB / SP / %x21 / %x23-5B / %x5D-7E / obs-text\n * obs-text      = %x80-FF\n * quoted-pair   = \"\\\" ( HTAB / SP / VCHAR / obs-text )\n */\nvar PARAM_REGEXP = /; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *(\"(?:[\\u000b\\u0020\\u0021\\u0023-\\u005b\\u005d-\\u007e\\u0080-\\u00ff]|\\\\[\\u000b\\u0020-\\u00ff])*\"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g // eslint-disable-line no-control-regex\nvar TEXT_REGEXP = /^[\\u000b\\u0020-\\u007e\\u0080-\\u00ff]+$/ // eslint-disable-line no-control-regex\nvar TOKEN_REGEXP = /^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/\n\n/**\n * RegExp to match quoted-pair in RFC 7230 sec 3.2.6\n *\n * quoted-pair = \"\\\" ( HTAB / SP / VCHAR / obs-text )\n * obs-text    = %x80-FF\n */\nvar QESC_REGEXP = /\\\\([\\u000b\\u0020-\\u00ff])/g // eslint-disable-line no-control-regex\n\n/**\n * RegExp to match chars that must be quoted-pair in RFC 7230 sec 3.2.6\n */\nvar QUOTE_REGEXP = /([\\\\\"])/g\n\n/**\n * RegExp to match type in RFC 7231 sec 3.1.1.1\n *\n * media-type = type \"/\" subtype\n * type       = token\n * subtype    = token\n */\nvar TYPE_REGEXP = /^[!#$%&'*+.^_`|~0-9A-Za-z-]+\\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/\n\n/**\n * Module exports.\n * @public\n */\n\nexports.format = format\nexports.parse = parse\n\n/**\n * Format object to media type.\n *\n * @param {object} obj\n * @return {string}\n * @public\n */\n\nfunction format (obj) {\n  if (!obj || typeof obj !== 'object') {\n    throw new TypeError('argument obj is required')\n  }\n\n  var parameters = obj.parameters\n  var type = obj.type\n\n  if (!type || !TYPE_REGEXP.test(type)) {\n    throw new TypeError('invalid type')\n  }\n\n  var string = type\n\n  // append parameters\n  if (parameters && typeof parameters === 'object') {\n    var param\n    var params = Object.keys(parameters).sort()\n\n    for (var i = 0; i < params.length; i++) {\n      param = params[i]\n\n      if (!TOKEN_REGEXP.test(param)) {\n        throw new TypeError('invalid parameter name')\n      }\n\n      string += '; ' + param + '=' + qstring(parameters[param])\n    }\n  }\n\n  return string\n}\n\n/**\n * Parse media type to object.\n *\n * @param {string|object} string\n * @return {Object}\n * @public\n */\n\nfunction parse (string) {\n  if (!string) {\n    throw new TypeError('argument string is required')\n  }\n\n  // support req/res-like objects as argument\n  var header = typeof string === 'object'\n    ? getcontenttype(string)\n    : string\n\n  if (typeof header !== 'string') {\n    throw new TypeError('argument string is required to be a string')\n  }\n\n  var index = header.indexOf(';')\n  var type = index !== -1\n    ? header.slice(0, index).trim()\n    : header.trim()\n\n  if (!TYPE_REGEXP.test(type)) {\n    throw new TypeError('invalid media type')\n  }\n\n  var obj = new ContentType(type.toLowerCase())\n\n  // parse parameters\n  if (index !== -1) {\n    var key\n    var match\n    var value\n\n    PARAM_REGEXP.lastIndex = index\n\n    while ((match = PARAM_REGEXP.exec(header))) {\n      if (match.index !== index) {\n        throw new TypeError('invalid parameter format')\n      }\n\n      index += match[0].length\n      key = match[1].toLowerCase()\n      value = match[2]\n\n      if (value.charCodeAt(0) === 0x22 /* \" */) {\n        // remove quotes\n        value = value.slice(1, -1)\n\n        // remove escapes\n        if (value.indexOf('\\\\') !== -1) {\n          value = value.replace(QESC_REGEXP, '$1')\n        }\n      }\n\n      obj.parameters[key] = value\n    }\n\n    if (index !== header.length) {\n      throw new TypeError('invalid parameter format')\n    }\n  }\n\n  return obj\n}\n\n/**\n * Get content-type from req/res objects.\n *\n * @param {object}\n * @return {Object}\n * @private\n */\n\nfunction getcontenttype (obj) {\n  var header\n\n  if (typeof obj.getHeader === 'function') {\n    // res-like\n    header = obj.getHeader('content-type')\n  } else if (typeof obj.headers === 'object') {\n    // req-like\n    header = obj.headers && obj.headers['content-type']\n  }\n\n  if (typeof header !== 'string') {\n    throw new TypeError('content-type header is missing from object')\n  }\n\n  return header\n}\n\n/**\n * Quote a string if necessary.\n *\n * @param {string} val\n * @return {string}\n * @private\n */\n\nfunction qstring (val) {\n  var str = String(val)\n\n  // no need to quote tokens\n  if (TOKEN_REGEXP.test(str)) {\n    return str\n  }\n\n  if (str.length > 0 && !TEXT_REGEXP.test(str)) {\n    throw new TypeError('invalid parameter value')\n  }\n\n  return '\"' + str.replace(QUOTE_REGEXP, '\\\\$1') + '\"'\n}\n\n/**\n * Class to represent a content type.\n * @private\n */\nfunction ContentType (type) {\n  this.parameters = Object.create(null)\n  this.type = type\n}\n","/*!\n * cookies\n * Copyright(c) 2014 Jed Schmidt, http://jed.is/\n * Copyright(c) 2015-2016 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\nvar deprecate = require('depd')('cookies')\nvar Keygrip = require('keygrip')\nvar http = require('http')\nvar cache = {}\n\n/**\n * RegExp to match field-content in RFC 7230 sec 3.2\n *\n * field-content = field-vchar [ 1*( SP / HTAB ) field-vchar ]\n * field-vchar   = VCHAR / obs-text\n * obs-text      = %x80-FF\n */\n\nvar fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n\n/**\n * RegExp to match Same-Site cookie attribute value.\n */\n\nvar SAME_SITE_REGEXP = /^(?:lax|none|strict)$/i\n\nfunction Cookies(request, response, options) {\n  if (!(this instanceof Cookies)) return new Cookies(request, response, options)\n\n  this.secure = undefined\n  this.request = request\n  this.response = response\n\n  if (options) {\n    if (Array.isArray(options)) {\n      // array of key strings\n      deprecate('\"keys\" argument; provide using options {\"keys\": [...]}')\n      this.keys = new Keygrip(options)\n    } else if (options.constructor && options.constructor.name === 'Keygrip') {\n      // any keygrip constructor to allow different versions\n      deprecate('\"keys\" argument; provide using options {\"keys\": keygrip}')\n      this.keys = options\n    } else {\n      this.keys = Array.isArray(options.keys) ? new Keygrip(options.keys) : options.keys\n      this.secure = options.secure\n    }\n  }\n}\n\nCookies.prototype.get = function(name, opts) {\n  var sigName = name + \".sig\"\n    , header, match, value, remote, data, index\n    , signed = opts && opts.signed !== undefined ? opts.signed : !!this.keys\n\n  header = this.request.headers[\"cookie\"]\n  if (!header) return\n\n  match = header.match(getPattern(name))\n  if (!match) return\n\n  value = match[1]\n  if (!opts || !signed) return value\n\n  remote = this.get(sigName)\n  if (!remote) return\n\n  data = name + \"=\" + value\n  if (!this.keys) throw new Error('.keys required for signed cookies');\n  index = this.keys.index(data, remote)\n\n  if (index < 0) {\n    this.set(sigName, null, {path: \"/\", signed: false })\n  } else {\n    index && this.set(sigName, this.keys.sign(data), { signed: false })\n    return value\n  }\n};\n\nCookies.prototype.set = function(name, value, opts) {\n  var res = this.response\n    , req = this.request\n    , headers = res.getHeader(\"Set-Cookie\") || []\n    , secure = this.secure !== undefined ? !!this.secure : req.protocol === 'https' || req.connection.encrypted\n    , cookie = new Cookie(name, value, opts)\n    , signed = opts && opts.signed !== undefined ? opts.signed : !!this.keys\n\n  if (typeof headers == \"string\") headers = [headers]\n\n  if (!secure && opts && opts.secure) {\n    throw new Error('Cannot send secure cookie over unencrypted connection')\n  }\n\n  cookie.secure = opts && opts.secure !== undefined\n    ? opts.secure\n    : secure\n\n  if (opts && \"secureProxy\" in opts) {\n    deprecate('\"secureProxy\" option; use \"secure\" option, provide \"secure\" to constructor if needed')\n    cookie.secure = opts.secureProxy\n  }\n\n  pushCookie(headers, cookie)\n\n  if (opts && signed) {\n    if (!this.keys) throw new Error('.keys required for signed cookies');\n    cookie.value = this.keys.sign(cookie.toString())\n    cookie.name += \".sig\"\n    pushCookie(headers, cookie)\n  }\n\n  var setHeader = res.set ? http.OutgoingMessage.prototype.setHeader : res.setHeader\n  setHeader.call(res, 'Set-Cookie', headers)\n  return this\n};\n\nfunction Cookie(name, value, attrs) {\n  if (!fieldContentRegExp.test(name)) {\n    throw new TypeError('argument name is invalid');\n  }\n\n  if (value && !fieldContentRegExp.test(value)) {\n    throw new TypeError('argument value is invalid');\n  }\n\n  this.name = name\n  this.value = value || \"\"\n\n  for (var name in attrs) {\n    this[name] = attrs[name]\n  }\n\n  if (!this.value) {\n    this.expires = new Date(0)\n    this.maxAge = null\n  }\n\n  if (this.path && !fieldContentRegExp.test(this.path)) {\n    throw new TypeError('option path is invalid');\n  }\n\n  if (this.domain && !fieldContentRegExp.test(this.domain)) {\n    throw new TypeError('option domain is invalid');\n  }\n\n  if (this.sameSite && this.sameSite !== true && !SAME_SITE_REGEXP.test(this.sameSite)) {\n    throw new TypeError('option sameSite is invalid')\n  }\n}\n\nCookie.prototype.path = \"/\";\nCookie.prototype.expires = undefined;\nCookie.prototype.domain = undefined;\nCookie.prototype.httpOnly = true;\nCookie.prototype.sameSite = false;\nCookie.prototype.secure = false;\nCookie.prototype.overwrite = false;\n\nCookie.prototype.toString = function() {\n  return this.name + \"=\" + this.value\n};\n\nCookie.prototype.toHeader = function() {\n  var header = this.toString()\n\n  if (this.maxAge) this.expires = new Date(Date.now() + this.maxAge);\n\n  if (this.path     ) header += \"; path=\" + this.path\n  if (this.expires  ) header += \"; expires=\" + this.expires.toUTCString()\n  if (this.domain   ) header += \"; domain=\" + this.domain\n  if (this.sameSite ) header += \"; samesite=\" + (this.sameSite === true ? 'strict' : this.sameSite.toLowerCase())\n  if (this.secure   ) header += \"; secure\"\n  if (this.httpOnly ) header += \"; httponly\"\n\n  return header\n};\n\n// back-compat so maxage mirrors maxAge\nObject.defineProperty(Cookie.prototype, 'maxage', {\n  configurable: true,\n  enumerable: true,\n  get: function () { return this.maxAge },\n  set: function (val) { return this.maxAge = val }\n});\ndeprecate.property(Cookie.prototype, 'maxage', '\"maxage\"; use \"maxAge\" instead')\n\nfunction getPattern(name) {\n  if (cache[name]) return cache[name]\n\n  return cache[name] = new RegExp(\n    \"(?:^|;) *\" +\n    name.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\") +\n    \"=([^;]*)\"\n  )\n}\n\nfunction pushCookie(headers, cookie) {\n  if (cookie.overwrite) {\n    for (var i = headers.length - 1; i >= 0; i--) {\n      if (headers[i].indexOf(cookie.name + '=') === 0) {\n        headers.splice(i, 1)\n      }\n    }\n  }\n\n  headers.push(cookie.toHeader())\n}\n\nCookies.connect = Cookies.express = function(keys) {\n  return function(req, res, next) {\n    req.cookies = res.cookies = new Cookies(req, res, {\n      keys: keys\n    })\n\n    next()\n  }\n}\n\nCookies.Cookie = Cookie\n\nmodule.exports = Cookies\n","/*!\n * depd\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = depd\n\n/**\n * Create deprecate for namespace in caller.\n */\n\nfunction depd (namespace) {\n  if (!namespace) {\n    throw new TypeError('argument namespace is required')\n  }\n\n  function deprecate (message) {\n    // no-op in browser\n  }\n\n  deprecate._file = undefined\n  deprecate._ignored = true\n  deprecate._namespace = namespace\n  deprecate._traced = false\n  deprecate._warned = Object.create(null)\n\n  deprecate.function = wrapfunction\n  deprecate.property = wrapproperty\n\n  return deprecate\n}\n\n/**\n * Return a wrapped function in a deprecation message.\n *\n * This is a no-op version of the wrapper, which does nothing but call\n * validation.\n */\n\nfunction wrapfunction (fn, message) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('argument fn must be a function')\n  }\n\n  return fn\n}\n\n/**\n * Wrap property in a deprecation message.\n *\n * This is a no-op version of the wrapper, which does nothing but call\n * validation.\n */\n\nfunction wrapproperty (obj, prop, message) {\n  if (!obj || (typeof obj !== 'object' && typeof obj !== 'function')) {\n    throw new TypeError('argument obj must be object')\n  }\n\n  var descriptor = Object.getOwnPropertyDescriptor(obj, prop)\n\n  if (!descriptor) {\n    throw new TypeError('must call property on owner object')\n  }\n\n  if (!descriptor.configurable) {\n    throw new TypeError('property must be configurable')\n  }\n}\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","var pSlice = Array.prototype.slice;\nvar objectKeys = require('./lib/keys.js');\nvar isArguments = require('./lib/is_arguments.js');\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n","var supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n","exports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n","\n/**\n * Expose `Delegator`.\n */\n\nmodule.exports = Delegator;\n\n/**\n * Initialize a delegator.\n *\n * @param {Object} proto\n * @param {String} target\n * @api public\n */\n\nfunction Delegator(proto, target) {\n  if (!(this instanceof Delegator)) return new Delegator(proto, target);\n  this.proto = proto;\n  this.target = target;\n  this.methods = [];\n  this.getters = [];\n  this.setters = [];\n  this.fluents = [];\n}\n\n/**\n * Delegate method `name`.\n *\n * @param {String} name\n * @return {Delegator} self\n * @api public\n */\n\nDelegator.prototype.method = function(name){\n  var proto = this.proto;\n  var target = this.target;\n  this.methods.push(name);\n\n  proto[name] = function(){\n    return this[target][name].apply(this[target], arguments);\n  };\n\n  return this;\n};\n\n/**\n * Delegator accessor `name`.\n *\n * @param {String} name\n * @return {Delegator} self\n * @api public\n */\n\nDelegator.prototype.access = function(name){\n  return this.getter(name).setter(name);\n};\n\n/**\n * Delegator getter `name`.\n *\n * @param {String} name\n * @return {Delegator} self\n * @api public\n */\n\nDelegator.prototype.getter = function(name){\n  var proto = this.proto;\n  var target = this.target;\n  this.getters.push(name);\n\n  proto.__defineGetter__(name, function(){\n    return this[target][name];\n  });\n\n  return this;\n};\n\n/**\n * Delegator setter `name`.\n *\n * @param {String} name\n * @return {Delegator} self\n * @api public\n */\n\nDelegator.prototype.setter = function(name){\n  var proto = this.proto;\n  var target = this.target;\n  this.setters.push(name);\n\n  proto.__defineSetter__(name, function(val){\n    return this[target][name] = val;\n  });\n\n  return this;\n};\n\n/**\n * Delegator fluent accessor\n *\n * @param {String} name\n * @return {Delegator} self\n * @api public\n */\n\nDelegator.prototype.fluent = function (name) {\n  var proto = this.proto;\n  var target = this.target;\n  this.fluents.push(name);\n\n  proto[name] = function(val){\n    if ('undefined' != typeof val) {\n      this[target][name] = val;\n      return this;\n    } else {\n      return this[target][name];\n    }\n  };\n\n  return this;\n};\n","/*!\n * depd\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = depd\n\n/**\n * Create deprecate for namespace in caller.\n */\n\nfunction depd (namespace) {\n  if (!namespace) {\n    throw new TypeError('argument namespace is required')\n  }\n\n  function deprecate (message) {\n    // no-op in browser\n  }\n\n  deprecate._file = undefined\n  deprecate._ignored = true\n  deprecate._namespace = namespace\n  deprecate._traced = false\n  deprecate._warned = Object.create(null)\n\n  deprecate.function = wrapfunction\n  deprecate.property = wrapproperty\n\n  return deprecate\n}\n\n/**\n * Return a wrapped function in a deprecation message.\n *\n * This is a no-op version of the wrapper, which does nothing but call\n * validation.\n */\n\nfunction wrapfunction (fn, message) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('argument fn must be a function')\n  }\n\n  return fn\n}\n\n/**\n * Wrap property in a deprecation message.\n *\n * This is a no-op version of the wrapper, which does nothing but call\n * validation.\n */\n\nfunction wrapproperty (obj, prop, message) {\n  if (!obj || (typeof obj !== 'object' && typeof obj !== 'function')) {\n    throw new TypeError('argument obj must be object')\n  }\n\n  var descriptor = Object.getOwnPropertyDescriptor(obj, prop)\n\n  if (!descriptor) {\n    throw new TypeError('must call property on owner object')\n  }\n\n  if (!descriptor.configurable) {\n    throw new TypeError('property must be configurable')\n  }\n}\n","/*!\n * destroy\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2015-2022 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar EventEmitter = require('events').EventEmitter\nvar ReadStream = require('fs').ReadStream\nvar Stream = require('stream')\nvar Zlib = require('zlib')\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = destroy\n\n/**\n * Destroy the given stream, and optionally suppress any future `error` events.\n *\n * @param {object} stream\n * @param {boolean} suppress\n * @public\n */\n\nfunction destroy (stream, suppress) {\n  if (isFsReadStream(stream)) {\n    destroyReadStream(stream)\n  } else if (isZlibStream(stream)) {\n    destroyZlibStream(stream)\n  } else if (hasDestroy(stream)) {\n    stream.destroy()\n  }\n\n  if (isEventEmitter(stream) && suppress) {\n    stream.removeAllListeners('error')\n    stream.addListener('error', noop)\n  }\n\n  return stream\n}\n\n/**\n * Destroy a ReadStream.\n *\n * @param {object} stream\n * @private\n */\n\nfunction destroyReadStream (stream) {\n  stream.destroy()\n\n  if (typeof stream.close === 'function') {\n    // node.js core bug work-around\n    stream.on('open', onOpenClose)\n  }\n}\n\n/**\n * Close a Zlib stream.\n *\n * Zlib streams below Node.js 4.5.5 have a buggy implementation\n * of .close() when zlib encountered an error.\n *\n * @param {object} stream\n * @private\n */\n\nfunction closeZlibStream (stream) {\n  if (stream._hadError === true) {\n    var prop = stream._binding === null\n      ? '_binding'\n      : '_handle'\n\n    stream[prop] = {\n      close: function () { this[prop] = null }\n    }\n  }\n\n  stream.close()\n}\n\n/**\n * Destroy a Zlib stream.\n *\n * Zlib streams don't have a destroy function in Node.js 6. On top of that\n * simply calling destroy on a zlib stream in Node.js 8+ will result in a\n * memory leak. So until that is fixed, we need to call both close AND destroy.\n *\n * PR to fix memory leak: https://github.com/nodejs/node/pull/23734\n *\n * In Node.js 6+8, it's important that destroy is called before close as the\n * stream would otherwise emit the error 'zlib binding closed'.\n *\n * @param {object} stream\n * @private\n */\n\nfunction destroyZlibStream (stream) {\n  if (typeof stream.destroy === 'function') {\n    // node.js core bug work-around\n    // istanbul ignore if: node.js 0.8\n    if (stream._binding) {\n      // node.js < 0.10.0\n      stream.destroy()\n      if (stream._processing) {\n        stream._needDrain = true\n        stream.once('drain', onDrainClearBinding)\n      } else {\n        stream._binding.clear()\n      }\n    } else if (stream._destroy && stream._destroy !== Stream.Transform.prototype._destroy) {\n      // node.js >= 12, ^11.1.0, ^10.15.1\n      stream.destroy()\n    } else if (stream._destroy && typeof stream.close === 'function') {\n      // node.js 7, 8\n      stream.destroyed = true\n      stream.close()\n    } else {\n      // fallback\n      // istanbul ignore next\n      stream.destroy()\n    }\n  } else if (typeof stream.close === 'function') {\n    // node.js < 8 fallback\n    closeZlibStream(stream)\n  }\n}\n\n/**\n * Determine if stream has destroy.\n * @private\n */\n\nfunction hasDestroy (stream) {\n  return stream instanceof Stream &&\n    typeof stream.destroy === 'function'\n}\n\n/**\n * Determine if val is EventEmitter.\n * @private\n */\n\nfunction isEventEmitter (val) {\n  return val instanceof EventEmitter\n}\n\n/**\n * Determine if stream is fs.ReadStream stream.\n * @private\n */\n\nfunction isFsReadStream (stream) {\n  return stream instanceof ReadStream\n}\n\n/**\n * Determine if stream is Zlib stream.\n * @private\n */\n\nfunction isZlibStream (stream) {\n  return stream instanceof Zlib.Gzip ||\n    stream instanceof Zlib.Gunzip ||\n    stream instanceof Zlib.Deflate ||\n    stream instanceof Zlib.DeflateRaw ||\n    stream instanceof Zlib.Inflate ||\n    stream instanceof Zlib.InflateRaw ||\n    stream instanceof Zlib.Unzip\n}\n\n/**\n * No-op function.\n * @private\n */\n\nfunction noop () {}\n\n/**\n * On drain handler to clear binding.\n * @private\n */\n\n// istanbul ignore next: node.js 0.8\nfunction onDrainClearBinding () {\n  this._binding.clear()\n}\n\n/**\n * On open handler to close stream.\n * @private\n */\n\nfunction onOpenClose () {\n  if (typeof this.fd === 'number') {\n    // actually close down the fd\n    this.close()\n  }\n}\n","/*!\n * ee-first\n * Copyright(c) 2014 Jonathan Ong\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = first\n\n/**\n * Get the first event in a set of event emitters and event pairs.\n *\n * @param {array} stuff\n * @param {function} done\n * @public\n */\n\nfunction first(stuff, done) {\n  if (!Array.isArray(stuff))\n    throw new TypeError('arg must be an array of [ee, events...] arrays')\n\n  var cleanups = []\n\n  for (var i = 0; i < stuff.length; i++) {\n    var arr = stuff[i]\n\n    if (!Array.isArray(arr) || arr.length < 2)\n      throw new TypeError('each array member must be [ee, events...]')\n\n    var ee = arr[0]\n\n    for (var j = 1; j < arr.length; j++) {\n      var event = arr[j]\n      var fn = listener(event, callback)\n\n      // listen to the event\n      ee.on(event, fn)\n      // push this listener to the list of cleanups\n      cleanups.push({\n        ee: ee,\n        event: event,\n        fn: fn,\n      })\n    }\n  }\n\n  function callback() {\n    cleanup()\n    done.apply(null, arguments)\n  }\n\n  function cleanup() {\n    var x\n    for (var i = 0; i < cleanups.length; i++) {\n      x = cleanups[i]\n      x.ee.removeListener(x.event, x.fn)\n    }\n  }\n\n  function thunk(fn) {\n    done = fn\n  }\n\n  thunk.cancel = cleanup\n\n  return thunk\n}\n\n/**\n * Create the event listener.\n * @private\n */\n\nfunction listener(event, done) {\n  return function onevent(arg1) {\n    var args = new Array(arguments.length)\n    var ee = this\n    var err = event === 'error'\n      ? arg1\n      : null\n\n    // copy args to prevent arguments escaping scope\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i]\n    }\n\n    done(err, ee, event, args)\n  }\n}\n","/*!\n * encodeurl\n * Copyright(c) 2016 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = encodeUrl\n\n/**\n * RegExp to match non-URL code points, *after* encoding (i.e. not including \"%\")\n * and including invalid escape sequences.\n * @private\n */\n\nvar ENCODE_CHARS_REGEXP = /(?:[^\\x21\\x25\\x26-\\x3B\\x3D\\x3F-\\x5B\\x5D\\x5F\\x61-\\x7A\\x7E]|%(?:[^0-9A-Fa-f]|[0-9A-Fa-f][^0-9A-Fa-f]|$))+/g\n\n/**\n * RegExp to match unmatched surrogate pair.\n * @private\n */\n\nvar UNMATCHED_SURROGATE_PAIR_REGEXP = /(^|[^\\uD800-\\uDBFF])[\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF]([^\\uDC00-\\uDFFF]|$)/g\n\n/**\n * String to replace unmatched surrogate pair with.\n * @private\n */\n\nvar UNMATCHED_SURROGATE_PAIR_REPLACE = '$1\\uFFFD$2'\n\n/**\n * Encode a URL to a percent-encoded form, excluding already-encoded sequences.\n *\n * This function will take an already-encoded URL and encode all the non-URL\n * code points. This function will not encode the \"%\" character unless it is\n * not part of a valid sequence (`%20` will be left as-is, but `%foo` will\n * be encoded as `%25foo`).\n *\n * This encode is meant to be \"safe\" and does not throw errors. It will try as\n * hard as it can to properly encode the given URL, including replacing any raw,\n * unpaired surrogate pairs with the Unicode replacement character prior to\n * encoding.\n *\n * @param {string} url\n * @return {string}\n * @public\n */\n\nfunction encodeUrl (url) {\n  return String(url)\n    .replace(UNMATCHED_SURROGATE_PAIR_REGEXP, UNMATCHED_SURROGATE_PAIR_REPLACE)\n    .replace(ENCODE_CHARS_REGEXP, encodeURI)\n}\n","/*!\n * escape-html\n * Copyright(c) 2012-2013 TJ Holowaychuk\n * Copyright(c) 2015 Andreas Lubbe\n * Copyright(c) 2015 Tiancheng \"Timothy\" Gu\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module variables.\n * @private\n */\n\nvar matchHtmlRegExp = /[\"'&<>]/;\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = escapeHtml;\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {string} string The string to escape for inserting into HTML\n * @return {string}\n * @public\n */\n\nfunction escapeHtml(string) {\n  var str = '' + string;\n  var match = matchHtmlRegExp.exec(str);\n\n  if (!match) {\n    return str;\n  }\n\n  var escape;\n  var html = '';\n  var index = 0;\n  var lastIndex = 0;\n\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34: // \"\n        escape = '&quot;';\n        break;\n      case 38: // &\n        escape = '&amp;';\n        break;\n      case 39: // '\n        escape = '&#39;';\n        break;\n      case 60: // <\n        escape = '&lt;';\n        break;\n      case 62: // >\n        escape = '&gt;';\n        break;\n      default:\n        continue;\n    }\n\n    if (lastIndex !== index) {\n      html += str.substring(lastIndex, index);\n    }\n\n    lastIndex = index + 1;\n    html += escape;\n  }\n\n  return lastIndex !== index\n    ? html + str.substring(lastIndex, index)\n    : html;\n}\n","/*!\n * fresh\n * Copyright(c) 2012 TJ Holowaychuk\n * Copyright(c) 2016-2017 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * RegExp to check for no-cache token in Cache-Control.\n * @private\n */\n\nvar CACHE_CONTROL_NO_CACHE_REGEXP = /(?:^|,)\\s*?no-cache\\s*?(?:,|$)/\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = fresh\n\n/**\n * Check freshness of the response using request and response headers.\n *\n * @param {Object} reqHeaders\n * @param {Object} resHeaders\n * @return {Boolean}\n * @public\n */\n\nfunction fresh (reqHeaders, resHeaders) {\n  // fields\n  var modifiedSince = reqHeaders['if-modified-since']\n  var noneMatch = reqHeaders['if-none-match']\n\n  // unconditional request\n  if (!modifiedSince && !noneMatch) {\n    return false\n  }\n\n  // Always return stale when Cache-Control: no-cache\n  // to support end-to-end reload requests\n  // https://tools.ietf.org/html/rfc2616#section-14.9.4\n  var cacheControl = reqHeaders['cache-control']\n  if (cacheControl && CACHE_CONTROL_NO_CACHE_REGEXP.test(cacheControl)) {\n    return false\n  }\n\n  // if-none-match\n  if (noneMatch && noneMatch !== '*') {\n    var etag = resHeaders['etag']\n\n    if (!etag) {\n      return false\n    }\n\n    var etagStale = true\n    var matches = parseTokenList(noneMatch)\n    for (var i = 0; i < matches.length; i++) {\n      var match = matches[i]\n      if (match === etag || match === 'W/' + etag || 'W/' + match === etag) {\n        etagStale = false\n        break\n      }\n    }\n\n    if (etagStale) {\n      return false\n    }\n  }\n\n  // if-modified-since\n  if (modifiedSince) {\n    var lastModified = resHeaders['last-modified']\n    var modifiedStale = !lastModified || !(parseHttpDate(lastModified) <= parseHttpDate(modifiedSince))\n\n    if (modifiedStale) {\n      return false\n    }\n  }\n\n  return true\n}\n\n/**\n * Parse an HTTP Date into a number.\n *\n * @param {string} date\n * @private\n */\n\nfunction parseHttpDate (date) {\n  var timestamp = date && Date.parse(date)\n\n  // istanbul ignore next: guard against date.js Date.parse patching\n  return typeof timestamp === 'number'\n    ? timestamp\n    : NaN\n}\n\n/**\n * Parse a HTTP token list.\n *\n * @param {string} str\n * @private\n */\n\nfunction parseTokenList (str) {\n  var end = 0\n  var list = []\n  var start = 0\n\n  // gather tokens\n  for (var i = 0, len = str.length; i < len; i++) {\n    switch (str.charCodeAt(i)) {\n      case 0x20: /*   */\n        if (start === end) {\n          start = end = i + 1\n        }\n        break\n      case 0x2c: /* , */\n        list.push(str.substring(start, end))\n        start = end = i + 1\n        break\n      default:\n        end = i + 1\n        break\n    }\n  }\n\n  // final token\n  list.push(str.substring(start, end))\n\n  return list\n}\n","'use strict';\n\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (sym in obj) { return false; } // eslint-disable-line no-restricted-syntax, no-unreachable-loop\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\tvar descriptor = Object.getOwnPropertyDescriptor(obj, sym);\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","'use strict';\n\nvar hasSymbols = require('has-symbols/shams');\n\nmodule.exports = function hasToStringTagShams() {\n\treturn hasSymbols() && !!Symbol.toStringTag;\n};\n","var createError = require('http-errors')\nvar eql = require('deep-equal')\n\nmodule.exports = assert\n\nfunction assert (value, status, msg, opts) {\n  if (value) return\n  throw createError(status, msg, opts)\n}\n\nassert.fail = function (status, msg, opts) {\n  assert(false, status, msg, opts)\n}\n\nassert.equal = function (a, b, status, msg, opts) {\n  assert(a == b, status, msg, opts) // eslint-disable-line eqeqeq\n}\n\nassert.notEqual = function (a, b, status, msg, opts) {\n  assert(a != b, status, msg, opts) // eslint-disable-line eqeqeq\n}\n\nassert.ok = function (value, status, msg, opts) {\n  assert(value, status, msg, opts)\n}\n\nassert.strictEqual = function (a, b, status, msg, opts) {\n  assert(a === b, status, msg, opts)\n}\n\nassert.notStrictEqual = function (a, b, status, msg, opts) {\n  assert(a !== b, status, msg, opts)\n}\n\nassert.deepEqual = function (a, b, status, msg, opts) {\n  assert(eql(a, b), status, msg, opts)\n}\n\nassert.notDeepEqual = function (a, b, status, msg, opts) {\n  assert(!eql(a, b), status, msg, opts)\n}\n","/*!\n * http-errors\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2016 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar deprecate = require('depd')('http-errors')\nvar setPrototypeOf = require('setprototypeof')\nvar statuses = require('statuses')\nvar inherits = require('inherits')\nvar toIdentifier = require('toidentifier')\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = createError\nmodule.exports.HttpError = createHttpErrorConstructor()\nmodule.exports.isHttpError = createIsHttpErrorFunction(module.exports.HttpError)\n\n// Populate exports for all constructors\npopulateConstructorExports(module.exports, statuses.codes, module.exports.HttpError)\n\n/**\n * Get the code class of a status code.\n * @private\n */\n\nfunction codeClass (status) {\n  return Number(String(status).charAt(0) + '00')\n}\n\n/**\n * Create a new HTTP Error.\n *\n * @returns {Error}\n * @public\n */\n\nfunction createError () {\n  // so much arity going on ~_~\n  var err\n  var msg\n  var status = 500\n  var props = {}\n  for (var i = 0; i < arguments.length; i++) {\n    var arg = arguments[i]\n    if (arg instanceof Error) {\n      err = arg\n      status = err.status || err.statusCode || status\n      continue\n    }\n    switch (typeof arg) {\n      case 'string':\n        msg = arg\n        break\n      case 'number':\n        status = arg\n        if (i !== 0) {\n          deprecate('non-first-argument status code; replace with createError(' + arg + ', ...)')\n        }\n        break\n      case 'object':\n        props = arg\n        break\n    }\n  }\n\n  if (typeof status === 'number' && (status < 400 || status >= 600)) {\n    deprecate('non-error status code; use only 4xx or 5xx status codes')\n  }\n\n  if (typeof status !== 'number' ||\n    (!statuses[status] && (status < 400 || status >= 600))) {\n    status = 500\n  }\n\n  // constructor\n  var HttpError = createError[status] || createError[codeClass(status)]\n\n  if (!err) {\n    // create error\n    err = HttpError\n      ? new HttpError(msg)\n      : new Error(msg || statuses[status])\n    Error.captureStackTrace(err, createError)\n  }\n\n  if (!HttpError || !(err instanceof HttpError) || err.status !== status) {\n    // add properties to generic error\n    err.expose = status < 500\n    err.status = err.statusCode = status\n  }\n\n  for (var key in props) {\n    if (key !== 'status' && key !== 'statusCode') {\n      err[key] = props[key]\n    }\n  }\n\n  return err\n}\n\n/**\n * Create HTTP error abstract base class.\n * @private\n */\n\nfunction createHttpErrorConstructor () {\n  function HttpError () {\n    throw new TypeError('cannot construct abstract class')\n  }\n\n  inherits(HttpError, Error)\n\n  return HttpError\n}\n\n/**\n * Create a constructor for a client error.\n * @private\n */\n\nfunction createClientErrorConstructor (HttpError, name, code) {\n  var className = toClassName(name)\n\n  function ClientError (message) {\n    // create the error object\n    var msg = message != null ? message : statuses[code]\n    var err = new Error(msg)\n\n    // capture a stack trace to the construction point\n    Error.captureStackTrace(err, ClientError)\n\n    // adjust the [[Prototype]]\n    setPrototypeOf(err, ClientError.prototype)\n\n    // redefine the error message\n    Object.defineProperty(err, 'message', {\n      enumerable: true,\n      configurable: true,\n      value: msg,\n      writable: true\n    })\n\n    // redefine the error name\n    Object.defineProperty(err, 'name', {\n      enumerable: false,\n      configurable: true,\n      value: className,\n      writable: true\n    })\n\n    return err\n  }\n\n  inherits(ClientError, HttpError)\n  nameFunc(ClientError, className)\n\n  ClientError.prototype.status = code\n  ClientError.prototype.statusCode = code\n  ClientError.prototype.expose = true\n\n  return ClientError\n}\n\n/**\n * Create function to test is a value is a HttpError.\n * @private\n */\n\nfunction createIsHttpErrorFunction (HttpError) {\n  return function isHttpError (val) {\n    if (!val || typeof val !== 'object') {\n      return false\n    }\n\n    if (val instanceof HttpError) {\n      return true\n    }\n\n    return val instanceof Error &&\n      typeof val.expose === 'boolean' &&\n      typeof val.statusCode === 'number' && val.status === val.statusCode\n  }\n}\n\n/**\n * Create a constructor for a server error.\n * @private\n */\n\nfunction createServerErrorConstructor (HttpError, name, code) {\n  var className = toClassName(name)\n\n  function ServerError (message) {\n    // create the error object\n    var msg = message != null ? message : statuses[code]\n    var err = new Error(msg)\n\n    // capture a stack trace to the construction point\n    Error.captureStackTrace(err, ServerError)\n\n    // adjust the [[Prototype]]\n    setPrototypeOf(err, ServerError.prototype)\n\n    // redefine the error message\n    Object.defineProperty(err, 'message', {\n      enumerable: true,\n      configurable: true,\n      value: msg,\n      writable: true\n    })\n\n    // redefine the error name\n    Object.defineProperty(err, 'name', {\n      enumerable: false,\n      configurable: true,\n      value: className,\n      writable: true\n    })\n\n    return err\n  }\n\n  inherits(ServerError, HttpError)\n  nameFunc(ServerError, className)\n\n  ServerError.prototype.status = code\n  ServerError.prototype.statusCode = code\n  ServerError.prototype.expose = false\n\n  return ServerError\n}\n\n/**\n * Set the name of a function, if possible.\n * @private\n */\n\nfunction nameFunc (func, name) {\n  var desc = Object.getOwnPropertyDescriptor(func, 'name')\n\n  if (desc && desc.configurable) {\n    desc.value = name\n    Object.defineProperty(func, 'name', desc)\n  }\n}\n\n/**\n * Populate the exports object with constructors for every error class.\n * @private\n */\n\nfunction populateConstructorExports (exports, codes, HttpError) {\n  codes.forEach(function forEachCode (code) {\n    var CodeError\n    var name = toIdentifier(statuses[code])\n\n    switch (codeClass(code)) {\n      case 400:\n        CodeError = createClientErrorConstructor(HttpError, name, code)\n        break\n      case 500:\n        CodeError = createServerErrorConstructor(HttpError, name, code)\n        break\n    }\n\n    if (CodeError) {\n      // export the constructor\n      exports[code] = CodeError\n      exports[name] = CodeError\n    }\n  })\n\n  // backwards-compatibility\n  exports[\"I'mateapot\"] = deprecate.function(exports.ImATeapot,\n    '\"I\\'mateapot\"; use \"ImATeapot\" instead')\n}\n\n/**\n * Get a class name from a name identifier.\n * @private\n */\n\nfunction toClassName (name) {\n  return name.substr(-5) !== 'Error'\n    ? name + 'Error'\n    : name\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","'use strict';\n\nvar toStr = Object.prototype.toString;\nvar fnToStr = Function.prototype.toString;\nvar isFnRegex = /^\\s*(?:function)?\\*/;\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar getProto = Object.getPrototypeOf;\nvar getGeneratorFunc = function () { // eslint-disable-line consistent-return\n\tif (!hasToStringTag) {\n\t\treturn false;\n\t}\n\ttry {\n\t\treturn Function('return function*() {}')();\n\t} catch (e) {\n\t}\n};\nvar GeneratorFunction;\n\nmodule.exports = function isGeneratorFunction(fn) {\n\tif (typeof fn !== 'function') {\n\t\treturn false;\n\t}\n\tif (isFnRegex.test(fnToStr.call(fn))) {\n\t\treturn true;\n\t}\n\tif (!hasToStringTag) {\n\t\tvar str = toStr.call(fn);\n\t\treturn str === '[object GeneratorFunction]';\n\t}\n\tif (!getProto) {\n\t\treturn false;\n\t}\n\tif (typeof GeneratorFunction === 'undefined') {\n\t\tvar generatorFunc = getGeneratorFunc();\n\t\tGeneratorFunction = generatorFunc ? getProto(generatorFunc) : false;\n\t}\n\treturn getProto(fn) === GeneratorFunction;\n};\n","/*!\n * keygrip\n * Copyright(c) 2011-2014 Jed Schmidt\n * MIT Licensed\n */\n\n'use strict'\n\nvar compare = require('tsscmp')\nvar crypto = require(\"crypto\")\n  \nfunction Keygrip(keys, algorithm, encoding) {\n  if (!algorithm) algorithm = \"sha1\";\n  if (!encoding) encoding = \"base64\";\n  if (!(this instanceof Keygrip)) return new Keygrip(keys, algorithm, encoding)\n\n  if (!keys || !(0 in keys)) {\n    throw new Error(\"Keys must be provided.\")\n  }\n\n  function sign(data, key) {\n    return crypto\n      .createHmac(algorithm, key)\n      .update(data).digest(encoding)\n      .replace(/\\/|\\+|=/g, function(x) {\n        return ({ \"/\": \"_\", \"+\": \"-\", \"=\": \"\" })[x]\n      })\n  }\n\n  this.sign = function(data){ return sign(data, keys[0]) }\n\n  this.verify = function(data, digest) {\n    return this.index(data, digest) > -1\n  }\n\n  this.index = function(data, digest) {\n    for (var i = 0, l = keys.length; i < l; i++) {\n      if (compare(digest, sign(data, keys[i]))) {\n        return i\n      }\n    }\n\n    return -1\n  }\n}\n\nKeygrip.sign = Keygrip.verify = Keygrip.index = function() {\n  throw new Error(\"Usage: require('keygrip')(<array-of-keys>)\")\n}\n\nmodule.exports = Keygrip\n","'use strict'\n\n/**\n * Expose compositor.\n */\n\nmodule.exports = compose\n\n/**\n * Compose `middleware` returning\n * a fully valid middleware comprised\n * of all those which are passed.\n *\n * @param {Array} middleware\n * @return {Function}\n * @api public\n */\n\nfunction compose (middleware) {\n  if (!Array.isArray(middleware)) throw new TypeError('Middleware stack must be an array!')\n  for (const fn of middleware) {\n    if (typeof fn !== 'function') throw new TypeError('Middleware must be composed of functions!')\n  }\n\n  /**\n   * @param {Object} context\n   * @return {Promise}\n   * @api public\n   */\n\n  return function (context, next) {\n    // last called middleware #\n    let index = -1\n    return dispatch(0)\n    function dispatch (i) {\n      if (i <= index) return Promise.reject(new Error('next() called multiple times'))\n      index = i\n      let fn = middleware[i]\n      if (i === middleware.length) fn = next\n      if (!fn) return Promise.resolve()\n      try {\n        return Promise.resolve(fn(context, dispatch.bind(null, i + 1)));\n      } catch (err) {\n        return Promise.reject(err)\n      }\n    }\n  }\n}\n","'use strict'\n\n/**\n * Module dependencies.\n */\n\nconst co = require('co')\nconst compose = require('koa-compose')\n\n/**\n * Expose `convert()`.\n */\n\nmodule.exports = convert\n\n/**\n * Convert Koa legacy generator-based middleware\n * to modern promise-based middleware.\n *\n *\n * @api public\n * */\n\nfunction convert (mw) {\n  if (typeof mw !== 'function') {\n    throw new TypeError('middleware must be a function')\n  }\n\n  // assume it's Promise-based middleware\n  if (\n    mw.constructor.name !== 'GeneratorFunction' &&\n    mw.constructor.name !== 'AsyncGeneratorFunction'\n  ) {\n    return mw\n  }\n\n  const converted = function (ctx, next) {\n    return co.call(\n      ctx,\n      mw.call(\n        ctx,\n        (function * (next) { return yield next() })(next)\n      ))\n  }\n\n  converted._name = mw._name || mw.name\n  return converted\n}\n\n/**\n * Convert and compose multiple middleware\n * (could mix legacy and modern ones)\n * and return modern promise middleware.\n *\n *\n * @api public\n * */\n\n// convert.compose(mw, mw, mw)\n// convert.compose([mw, mw, mw])\nconvert.compose = function (arr) {\n  if (!Array.isArray(arr)) {\n    arr = Array.from(arguments)\n  }\n\n  return compose(arr.map(convert))\n}\n\n/**\n * Convert Koa modern promise-based middleware\n * to legacy generator-based middleware.\n *\n *\n * @api public\n * */\n\nconvert.back = function (mw) {\n  if (typeof mw !== 'function') {\n    throw new TypeError('middleware must be a function')\n  }\n\n  // assume it's generator middleware\n  if (mw.constructor.name === 'GeneratorFunction' || mw.constructor.name === 'AsyncGeneratorFunction') {\n    return mw\n  }\n\n  const converted = function * (next) {\n    const ctx = this\n    let called = false\n\n    yield mw(ctx, function () {\n      if (called) {\n        // guard against multiple next() calls\n        // https://github.com/koajs/compose/blob/4e3e96baf58b817d71bd44a8c0d78bb42623aa95/index.js#L36\n        throw new Error('next() called multiple times')\n      }\n\n      called = true\n      return co.call(ctx, next)\n    })\n  }\n\n  converted._name = mw._name || mw.name\n  return converted\n}\n","\n'use strict';\n\n/**\n * Module dependencies.\n */\n\nconst isGeneratorFunction = require('is-generator-function');\nconst debug = require('debug')('koa:application');\nconst onFinished = require('on-finished');\nconst assert = require('assert');\nconst response = require('./response');\nconst compose = require('koa-compose');\nconst context = require('./context');\nconst request = require('./request');\nconst statuses = require('statuses');\nconst Emitter = require('events');\nconst util = require('util');\nconst Stream = require('stream');\nconst http = require('http');\nconst only = require('only');\nconst convert = require('koa-convert');\nconst deprecate = require('depd')('koa');\nconst { HttpError } = require('http-errors');\n\n/**\n * Expose `Application` class.\n * Inherits from `Emitter.prototype`.\n */\n\nmodule.exports = class Application extends Emitter {\n  /**\n   * Initialize a new `Application`.\n   *\n   * @api public\n   */\n\n  /**\n    *\n    * @param {object} [options] Application options\n    * @param {string} [options.env='development'] Environment\n    * @param {string[]} [options.keys] Signed cookie keys\n    * @param {boolean} [options.proxy] Trust proxy headers\n    * @param {number} [options.subdomainOffset] Subdomain offset\n    * @param {string} [options.proxyIpHeader] Proxy IP header, defaults to X-Forwarded-For\n    * @param {number} [options.maxIpsCount] Max IPs read from proxy IP header, default to 0 (means infinity)\n    *\n    */\n\n  constructor(options) {\n    super();\n    options = options || {};\n    this.proxy = options.proxy || false;\n    this.subdomainOffset = options.subdomainOffset || 2;\n    this.proxyIpHeader = options.proxyIpHeader || 'X-Forwarded-For';\n    this.maxIpsCount = options.maxIpsCount || 0;\n    this.env = options.env || process.env.NODE_ENV || 'development';\n    if (options.keys) this.keys = options.keys;\n    this.middleware = [];\n    this.context = Object.create(context);\n    this.request = Object.create(request);\n    this.response = Object.create(response);\n    // util.inspect.custom support for node 6+\n    /* istanbul ignore else */\n    if (util.inspect.custom) {\n      this[util.inspect.custom] = this.inspect;\n    }\n    if (options.asyncLocalStorage) {\n      const { AsyncLocalStorage } = require('async_hooks');\n      assert(AsyncLocalStorage, 'Requires node 12.17.0 or higher to enable asyncLocalStorage');\n      this.ctxStorage = new AsyncLocalStorage();\n      this.use(this.createAsyncCtxStorageMiddleware());\n    }\n  }\n\n  /**\n   * Shorthand for:\n   *\n   *    http.createServer(app.callback()).listen(...)\n   *\n   * @param {Mixed} ...\n   * @return {Server}\n   * @api public\n   */\n\n  listen(...args) {\n    debug('listen');\n    const server = http.createServer(this.callback());\n    return server.listen(...args);\n  }\n\n  /**\n   * Return JSON representation.\n   * We only bother showing settings.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  toJSON() {\n    return only(this, [\n      'subdomainOffset',\n      'proxy',\n      'env'\n    ]);\n  }\n\n  /**\n   * Inspect implementation.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  inspect() {\n    return this.toJSON();\n  }\n\n  /**\n   * Use the given middleware `fn`.\n   *\n   * Old-style middleware will be converted.\n   *\n   * @param {Function} fn\n   * @return {Application} self\n   * @api public\n   */\n\n  use(fn) {\n    if (typeof fn !== 'function') throw new TypeError('middleware must be a function!');\n    if (isGeneratorFunction(fn)) {\n      deprecate('Support for generators will be removed in v3. ' +\n                'See the documentation for examples of how to convert old middleware ' +\n                'https://github.com/koajs/koa/blob/master/docs/migration.md');\n      fn = convert(fn);\n    }\n    debug('use %s', fn._name || fn.name || '-');\n    this.middleware.push(fn);\n    return this;\n  }\n\n  /**\n   * Return a request handler callback\n   * for node's native http server.\n   *\n   * @return {Function}\n   * @api public\n   */\n\n  callback() {\n    const fn = compose(this.middleware);\n\n    if (!this.listenerCount('error')) this.on('error', this.onerror);\n\n    const handleRequest = (req, res) => {\n      const ctx = this.createContext(req, res);\n      return this.handleRequest(ctx, fn);\n    };\n\n    return handleRequest;\n  }\n\n  /**\n   * return currnect contenxt from async local storage\n   */\n  get currentContext() {\n    if (this.ctxStorage) return this.ctxStorage.getStore();\n  }\n\n  /**\n   * Handle request in callback.\n   *\n   * @api private\n   */\n\n  handleRequest(ctx, fnMiddleware) {\n    const res = ctx.res;\n    res.statusCode = 404;\n    const onerror = err => ctx.onerror(err);\n    const handleResponse = () => respond(ctx);\n    onFinished(res, onerror);\n    return fnMiddleware(ctx).then(handleResponse).catch(onerror);\n  }\n\n  /**\n   * Initialize a new context.\n   *\n   * @api private\n   */\n\n  createContext(req, res) {\n    const context = Object.create(this.context);\n    const request = context.request = Object.create(this.request);\n    const response = context.response = Object.create(this.response);\n    context.app = request.app = response.app = this;\n    context.req = request.req = response.req = req;\n    context.res = request.res = response.res = res;\n    request.ctx = response.ctx = context;\n    request.response = response;\n    response.request = request;\n    context.originalUrl = request.originalUrl = req.url;\n    context.state = {};\n    return context;\n  }\n\n  /**\n   * Default error handler.\n   *\n   * @param {Error} err\n   * @api private\n   */\n\n  onerror(err) {\n    // When dealing with cross-globals a normal `instanceof` check doesn't work properly.\n    // See https://github.com/koajs/koa/issues/1466\n    // We can probably remove it once jest fixes https://github.com/facebook/jest/issues/2549.\n    const isNativeError =\n      Object.prototype.toString.call(err) === '[object Error]' ||\n      err instanceof Error;\n    if (!isNativeError) throw new TypeError(util.format('non-error thrown: %j', err));\n\n    if (404 === err.status || err.expose) return;\n    if (this.silent) return;\n\n    const msg = err.stack || err.toString();\n    console.error(`\\n${msg.replace(/^/gm, '  ')}\\n`);\n  }\n\n  /**\n   * Help TS users comply to CommonJS, ESM, bundler mismatch.\n   * @see https://github.com/koajs/koa/issues/1513\n   */\n\n  static get default() {\n    return Application;\n  }\n\n  createAsyncCtxStorageMiddleware() {\n    const app = this;\n    return async function asyncCtxStorage(ctx, next) {\n      await app.ctxStorage.run(ctx, async() => {\n        return await next();\n      });\n    };\n  }\n};\n\n/**\n * Response helper.\n */\n\nfunction respond(ctx) {\n  // allow bypassing koa\n  if (false === ctx.respond) return;\n\n  if (!ctx.writable) return;\n\n  const res = ctx.res;\n  let body = ctx.body;\n  const code = ctx.status;\n\n  // ignore body\n  if (statuses.empty[code]) {\n    // strip headers\n    ctx.body = null;\n    return res.end();\n  }\n\n  if ('HEAD' === ctx.method) {\n    if (!res.headersSent && !ctx.response.has('Content-Length')) {\n      const { length } = ctx.response;\n      if (Number.isInteger(length)) ctx.length = length;\n    }\n    return res.end();\n  }\n\n  // status body\n  if (null == body) {\n    if (ctx.response._explicitNullBody) {\n      ctx.response.remove('Content-Type');\n      ctx.response.remove('Transfer-Encoding');\n      return res.end();\n    }\n    if (ctx.req.httpVersionMajor >= 2) {\n      body = String(code);\n    } else {\n      body = ctx.message || String(code);\n    }\n    if (!res.headersSent) {\n      ctx.type = 'text';\n      ctx.length = Buffer.byteLength(body);\n    }\n    return res.end(body);\n  }\n\n  // responses\n  if (Buffer.isBuffer(body)) return res.end(body);\n  if ('string' === typeof body) return res.end(body);\n  if (body instanceof Stream) return body.pipe(res);\n\n  // body: json\n  body = JSON.stringify(body);\n  if (!res.headersSent) {\n    ctx.length = Buffer.byteLength(body);\n  }\n  res.end(body);\n}\n\n/**\n * Make HttpError available to consumers of the library so that consumers don't\n * have a direct dependency upon `http-errors`\n */\n\nmodule.exports.HttpError = HttpError;\n","\n'use strict';\n\n/**\n * Module dependencies.\n */\n\nconst util = require('util');\nconst createError = require('http-errors');\nconst httpAssert = require('http-assert');\nconst delegate = require('delegates');\nconst statuses = require('statuses');\nconst Cookies = require('cookies');\n\nconst COOKIES = Symbol('context#cookies');\n\n/**\n * Context prototype.\n */\n\nconst proto = module.exports = {\n\n  /**\n   * util.inspect() implementation, which\n   * just returns the JSON output.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  inspect() {\n    if (this === proto) return this;\n    return this.toJSON();\n  },\n\n  /**\n   * Return JSON representation.\n   *\n   * Here we explicitly invoke .toJSON() on each\n   * object, as iteration will otherwise fail due\n   * to the getters and cause utilities such as\n   * clone() to fail.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  toJSON() {\n    return {\n      request: this.request.toJSON(),\n      response: this.response.toJSON(),\n      app: this.app.toJSON(),\n      originalUrl: this.originalUrl,\n      req: '<original node req>',\n      res: '<original node res>',\n      socket: '<original node socket>'\n    };\n  },\n\n  /**\n   * Similar to .throw(), adds assertion.\n   *\n   *    this.assert(this.user, 401, 'Please login!');\n   *\n   * See: https://github.com/jshttp/http-assert\n   *\n   * @param {Mixed} test\n   * @param {Number} status\n   * @param {String} message\n   * @api public\n   */\n\n  assert: httpAssert,\n\n  /**\n   * Throw an error with `status` (default 500) and\n   * `msg`. Note that these are user-level\n   * errors, and the message may be exposed to the client.\n   *\n   *    this.throw(403)\n   *    this.throw(400, 'name required')\n   *    this.throw('something exploded')\n   *    this.throw(new Error('invalid'))\n   *    this.throw(400, new Error('invalid'))\n   *\n   * See: https://github.com/jshttp/http-errors\n   *\n   * Note: `status` should only be passed as the first parameter.\n   *\n   * @param {String|Number|Error} err, msg or status\n   * @param {String|Number|Error} [err, msg or status]\n   * @param {Object} [props]\n   * @api public\n   */\n\n  throw(...args) {\n    throw createError(...args);\n  },\n\n  /**\n   * Default error handling.\n   *\n   * @param {Error} err\n   * @api private\n   */\n\n  onerror(err) {\n    // don't do anything if there is no error.\n    // this allows you to pass `this.onerror`\n    // to node-style callbacks.\n    if (null == err) return;\n\n    // When dealing with cross-globals a normal `instanceof` check doesn't work properly.\n    // See https://github.com/koajs/koa/issues/1466\n    // We can probably remove it once jest fixes https://github.com/facebook/jest/issues/2549.\n    const isNativeError =\n      Object.prototype.toString.call(err) === '[object Error]' ||\n      err instanceof Error;\n    if (!isNativeError) err = new Error(util.format('non-error thrown: %j', err));\n\n    let headerSent = false;\n    if (this.headerSent || !this.writable) {\n      headerSent = err.headerSent = true;\n    }\n\n    // delegate\n    this.app.emit('error', err, this);\n\n    // nothing we can do here other\n    // than delegate to the app-level\n    // handler and log.\n    if (headerSent) {\n      return;\n    }\n\n    const { res } = this;\n\n    // first unset all headers\n    /* istanbul ignore else */\n    if (typeof res.getHeaderNames === 'function') {\n      res.getHeaderNames().forEach(name => res.removeHeader(name));\n    } else {\n      res._headers = {}; // Node < 7.7\n    }\n\n    // then set those specified\n    this.set(err.headers);\n\n    // force text/plain\n    this.type = 'text';\n\n    let statusCode = err.status || err.statusCode;\n\n    // ENOENT support\n    if ('ENOENT' === err.code) statusCode = 404;\n\n    // default to 500\n    if ('number' !== typeof statusCode || !statuses[statusCode]) statusCode = 500;\n\n    // respond\n    const code = statuses[statusCode];\n    const msg = err.expose ? err.message : code;\n    this.status = err.status = statusCode;\n    this.length = Buffer.byteLength(msg);\n    res.end(msg);\n  },\n\n  get cookies() {\n    if (!this[COOKIES]) {\n      this[COOKIES] = new Cookies(this.req, this.res, {\n        keys: this.app.keys,\n        secure: this.request.secure\n      });\n    }\n    return this[COOKIES];\n  },\n\n  set cookies(_cookies) {\n    this[COOKIES] = _cookies;\n  }\n};\n\n/**\n * Custom inspection implementation for newer Node.js versions.\n *\n * @return {Object}\n * @api public\n */\n\n/* istanbul ignore else */\nif (util.inspect.custom) {\n  module.exports[util.inspect.custom] = module.exports.inspect;\n}\n\n/**\n * Response delegation.\n */\n\ndelegate(proto, 'response')\n  .method('attachment')\n  .method('redirect')\n  .method('remove')\n  .method('vary')\n  .method('has')\n  .method('set')\n  .method('append')\n  .method('flushHeaders')\n  .access('status')\n  .access('message')\n  .access('body')\n  .access('length')\n  .access('type')\n  .access('lastModified')\n  .access('etag')\n  .getter('headerSent')\n  .getter('writable');\n\n/**\n * Request delegation.\n */\n\ndelegate(proto, 'request')\n  .method('acceptsLanguages')\n  .method('acceptsEncodings')\n  .method('acceptsCharsets')\n  .method('accepts')\n  .method('get')\n  .method('is')\n  .access('querystring')\n  .access('idempotent')\n  .access('socket')\n  .access('search')\n  .access('method')\n  .access('query')\n  .access('path')\n  .access('url')\n  .access('accept')\n  .getter('origin')\n  .getter('href')\n  .getter('subdomains')\n  .getter('protocol')\n  .getter('host')\n  .getter('hostname')\n  .getter('URL')\n  .getter('header')\n  .getter('headers')\n  .getter('secure')\n  .getter('stale')\n  .getter('fresh')\n  .getter('ips')\n  .getter('ip');\n","\n'use strict';\n\n/**\n * Module dependencies.\n */\n\nconst URL = require('url').URL;\nconst net = require('net');\nconst accepts = require('accepts');\nconst contentType = require('content-type');\nconst stringify = require('url').format;\nconst parse = require('parseurl');\nconst qs = require('querystring');\nconst typeis = require('type-is');\nconst fresh = require('fresh');\nconst only = require('only');\nconst util = require('util');\n\nconst IP = Symbol('context#ip');\n\n/**\n * Prototype.\n */\n\nmodule.exports = {\n\n  /**\n   * Return request header.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  get header() {\n    return this.req.headers;\n  },\n\n  /**\n   * Set request header.\n   *\n   * @api public\n   */\n\n  set header(val) {\n    this.req.headers = val;\n  },\n\n  /**\n   * Return request header, alias as request.header\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  get headers() {\n    return this.req.headers;\n  },\n\n  /**\n   * Set request header, alias as request.header\n   *\n   * @api public\n   */\n\n  set headers(val) {\n    this.req.headers = val;\n  },\n\n  /**\n   * Get request URL.\n   *\n   * @return {String}\n   * @api public\n   */\n\n  get url() {\n    return this.req.url;\n  },\n\n  /**\n   * Set request URL.\n   *\n   * @api public\n   */\n\n  set url(val) {\n    this.req.url = val;\n  },\n\n  /**\n   * Get origin of URL.\n   *\n   * @return {String}\n   * @api public\n   */\n\n  get origin() {\n    return `${this.protocol}://${this.host}`;\n  },\n\n  /**\n   * Get full request URL.\n   *\n   * @return {String}\n   * @api public\n   */\n\n  get href() {\n    // support: `GET http://example.com/foo`\n    if (/^https?:\\/\\//i.test(this.originalUrl)) return this.originalUrl;\n    return this.origin + this.originalUrl;\n  },\n\n  /**\n   * Get request method.\n   *\n   * @return {String}\n   * @api public\n   */\n\n  get method() {\n    return this.req.method;\n  },\n\n  /**\n   * Set request method.\n   *\n   * @param {String} val\n   * @api public\n   */\n\n  set method(val) {\n    this.req.method = val;\n  },\n\n  /**\n   * Get request pathname.\n   *\n   * @return {String}\n   * @api public\n   */\n\n  get path() {\n    return parse(this.req).pathname;\n  },\n\n  /**\n   * Set pathname, retaining the query string when present.\n   *\n   * @param {String} path\n   * @api public\n   */\n\n  set path(path) {\n    const url = parse(this.req);\n    if (url.pathname === path) return;\n\n    url.pathname = path;\n    url.path = null;\n\n    this.url = stringify(url);\n  },\n\n  /**\n   * Get parsed query string.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  get query() {\n    const str = this.querystring;\n    const c = this._querycache = this._querycache || {};\n    return c[str] || (c[str] = qs.parse(str));\n  },\n\n  /**\n   * Set query string as an object.\n   *\n   * @param {Object} obj\n   * @api public\n   */\n\n  set query(obj) {\n    this.querystring = qs.stringify(obj);\n  },\n\n  /**\n   * Get query string.\n   *\n   * @return {String}\n   * @api public\n   */\n\n  get querystring() {\n    if (!this.req) return '';\n    return parse(this.req).query || '';\n  },\n\n  /**\n   * Set query string.\n   *\n   * @param {String} str\n   * @api public\n   */\n\n  set querystring(str) {\n    const url = parse(this.req);\n    if (url.search === `?${str}`) return;\n\n    url.search = str;\n    url.path = null;\n\n    this.url = stringify(url);\n  },\n\n  /**\n   * Get the search string. Same as the query string\n   * except it includes the leading ?.\n   *\n   * @return {String}\n   * @api public\n   */\n\n  get search() {\n    if (!this.querystring) return '';\n    return `?${this.querystring}`;\n  },\n\n  /**\n   * Set the search string. Same as\n   * request.querystring= but included for ubiquity.\n   *\n   * @param {String} str\n   * @api public\n   */\n\n  set search(str) {\n    this.querystring = str;\n  },\n\n  /**\n   * Parse the \"Host\" header field host\n   * and support X-Forwarded-Host when a\n   * proxy is enabled.\n   *\n   * @return {String} hostname:port\n   * @api public\n   */\n\n  get host() {\n    const proxy = this.app.proxy;\n    let host = proxy && this.get('X-Forwarded-Host');\n    if (!host) {\n      if (this.req.httpVersionMajor >= 2) host = this.get(':authority');\n      if (!host) host = this.get('Host');\n    }\n    if (!host) return '';\n    return host.split(/\\s*,\\s*/, 1)[0];\n  },\n\n  /**\n   * Parse the \"Host\" header field hostname\n   * and support X-Forwarded-Host when a\n   * proxy is enabled.\n   *\n   * @return {String} hostname\n   * @api public\n   */\n\n  get hostname() {\n    const host = this.host;\n    if (!host) return '';\n    if ('[' === host[0]) return this.URL.hostname || ''; // IPv6\n    return host.split(':', 1)[0];\n  },\n\n  /**\n   * Get WHATWG parsed URL.\n   * Lazily memoized.\n   *\n   * @return {URL|Object}\n   * @api public\n   */\n\n  get URL() {\n    /* istanbul ignore else */\n    if (!this.memoizedURL) {\n      const originalUrl = this.originalUrl || ''; // avoid undefined in template string\n      try {\n        this.memoizedURL = new URL(`${this.origin}${originalUrl}`);\n      } catch (err) {\n        this.memoizedURL = Object.create(null);\n      }\n    }\n    return this.memoizedURL;\n  },\n\n  /**\n   * Check if the request is fresh, aka\n   * Last-Modified and/or the ETag\n   * still match.\n   *\n   * @return {Boolean}\n   * @api public\n   */\n\n  get fresh() {\n    const method = this.method;\n    const s = this.ctx.status;\n\n    // GET or HEAD for weak freshness validation only\n    if ('GET' !== method && 'HEAD' !== method) return false;\n\n    // 2xx or 304 as per rfc2616 14.26\n    if ((s >= 200 && s < 300) || 304 === s) {\n      return fresh(this.header, this.response.header);\n    }\n\n    return false;\n  },\n\n  /**\n   * Check if the request is stale, aka\n   * \"Last-Modified\" and / or the \"ETag\" for the\n   * resource has changed.\n   *\n   * @return {Boolean}\n   * @api public\n   */\n\n  get stale() {\n    return !this.fresh;\n  },\n\n  /**\n   * Check if the request is idempotent.\n   *\n   * @return {Boolean}\n   * @api public\n   */\n\n  get idempotent() {\n    const methods = ['GET', 'HEAD', 'PUT', 'DELETE', 'OPTIONS', 'TRACE'];\n    return !!~methods.indexOf(this.method);\n  },\n\n  /**\n   * Return the request socket.\n   *\n   * @return {Connection}\n   * @api public\n   */\n\n  get socket() {\n    return this.req.socket;\n  },\n\n  /**\n   * Get the charset when present or undefined.\n   *\n   * @return {String}\n   * @api public\n   */\n\n  get charset() {\n    try {\n      const { parameters } = contentType.parse(this.req);\n      return parameters.charset || '';\n    } catch (e) {\n      return '';\n    }\n  },\n\n  /**\n   * Return parsed Content-Length when present.\n   *\n   * @return {Number}\n   * @api public\n   */\n\n  get length() {\n    const len = this.get('Content-Length');\n    if (len === '') return;\n    return ~~len;\n  },\n\n  /**\n   * Return the protocol string \"http\" or \"https\"\n   * when requested with TLS. When the proxy setting\n   * is enabled the \"X-Forwarded-Proto\" header\n   * field will be trusted. If you're running behind\n   * a reverse proxy that supplies https for you this\n   * may be enabled.\n   *\n   * @return {String}\n   * @api public\n   */\n\n  get protocol() {\n    if (this.socket.encrypted) return 'https';\n    if (!this.app.proxy) return 'http';\n    const proto = this.get('X-Forwarded-Proto');\n    return proto ? proto.split(/\\s*,\\s*/, 1)[0] : 'http';\n  },\n\n  /**\n   * Shorthand for:\n   *\n   *    this.protocol == 'https'\n   *\n   * @return {Boolean}\n   * @api public\n   */\n\n  get secure() {\n    return 'https' === this.protocol;\n  },\n\n  /**\n   * When `app.proxy` is `true`, parse\n   * the \"X-Forwarded-For\" ip address list.\n   *\n   * For example if the value was \"client, proxy1, proxy2\"\n   * you would receive the array `[\"client\", \"proxy1\", \"proxy2\"]`\n   * where \"proxy2\" is the furthest down-stream.\n   *\n   * @return {Array}\n   * @api public\n   */\n\n  get ips() {\n    const proxy = this.app.proxy;\n    const val = this.get(this.app.proxyIpHeader);\n    let ips = proxy && val\n      ? val.split(/\\s*,\\s*/)\n      : [];\n    if (this.app.maxIpsCount > 0) {\n      ips = ips.slice(-this.app.maxIpsCount);\n    }\n    return ips;\n  },\n\n  /**\n   * Return request's remote address\n   * When `app.proxy` is `true`, parse\n   * the \"X-Forwarded-For\" ip address list and return the first one\n   *\n   * @return {String}\n   * @api public\n   */\n\n  get ip() {\n    if (!this[IP]) {\n      this[IP] = this.ips[0] || this.socket.remoteAddress || '';\n    }\n    return this[IP];\n  },\n\n  set ip(_ip) {\n    this[IP] = _ip;\n  },\n\n  /**\n   * Return subdomains as an array.\n   *\n   * Subdomains are the dot-separated parts of the host before the main domain\n   * of the app. By default, the domain of the app is assumed to be the last two\n   * parts of the host. This can be changed by setting `app.subdomainOffset`.\n   *\n   * For example, if the domain is \"tobi.ferrets.example.com\":\n   * If `app.subdomainOffset` is not set, this.subdomains is\n   * `[\"ferrets\", \"tobi\"]`.\n   * If `app.subdomainOffset` is 3, this.subdomains is `[\"tobi\"]`.\n   *\n   * @return {Array}\n   * @api public\n   */\n\n  get subdomains() {\n    const offset = this.app.subdomainOffset;\n    const hostname = this.hostname;\n    if (net.isIP(hostname)) return [];\n    return hostname\n      .split('.')\n      .reverse()\n      .slice(offset);\n  },\n\n  /**\n   * Get accept object.\n   * Lazily memoized.\n   *\n   * @return {Object}\n   * @api private\n   */\n\n  get accept() {\n    return this._accept || (this._accept = accepts(this.req));\n  },\n\n  /**\n   * Set accept object.\n   *\n   * @param {Object}\n   * @api private\n   */\n\n  set accept(obj) {\n    this._accept = obj;\n  },\n\n  /**\n   * Check if the given `type(s)` is acceptable, returning\n   * the best match when true, otherwise `false`, in which\n   * case you should respond with 406 \"Not Acceptable\".\n   *\n   * The `type` value may be a single mime type string\n   * such as \"application/json\", the extension name\n   * such as \"json\" or an array `[\"json\", \"html\", \"text/plain\"]`. When a list\n   * or array is given the _best_ match, if any is returned.\n   *\n   * Examples:\n   *\n   *     // Accept: text/html\n   *     this.accepts('html');\n   *     // => \"html\"\n   *\n   *     // Accept: text/*, application/json\n   *     this.accepts('html');\n   *     // => \"html\"\n   *     this.accepts('text/html');\n   *     // => \"text/html\"\n   *     this.accepts('json', 'text');\n   *     // => \"json\"\n   *     this.accepts('application/json');\n   *     // => \"application/json\"\n   *\n   *     // Accept: text/*, application/json\n   *     this.accepts('image/png');\n   *     this.accepts('png');\n   *     // => false\n   *\n   *     // Accept: text/*;q=.5, application/json\n   *     this.accepts(['html', 'json']);\n   *     this.accepts('html', 'json');\n   *     // => \"json\"\n   *\n   * @param {String|Array} type(s)...\n   * @return {String|Array|false}\n   * @api public\n   */\n\n  accepts(...args) {\n    return this.accept.types(...args);\n  },\n\n  /**\n   * Return accepted encodings or best fit based on `encodings`.\n   *\n   * Given `Accept-Encoding: gzip, deflate`\n   * an array sorted by quality is returned:\n   *\n   *     ['gzip', 'deflate']\n   *\n   * @param {String|Array} encoding(s)...\n   * @return {String|Array}\n   * @api public\n   */\n\n  acceptsEncodings(...args) {\n    return this.accept.encodings(...args);\n  },\n\n  /**\n   * Return accepted charsets or best fit based on `charsets`.\n   *\n   * Given `Accept-Charset: utf-8, iso-8859-1;q=0.2, utf-7;q=0.5`\n   * an array sorted by quality is returned:\n   *\n   *     ['utf-8', 'utf-7', 'iso-8859-1']\n   *\n   * @param {String|Array} charset(s)...\n   * @return {String|Array}\n   * @api public\n   */\n\n  acceptsCharsets(...args) {\n    return this.accept.charsets(...args);\n  },\n\n  /**\n   * Return accepted languages or best fit based on `langs`.\n   *\n   * Given `Accept-Language: en;q=0.8, es, pt`\n   * an array sorted by quality is returned:\n   *\n   *     ['es', 'pt', 'en']\n   *\n   * @param {String|Array} lang(s)...\n   * @return {Array|String}\n   * @api public\n   */\n\n  acceptsLanguages(...args) {\n    return this.accept.languages(...args);\n  },\n\n  /**\n   * Check if the incoming request contains the \"Content-Type\"\n   * header field and if it contains any of the given mime `type`s.\n   * If there is no request body, `null` is returned.\n   * If there is no content type, `false` is returned.\n   * Otherwise, it returns the first `type` that matches.\n   *\n   * Examples:\n   *\n   *     // With Content-Type: text/html; charset=utf-8\n   *     this.is('html'); // => 'html'\n   *     this.is('text/html'); // => 'text/html'\n   *     this.is('text/*', 'application/json'); // => 'text/html'\n   *\n   *     // When Content-Type is application/json\n   *     this.is('json', 'urlencoded'); // => 'json'\n   *     this.is('application/json'); // => 'application/json'\n   *     this.is('html', 'application/*'); // => 'application/json'\n   *\n   *     this.is('html'); // => false\n   *\n   * @param {String|String[]} [type]\n   * @param {String[]} [types]\n   * @return {String|false|null}\n   * @api public\n   */\n\n  is(type, ...types) {\n    return typeis(this.req, type, ...types);\n  },\n\n  /**\n   * Return the request mime type void of\n   * parameters such as \"charset\".\n   *\n   * @return {String}\n   * @api public\n   */\n\n  get type() {\n    const type = this.get('Content-Type');\n    if (!type) return '';\n    return type.split(';')[0];\n  },\n\n  /**\n   * Return request header.\n   *\n   * The `Referrer` header field is special-cased,\n   * both `Referrer` and `Referer` are interchangeable.\n   *\n   * Examples:\n   *\n   *     this.get('Content-Type');\n   *     // => \"text/plain\"\n   *\n   *     this.get('content-type');\n   *     // => \"text/plain\"\n   *\n   *     this.get('Something');\n   *     // => ''\n   *\n   * @param {String} field\n   * @return {String}\n   * @api public\n   */\n\n  get(field) {\n    const req = this.req;\n    switch (field = field.toLowerCase()) {\n      case 'referer':\n      case 'referrer':\n        return req.headers.referrer || req.headers.referer || '';\n      default:\n        return req.headers[field] || '';\n    }\n  },\n\n  /**\n   * Inspect implementation.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  inspect() {\n    if (!this.req) return;\n    return this.toJSON();\n  },\n\n  /**\n   * Return JSON representation.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  toJSON() {\n    return only(this, [\n      'method',\n      'url',\n      'header'\n    ]);\n  }\n};\n\n/**\n * Custom inspection implementation for newer Node.js versions.\n *\n * @return {Object}\n * @api public\n */\n\n/* istanbul ignore else */\nif (util.inspect.custom) {\n  module.exports[util.inspect.custom] = module.exports.inspect;\n}\n","\n'use strict';\n\n/**\n * Module dependencies.\n */\n\nconst contentDisposition = require('content-disposition');\nconst getType = require('cache-content-type');\nconst onFinish = require('on-finished');\nconst escape = require('escape-html');\nconst typeis = require('type-is').is;\nconst statuses = require('statuses');\nconst destroy = require('destroy');\nconst assert = require('assert');\nconst extname = require('path').extname;\nconst vary = require('vary');\nconst only = require('only');\nconst util = require('util');\nconst encodeUrl = require('encodeurl');\nconst Stream = require('stream');\n\n/**\n * Prototype.\n */\n\nmodule.exports = {\n\n  /**\n   * Return the request socket.\n   *\n   * @return {Connection}\n   * @api public\n   */\n\n  get socket() {\n    return this.res.socket;\n  },\n\n  /**\n   * Return response header.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  get header() {\n    const { res } = this;\n    return typeof res.getHeaders === 'function'\n      ? res.getHeaders()\n      : res._headers || {}; // Node < 7.7\n  },\n\n  /**\n   * Return response header, alias as response.header\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  get headers() {\n    return this.header;\n  },\n\n  /**\n   * Get response status code.\n   *\n   * @return {Number}\n   * @api public\n   */\n\n  get status() {\n    return this.res.statusCode;\n  },\n\n  /**\n   * Set response status code.\n   *\n   * @param {Number} code\n   * @api public\n   */\n\n  set status(code) {\n    if (this.headerSent) return;\n\n    assert(Number.isInteger(code), 'status code must be a number');\n    assert(code >= 100 && code <= 999, `invalid status code: ${code}`);\n    this._explicitStatus = true;\n    this.res.statusCode = code;\n    if (this.req.httpVersionMajor < 2) this.res.statusMessage = statuses[code];\n    if (this.body && statuses.empty[code]) this.body = null;\n  },\n\n  /**\n   * Get response status message\n   *\n   * @return {String}\n   * @api public\n   */\n\n  get message() {\n    return this.res.statusMessage || statuses[this.status];\n  },\n\n  /**\n   * Set response status message\n   *\n   * @param {String} msg\n   * @api public\n   */\n\n  set message(msg) {\n    this.res.statusMessage = msg;\n  },\n\n  /**\n   * Get response body.\n   *\n   * @return {Mixed}\n   * @api public\n   */\n\n  get body() {\n    return this._body;\n  },\n\n  /**\n   * Set response body.\n   *\n   * @param {String|Buffer|Object|Stream} val\n   * @api public\n   */\n\n  set body(val) {\n    const original = this._body;\n    this._body = val;\n\n    // no content\n    if (null == val) {\n      if (!statuses.empty[this.status]) this.status = 204;\n      if (val === null) this._explicitNullBody = true;\n      this.remove('Content-Type');\n      this.remove('Content-Length');\n      this.remove('Transfer-Encoding');\n      return;\n    }\n\n    // set the status\n    if (!this._explicitStatus) this.status = 200;\n\n    // set the content-type only if not yet set\n    const setType = !this.has('Content-Type');\n\n    // string\n    if ('string' === typeof val) {\n      if (setType) this.type = /^\\s*</.test(val) ? 'html' : 'text';\n      this.length = Buffer.byteLength(val);\n      return;\n    }\n\n    // buffer\n    if (Buffer.isBuffer(val)) {\n      if (setType) this.type = 'bin';\n      this.length = val.length;\n      return;\n    }\n\n    // stream\n    if (val instanceof Stream) {\n      onFinish(this.res, destroy.bind(null, val));\n      if (original != val) {\n        val.once('error', err => this.ctx.onerror(err));\n        // overwriting\n        if (null != original) this.remove('Content-Length');\n      }\n\n      if (setType) this.type = 'bin';\n      return;\n    }\n\n    // json\n    this.remove('Content-Length');\n    this.type = 'json';\n  },\n\n  /**\n   * Set Content-Length field to `n`.\n   *\n   * @param {Number} n\n   * @api public\n   */\n\n  set length(n) {\n    if (!this.has('Transfer-Encoding')) {\n      this.set('Content-Length', n);\n    }\n  },\n\n  /**\n   * Return parsed response Content-Length when present.\n   *\n   * @return {Number}\n   * @api public\n   */\n\n  get length() {\n    if (this.has('Content-Length')) {\n      return parseInt(this.get('Content-Length'), 10) || 0;\n    }\n\n    const { body } = this;\n    if (!body || body instanceof Stream) return undefined;\n    if ('string' === typeof body) return Buffer.byteLength(body);\n    if (Buffer.isBuffer(body)) return body.length;\n    return Buffer.byteLength(JSON.stringify(body));\n  },\n\n  /**\n   * Check if a header has been written to the socket.\n   *\n   * @return {Boolean}\n   * @api public\n   */\n\n  get headerSent() {\n    return this.res.headersSent;\n  },\n\n  /**\n   * Vary on `field`.\n   *\n   * @param {String} field\n   * @api public\n   */\n\n  vary(field) {\n    if (this.headerSent) return;\n\n    vary(this.res, field);\n  },\n\n  /**\n   * Perform a 302 redirect to `url`.\n   *\n   * The string \"back\" is special-cased\n   * to provide Referrer support, when Referrer\n   * is not present `alt` or \"/\" is used.\n   *\n   * Examples:\n   *\n   *    this.redirect('back');\n   *    this.redirect('back', '/index.html');\n   *    this.redirect('/login');\n   *    this.redirect('http://google.com');\n   *\n   * @param {String} url\n   * @param {String} [alt]\n   * @api public\n   */\n\n  redirect(url, alt) {\n    // location\n    if ('back' === url) url = this.ctx.get('Referrer') || alt || '/';\n    this.set('Location', encodeUrl(url));\n\n    // status\n    if (!statuses.redirect[this.status]) this.status = 302;\n\n    // html\n    if (this.ctx.accepts('html')) {\n      url = escape(url);\n      this.type = 'text/html; charset=utf-8';\n      this.body = `Redirecting to <a href=\"${url}\">${url}</a>.`;\n      return;\n    }\n\n    // text\n    this.type = 'text/plain; charset=utf-8';\n    this.body = `Redirecting to ${url}.`;\n  },\n\n  /**\n   * Set Content-Disposition header to \"attachment\" with optional `filename`.\n   *\n   * @param {String} filename\n   * @api public\n   */\n\n  attachment(filename, options) {\n    if (filename) this.type = extname(filename);\n    this.set('Content-Disposition', contentDisposition(filename, options));\n  },\n\n  /**\n   * Set Content-Type response header with `type` through `mime.lookup()`\n   * when it does not contain a charset.\n   *\n   * Examples:\n   *\n   *     this.type = '.html';\n   *     this.type = 'html';\n   *     this.type = 'json';\n   *     this.type = 'application/json';\n   *     this.type = 'png';\n   *\n   * @param {String} type\n   * @api public\n   */\n\n  set type(type) {\n    type = getType(type);\n    if (type) {\n      this.set('Content-Type', type);\n    } else {\n      this.remove('Content-Type');\n    }\n  },\n\n  /**\n   * Set the Last-Modified date using a string or a Date.\n   *\n   *     this.response.lastModified = new Date();\n   *     this.response.lastModified = '2013-09-13';\n   *\n   * @param {String|Date} type\n   * @api public\n   */\n\n  set lastModified(val) {\n    if ('string' === typeof val) val = new Date(val);\n    this.set('Last-Modified', val.toUTCString());\n  },\n\n  /**\n   * Get the Last-Modified date in Date form, if it exists.\n   *\n   * @return {Date}\n   * @api public\n   */\n\n  get lastModified() {\n    const date = this.get('last-modified');\n    if (date) return new Date(date);\n  },\n\n  /**\n   * Set the ETag of a response.\n   * This will normalize the quotes if necessary.\n   *\n   *     this.response.etag = 'md5hashsum';\n   *     this.response.etag = '\"md5hashsum\"';\n   *     this.response.etag = 'W/\"123456789\"';\n   *\n   * @param {String} etag\n   * @api public\n   */\n\n  set etag(val) {\n    if (!/^(W\\/)?\"/.test(val)) val = `\"${val}\"`;\n    this.set('ETag', val);\n  },\n\n  /**\n   * Get the ETag of a response.\n   *\n   * @return {String}\n   * @api public\n   */\n\n  get etag() {\n    return this.get('ETag');\n  },\n\n  /**\n   * Return the response mime type void of\n   * parameters such as \"charset\".\n   *\n   * @return {String}\n   * @api public\n   */\n\n  get type() {\n    const type = this.get('Content-Type');\n    if (!type) return '';\n    return type.split(';', 1)[0];\n  },\n\n  /**\n   * Check whether the response is one of the listed types.\n   * Pretty much the same as `this.request.is()`.\n   *\n   * @param {String|String[]} [type]\n   * @param {String[]} [types]\n   * @return {String|false}\n   * @api public\n   */\n\n  is(type, ...types) {\n    return typeis(this.type, type, ...types);\n  },\n\n  /**\n   * Return response header.\n   *\n   * Examples:\n   *\n   *     this.get('Content-Type');\n   *     // => \"text/plain\"\n   *\n   *     this.get('content-type');\n   *     // => \"text/plain\"\n   *\n   * @param {String} field\n   * @return {String}\n   * @api public\n   */\n\n  get(field) {\n    return this.header[field.toLowerCase()] || '';\n  },\n\n  /**\n   * Returns true if the header identified by name is currently set in the outgoing headers.\n   * The header name matching is case-insensitive.\n   *\n   * Examples:\n   *\n   *     this.has('Content-Type');\n   *     // => true\n   *\n   *     this.get('content-type');\n   *     // => true\n   *\n   * @param {String} field\n   * @return {boolean}\n   * @api public\n   */\n\n  has(field) {\n    return typeof this.res.hasHeader === 'function'\n      ? this.res.hasHeader(field)\n      // Node < 7.7\n      : field.toLowerCase() in this.headers;\n  },\n\n  /**\n   * Set header `field` to `val` or pass\n   * an object of header fields.\n   *\n   * Examples:\n   *\n   *    this.set('Foo', ['bar', 'baz']);\n   *    this.set('Accept', 'application/json');\n   *    this.set({ Accept: 'text/plain', 'X-API-Key': 'tobi' });\n   *\n   * @param {String|Object|Array} field\n   * @param {String} val\n   * @api public\n   */\n\n  set(field, val) {\n    if (this.headerSent) return;\n\n    if (2 === arguments.length) {\n      if (Array.isArray(val)) val = val.map(v => typeof v === 'string' ? v : String(v));\n      else if (typeof val !== 'string') val = String(val);\n      this.res.setHeader(field, val);\n    } else {\n      for (const key in field) {\n        this.set(key, field[key]);\n      }\n    }\n  },\n\n  /**\n   * Append additional header `field` with value `val`.\n   *\n   * Examples:\n   *\n   * ```\n   * this.append('Link', ['<http://localhost/>', '<http://localhost:3000/>']);\n   * this.append('Set-Cookie', 'foo=bar; Path=/; HttpOnly');\n   * this.append('Warning', '199 Miscellaneous warning');\n   * ```\n   *\n   * @param {String} field\n   * @param {String|Array} val\n   * @api public\n   */\n\n  append(field, val) {\n    const prev = this.get(field);\n\n    if (prev) {\n      val = Array.isArray(prev)\n        ? prev.concat(val)\n        : [prev].concat(val);\n    }\n\n    return this.set(field, val);\n  },\n\n  /**\n   * Remove header `field`.\n   *\n   * @param {String} name\n   * @api public\n   */\n\n  remove(field) {\n    if (this.headerSent) return;\n\n    this.res.removeHeader(field);\n  },\n\n  /**\n   * Checks if the request is writable.\n   * Tests for the existence of the socket\n   * as node sometimes does not set it.\n   *\n   * @return {Boolean}\n   * @api private\n   */\n\n  get writable() {\n    // can't write any more after response finished\n    // response.writableEnded is available since Node > 12.9\n    // https://nodejs.org/api/http.html#http_response_writableended\n    // response.finished is undocumented feature of previous Node versions\n    // https://stackoverflow.com/questions/16254385/undocumented-response-finished-in-node-js\n    if (this.res.writableEnded || this.res.finished) return false;\n\n    const socket = this.res.socket;\n    // There are already pending outgoing res, but still writable\n    // https://github.com/nodejs/node/blob/v4.4.7/lib/_http_server.js#L486\n    if (!socket) return true;\n    return socket.writable;\n  },\n\n  /**\n   * Inspect implementation.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  inspect() {\n    if (!this.res) return;\n    const o = this.toJSON();\n    o.body = this.body;\n    return o;\n  },\n\n  /**\n   * Return JSON representation.\n   *\n   * @return {Object}\n   * @api public\n   */\n\n  toJSON() {\n    return only(this, [\n      'status',\n      'message',\n      'header'\n    ]);\n  },\n\n  /**\n   * Flush any set headers and begin the body\n   */\n\n  flushHeaders() {\n    this.res.flushHeaders();\n  }\n};\n\n/**\n * Custom inspection implementation for node 6+.\n *\n * @return {Object}\n * @api public\n */\n\n/* istanbul ignore else */\nif (util.inspect.custom) {\n  module.exports[util.inspect.custom] = module.exports.inspect;\n}\n","/*!\n * depd\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = depd\n\n/**\n * Create deprecate for namespace in caller.\n */\n\nfunction depd (namespace) {\n  if (!namespace) {\n    throw new TypeError('argument namespace is required')\n  }\n\n  function deprecate (message) {\n    // no-op in browser\n  }\n\n  deprecate._file = undefined\n  deprecate._ignored = true\n  deprecate._namespace = namespace\n  deprecate._traced = false\n  deprecate._warned = Object.create(null)\n\n  deprecate.function = wrapfunction\n  deprecate.property = wrapproperty\n\n  return deprecate\n}\n\n/**\n * Return a wrapped function in a deprecation message.\n *\n * This is a no-op version of the wrapper, which does nothing but call\n * validation.\n */\n\nfunction wrapfunction (fn, message) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('argument fn must be a function')\n  }\n\n  return fn\n}\n\n/**\n * Wrap property in a deprecation message.\n *\n * This is a no-op version of the wrapper, which does nothing but call\n * validation.\n */\n\nfunction wrapproperty (obj, prop, message) {\n  if (!obj || (typeof obj !== 'object' && typeof obj !== 'function')) {\n    throw new TypeError('argument obj must be object')\n  }\n\n  var descriptor = Object.getOwnPropertyDescriptor(obj, prop)\n\n  if (!descriptor) {\n    throw new TypeError('must call property on owner object')\n  }\n\n  if (!descriptor.configurable) {\n    throw new TypeError('property must be configurable')\n  }\n}\n","/*!\n * media-typer\n * Copyright(c) 2014 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n/**\n * RegExp to match *( \";\" parameter ) in RFC 2616 sec 3.7\n *\n * parameter     = token \"=\" ( token | quoted-string )\n * token         = 1*<any CHAR except CTLs or separators>\n * separators    = \"(\" | \")\" | \"<\" | \">\" | \"@\"\n *               | \",\" | \";\" | \":\" | \"\\\" | <\">\n *               | \"/\" | \"[\" | \"]\" | \"?\" | \"=\"\n *               | \"{\" | \"}\" | SP | HT\n * quoted-string = ( <\"> *(qdtext | quoted-pair ) <\"> )\n * qdtext        = <any TEXT except <\">>\n * quoted-pair   = \"\\\" CHAR\n * CHAR          = <any US-ASCII character (octets 0 - 127)>\n * TEXT          = <any OCTET except CTLs, but including LWS>\n * LWS           = [CRLF] 1*( SP | HT )\n * CRLF          = CR LF\n * CR            = <US-ASCII CR, carriage return (13)>\n * LF            = <US-ASCII LF, linefeed (10)>\n * SP            = <US-ASCII SP, space (32)>\n * SHT           = <US-ASCII HT, horizontal-tab (9)>\n * CTL           = <any US-ASCII control character (octets 0 - 31) and DEL (127)>\n * OCTET         = <any 8-bit sequence of data>\n */\nvar paramRegExp = /; *([!#$%&'\\*\\+\\-\\.0-9A-Z\\^_`a-z\\|~]+) *= *(\"(?:[ !\\u0023-\\u005b\\u005d-\\u007e\\u0080-\\u00ff]|\\\\[\\u0020-\\u007e])*\"|[!#$%&'\\*\\+\\-\\.0-9A-Z\\^_`a-z\\|~]+) */g;\nvar textRegExp = /^[\\u0020-\\u007e\\u0080-\\u00ff]+$/\nvar tokenRegExp = /^[!#$%&'\\*\\+\\-\\.0-9A-Z\\^_`a-z\\|~]+$/\n\n/**\n * RegExp to match quoted-pair in RFC 2616\n *\n * quoted-pair = \"\\\" CHAR\n * CHAR        = <any US-ASCII character (octets 0 - 127)>\n */\nvar qescRegExp = /\\\\([\\u0000-\\u007f])/g;\n\n/**\n * RegExp to match chars that must be quoted-pair in RFC 2616\n */\nvar quoteRegExp = /([\\\\\"])/g;\n\n/**\n * RegExp to match type in RFC 6838\n *\n * type-name = restricted-name\n * subtype-name = restricted-name\n * restricted-name = restricted-name-first *126restricted-name-chars\n * restricted-name-first  = ALPHA / DIGIT\n * restricted-name-chars  = ALPHA / DIGIT / \"!\" / \"#\" /\n *                          \"$\" / \"&\" / \"-\" / \"^\" / \"_\"\n * restricted-name-chars =/ \".\" ; Characters before first dot always\n *                              ; specify a facet name\n * restricted-name-chars =/ \"+\" ; Characters after last plus always\n *                              ; specify a structured syntax suffix\n * ALPHA =  %x41-5A / %x61-7A   ; A-Z / a-z\n * DIGIT =  %x30-39             ; 0-9\n */\nvar subtypeNameRegExp = /^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/\nvar typeNameRegExp = /^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/\nvar typeRegExp = /^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;\n\n/**\n * Module exports.\n */\n\nexports.format = format\nexports.parse = parse\n\n/**\n * Format object to media type.\n *\n * @param {object} obj\n * @return {string}\n * @api public\n */\n\nfunction format(obj) {\n  if (!obj || typeof obj !== 'object') {\n    throw new TypeError('argument obj is required')\n  }\n\n  var parameters = obj.parameters\n  var subtype = obj.subtype\n  var suffix = obj.suffix\n  var type = obj.type\n\n  if (!type || !typeNameRegExp.test(type)) {\n    throw new TypeError('invalid type')\n  }\n\n  if (!subtype || !subtypeNameRegExp.test(subtype)) {\n    throw new TypeError('invalid subtype')\n  }\n\n  // format as type/subtype\n  var string = type + '/' + subtype\n\n  // append +suffix\n  if (suffix) {\n    if (!typeNameRegExp.test(suffix)) {\n      throw new TypeError('invalid suffix')\n    }\n\n    string += '+' + suffix\n  }\n\n  // append parameters\n  if (parameters && typeof parameters === 'object') {\n    var param\n    var params = Object.keys(parameters).sort()\n\n    for (var i = 0; i < params.length; i++) {\n      param = params[i]\n\n      if (!tokenRegExp.test(param)) {\n        throw new TypeError('invalid parameter name')\n      }\n\n      string += '; ' + param + '=' + qstring(parameters[param])\n    }\n  }\n\n  return string\n}\n\n/**\n * Parse media type to object.\n *\n * @param {string|object} string\n * @return {Object}\n * @api public\n */\n\nfunction parse(string) {\n  if (!string) {\n    throw new TypeError('argument string is required')\n  }\n\n  // support req/res-like objects as argument\n  if (typeof string === 'object') {\n    string = getcontenttype(string)\n  }\n\n  if (typeof string !== 'string') {\n    throw new TypeError('argument string is required to be a string')\n  }\n\n  var index = string.indexOf(';')\n  var type = index !== -1\n    ? string.substr(0, index)\n    : string\n\n  var key\n  var match\n  var obj = splitType(type)\n  var params = {}\n  var value\n\n  paramRegExp.lastIndex = index\n\n  while (match = paramRegExp.exec(string)) {\n    if (match.index !== index) {\n      throw new TypeError('invalid parameter format')\n    }\n\n    index += match[0].length\n    key = match[1].toLowerCase()\n    value = match[2]\n\n    if (value[0] === '\"') {\n      // remove quotes and escapes\n      value = value\n        .substr(1, value.length - 2)\n        .replace(qescRegExp, '$1')\n    }\n\n    params[key] = value\n  }\n\n  if (index !== -1 && index !== string.length) {\n    throw new TypeError('invalid parameter format')\n  }\n\n  obj.parameters = params\n\n  return obj\n}\n\n/**\n * Get content-type from req/res objects.\n *\n * @param {object}\n * @return {Object}\n * @api private\n */\n\nfunction getcontenttype(obj) {\n  if (typeof obj.getHeader === 'function') {\n    // res-like\n    return obj.getHeader('content-type')\n  }\n\n  if (typeof obj.headers === 'object') {\n    // req-like\n    return obj.headers && obj.headers['content-type']\n  }\n}\n\n/**\n * Quote a string if necessary.\n *\n * @param {string} val\n * @return {string}\n * @api private\n */\n\nfunction qstring(val) {\n  var str = String(val)\n\n  // no need to quote tokens\n  if (tokenRegExp.test(str)) {\n    return str\n  }\n\n  if (str.length > 0 && !textRegExp.test(str)) {\n    throw new TypeError('invalid parameter value')\n  }\n\n  return '\"' + str.replace(quoteRegExp, '\\\\$1') + '\"'\n}\n\n/**\n * Simply \"type/subtype+siffx\" into parts.\n *\n * @param {string} string\n * @return {Object}\n * @api private\n */\n\nfunction splitType(string) {\n  var match = typeRegExp.exec(string.toLowerCase())\n\n  if (!match) {\n    throw new TypeError('invalid media type')\n  }\n\n  var type = match[1]\n  var subtype = match[2]\n  var suffix\n\n  // suffix after last +\n  var index = subtype.lastIndexOf('+')\n  if (index !== -1) {\n    suffix = subtype.substr(index + 1)\n    subtype = subtype.substr(0, index)\n  }\n\n  var obj = {\n    type: type,\n    subtype: subtype,\n    suffix: suffix\n  }\n\n  return obj\n}\n","/*!\n * mime-db\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2015-2022 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n/**\n * Module exports.\n */\n\nmodule.exports = require('./db.json')\n","/*!\n * mime-types\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar db = require('mime-db')\nvar extname = require('path').extname\n\n/**\n * Module variables.\n * @private\n */\n\nvar EXTRACT_TYPE_REGEXP = /^\\s*([^;\\s]*)(?:;|\\s|$)/\nvar TEXT_TYPE_REGEXP = /^text\\//i\n\n/**\n * Module exports.\n * @public\n */\n\nexports.charset = charset\nexports.charsets = { lookup: charset }\nexports.contentType = contentType\nexports.extension = extension\nexports.extensions = Object.create(null)\nexports.lookup = lookup\nexports.types = Object.create(null)\n\n// Populate the extensions/types maps\npopulateMaps(exports.extensions, exports.types)\n\n/**\n * Get the default charset for a MIME type.\n *\n * @param {string} type\n * @return {boolean|string}\n */\n\nfunction charset (type) {\n  if (!type || typeof type !== 'string') {\n    return false\n  }\n\n  // TODO: use media-typer\n  var match = EXTRACT_TYPE_REGEXP.exec(type)\n  var mime = match && db[match[1].toLowerCase()]\n\n  if (mime && mime.charset) {\n    return mime.charset\n  }\n\n  // default text/* to utf-8\n  if (match && TEXT_TYPE_REGEXP.test(match[1])) {\n    return 'UTF-8'\n  }\n\n  return false\n}\n\n/**\n * Create a full Content-Type header given a MIME type or extension.\n *\n * @param {string} str\n * @return {boolean|string}\n */\n\nfunction contentType (str) {\n  // TODO: should this even be in this module?\n  if (!str || typeof str !== 'string') {\n    return false\n  }\n\n  var mime = str.indexOf('/') === -1\n    ? exports.lookup(str)\n    : str\n\n  if (!mime) {\n    return false\n  }\n\n  // TODO: use content-type or other module\n  if (mime.indexOf('charset') === -1) {\n    var charset = exports.charset(mime)\n    if (charset) mime += '; charset=' + charset.toLowerCase()\n  }\n\n  return mime\n}\n\n/**\n * Get the default extension for a MIME type.\n *\n * @param {string} type\n * @return {boolean|string}\n */\n\nfunction extension (type) {\n  if (!type || typeof type !== 'string') {\n    return false\n  }\n\n  // TODO: use media-typer\n  var match = EXTRACT_TYPE_REGEXP.exec(type)\n\n  // get extensions\n  var exts = match && exports.extensions[match[1].toLowerCase()]\n\n  if (!exts || !exts.length) {\n    return false\n  }\n\n  return exts[0]\n}\n\n/**\n * Lookup the MIME type for a file path/extension.\n *\n * @param {string} path\n * @return {boolean|string}\n */\n\nfunction lookup (path) {\n  if (!path || typeof path !== 'string') {\n    return false\n  }\n\n  // get the extension (\"ext\" or \".ext\" or full path)\n  var extension = extname('x.' + path)\n    .toLowerCase()\n    .substr(1)\n\n  if (!extension) {\n    return false\n  }\n\n  return exports.types[extension] || false\n}\n\n/**\n * Populate the extensions and types maps.\n * @private\n */\n\nfunction populateMaps (extensions, types) {\n  // source preference (least -> most)\n  var preference = ['nginx', 'apache', undefined, 'iana']\n\n  Object.keys(db).forEach(function forEachMimeType (type) {\n    var mime = db[type]\n    var exts = mime.extensions\n\n    if (!exts || !exts.length) {\n      return\n    }\n\n    // mime -> extensions\n    extensions[type] = exts\n\n    // extension -> mime\n    for (var i = 0; i < exts.length; i++) {\n      var extension = exts[i]\n\n      if (types[extension]) {\n        var from = preference.indexOf(db[types[extension]].source)\n        var to = preference.indexOf(mime.source)\n\n        if (types[extension] !== 'application/octet-stream' &&\n          (from > to || (from === to && types[extension].substr(0, 12) === 'application/'))) {\n          // skip the remapping\n          continue\n        }\n      }\n\n      // set the extension -> mime\n      types[extension] = type\n    }\n  })\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","/*!\n * negotiator\n * Copyright(c) 2012 Federico Romero\n * Copyright(c) 2012-2014 Isaac Z. Schlueter\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\nvar preferredCharsets = require('./lib/charset')\nvar preferredEncodings = require('./lib/encoding')\nvar preferredLanguages = require('./lib/language')\nvar preferredMediaTypes = require('./lib/mediaType')\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = Negotiator;\nmodule.exports.Negotiator = Negotiator;\n\n/**\n * Create a Negotiator instance from a request.\n * @param {object} request\n * @public\n */\n\nfunction Negotiator(request) {\n  if (!(this instanceof Negotiator)) {\n    return new Negotiator(request);\n  }\n\n  this.request = request;\n}\n\nNegotiator.prototype.charset = function charset(available) {\n  var set = this.charsets(available);\n  return set && set[0];\n};\n\nNegotiator.prototype.charsets = function charsets(available) {\n  return preferredCharsets(this.request.headers['accept-charset'], available);\n};\n\nNegotiator.prototype.encoding = function encoding(available) {\n  var set = this.encodings(available);\n  return set && set[0];\n};\n\nNegotiator.prototype.encodings = function encodings(available) {\n  return preferredEncodings(this.request.headers['accept-encoding'], available);\n};\n\nNegotiator.prototype.language = function language(available) {\n  var set = this.languages(available);\n  return set && set[0];\n};\n\nNegotiator.prototype.languages = function languages(available) {\n  return preferredLanguages(this.request.headers['accept-language'], available);\n};\n\nNegotiator.prototype.mediaType = function mediaType(available) {\n  var set = this.mediaTypes(available);\n  return set && set[0];\n};\n\nNegotiator.prototype.mediaTypes = function mediaTypes(available) {\n  return preferredMediaTypes(this.request.headers.accept, available);\n};\n\n// Backwards compatibility\nNegotiator.prototype.preferredCharset = Negotiator.prototype.charset;\nNegotiator.prototype.preferredCharsets = Negotiator.prototype.charsets;\nNegotiator.prototype.preferredEncoding = Negotiator.prototype.encoding;\nNegotiator.prototype.preferredEncodings = Negotiator.prototype.encodings;\nNegotiator.prototype.preferredLanguage = Negotiator.prototype.language;\nNegotiator.prototype.preferredLanguages = Negotiator.prototype.languages;\nNegotiator.prototype.preferredMediaType = Negotiator.prototype.mediaType;\nNegotiator.prototype.preferredMediaTypes = Negotiator.prototype.mediaTypes;\n","/**\n * negotiator\n * Copyright(c) 2012 Isaac Z. Schlueter\n * Copyright(c) 2014 Federico Romero\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = preferredCharsets;\nmodule.exports.preferredCharsets = preferredCharsets;\n\n/**\n * Module variables.\n * @private\n */\n\nvar simpleCharsetRegExp = /^\\s*([^\\s;]+)\\s*(?:;(.*))?$/;\n\n/**\n * Parse the Accept-Charset header.\n * @private\n */\n\nfunction parseAcceptCharset(accept) {\n  var accepts = accept.split(',');\n\n  for (var i = 0, j = 0; i < accepts.length; i++) {\n    var charset = parseCharset(accepts[i].trim(), i);\n\n    if (charset) {\n      accepts[j++] = charset;\n    }\n  }\n\n  // trim accepts\n  accepts.length = j;\n\n  return accepts;\n}\n\n/**\n * Parse a charset from the Accept-Charset header.\n * @private\n */\n\nfunction parseCharset(str, i) {\n  var match = simpleCharsetRegExp.exec(str);\n  if (!match) return null;\n\n  var charset = match[1];\n  var q = 1;\n  if (match[2]) {\n    var params = match[2].split(';')\n    for (var j = 0; j < params.length; j++) {\n      var p = params[j].trim().split('=');\n      if (p[0] === 'q') {\n        q = parseFloat(p[1]);\n        break;\n      }\n    }\n  }\n\n  return {\n    charset: charset,\n    q: q,\n    i: i\n  };\n}\n\n/**\n * Get the priority of a charset.\n * @private\n */\n\nfunction getCharsetPriority(charset, accepted, index) {\n  var priority = {o: -1, q: 0, s: 0};\n\n  for (var i = 0; i < accepted.length; i++) {\n    var spec = specify(charset, accepted[i], index);\n\n    if (spec && (priority.s - spec.s || priority.q - spec.q || priority.o - spec.o) < 0) {\n      priority = spec;\n    }\n  }\n\n  return priority;\n}\n\n/**\n * Get the specificity of the charset.\n * @private\n */\n\nfunction specify(charset, spec, index) {\n  var s = 0;\n  if(spec.charset.toLowerCase() === charset.toLowerCase()){\n    s |= 1;\n  } else if (spec.charset !== '*' ) {\n    return null\n  }\n\n  return {\n    i: index,\n    o: spec.i,\n    q: spec.q,\n    s: s\n  }\n}\n\n/**\n * Get the preferred charsets from an Accept-Charset header.\n * @public\n */\n\nfunction preferredCharsets(accept, provided) {\n  // RFC 2616 sec 14.2: no header = *\n  var accepts = parseAcceptCharset(accept === undefined ? '*' : accept || '');\n\n  if (!provided) {\n    // sorted list of all charsets\n    return accepts\n      .filter(isQuality)\n      .sort(compareSpecs)\n      .map(getFullCharset);\n  }\n\n  var priorities = provided.map(function getPriority(type, index) {\n    return getCharsetPriority(type, accepts, index);\n  });\n\n  // sorted list of accepted charsets\n  return priorities.filter(isQuality).sort(compareSpecs).map(function getCharset(priority) {\n    return provided[priorities.indexOf(priority)];\n  });\n}\n\n/**\n * Compare two specs.\n * @private\n */\n\nfunction compareSpecs(a, b) {\n  return (b.q - a.q) || (b.s - a.s) || (a.o - b.o) || (a.i - b.i) || 0;\n}\n\n/**\n * Get full charset string.\n * @private\n */\n\nfunction getFullCharset(spec) {\n  return spec.charset;\n}\n\n/**\n * Check if a spec has any quality.\n * @private\n */\n\nfunction isQuality(spec) {\n  return spec.q > 0;\n}\n","/**\n * negotiator\n * Copyright(c) 2012 Isaac Z. Schlueter\n * Copyright(c) 2014 Federico Romero\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = preferredEncodings;\nmodule.exports.preferredEncodings = preferredEncodings;\n\n/**\n * Module variables.\n * @private\n */\n\nvar simpleEncodingRegExp = /^\\s*([^\\s;]+)\\s*(?:;(.*))?$/;\n\n/**\n * Parse the Accept-Encoding header.\n * @private\n */\n\nfunction parseAcceptEncoding(accept) {\n  var accepts = accept.split(',');\n  var hasIdentity = false;\n  var minQuality = 1;\n\n  for (var i = 0, j = 0; i < accepts.length; i++) {\n    var encoding = parseEncoding(accepts[i].trim(), i);\n\n    if (encoding) {\n      accepts[j++] = encoding;\n      hasIdentity = hasIdentity || specify('identity', encoding);\n      minQuality = Math.min(minQuality, encoding.q || 1);\n    }\n  }\n\n  if (!hasIdentity) {\n    /*\n     * If identity doesn't explicitly appear in the accept-encoding header,\n     * it's added to the list of acceptable encoding with the lowest q\n     */\n    accepts[j++] = {\n      encoding: 'identity',\n      q: minQuality,\n      i: i\n    };\n  }\n\n  // trim accepts\n  accepts.length = j;\n\n  return accepts;\n}\n\n/**\n * Parse an encoding from the Accept-Encoding header.\n * @private\n */\n\nfunction parseEncoding(str, i) {\n  var match = simpleEncodingRegExp.exec(str);\n  if (!match) return null;\n\n  var encoding = match[1];\n  var q = 1;\n  if (match[2]) {\n    var params = match[2].split(';');\n    for (var j = 0; j < params.length; j++) {\n      var p = params[j].trim().split('=');\n      if (p[0] === 'q') {\n        q = parseFloat(p[1]);\n        break;\n      }\n    }\n  }\n\n  return {\n    encoding: encoding,\n    q: q,\n    i: i\n  };\n}\n\n/**\n * Get the priority of an encoding.\n * @private\n */\n\nfunction getEncodingPriority(encoding, accepted, index) {\n  var priority = {o: -1, q: 0, s: 0};\n\n  for (var i = 0; i < accepted.length; i++) {\n    var spec = specify(encoding, accepted[i], index);\n\n    if (spec && (priority.s - spec.s || priority.q - spec.q || priority.o - spec.o) < 0) {\n      priority = spec;\n    }\n  }\n\n  return priority;\n}\n\n/**\n * Get the specificity of the encoding.\n * @private\n */\n\nfunction specify(encoding, spec, index) {\n  var s = 0;\n  if(spec.encoding.toLowerCase() === encoding.toLowerCase()){\n    s |= 1;\n  } else if (spec.encoding !== '*' ) {\n    return null\n  }\n\n  return {\n    i: index,\n    o: spec.i,\n    q: spec.q,\n    s: s\n  }\n};\n\n/**\n * Get the preferred encodings from an Accept-Encoding header.\n * @public\n */\n\nfunction preferredEncodings(accept, provided) {\n  var accepts = parseAcceptEncoding(accept || '');\n\n  if (!provided) {\n    // sorted list of all encodings\n    return accepts\n      .filter(isQuality)\n      .sort(compareSpecs)\n      .map(getFullEncoding);\n  }\n\n  var priorities = provided.map(function getPriority(type, index) {\n    return getEncodingPriority(type, accepts, index);\n  });\n\n  // sorted list of accepted encodings\n  return priorities.filter(isQuality).sort(compareSpecs).map(function getEncoding(priority) {\n    return provided[priorities.indexOf(priority)];\n  });\n}\n\n/**\n * Compare two specs.\n * @private\n */\n\nfunction compareSpecs(a, b) {\n  return (b.q - a.q) || (b.s - a.s) || (a.o - b.o) || (a.i - b.i) || 0;\n}\n\n/**\n * Get full encoding string.\n * @private\n */\n\nfunction getFullEncoding(spec) {\n  return spec.encoding;\n}\n\n/**\n * Check if a spec has any quality.\n * @private\n */\n\nfunction isQuality(spec) {\n  return spec.q > 0;\n}\n","/**\n * negotiator\n * Copyright(c) 2012 Isaac Z. Schlueter\n * Copyright(c) 2014 Federico Romero\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = preferredLanguages;\nmodule.exports.preferredLanguages = preferredLanguages;\n\n/**\n * Module variables.\n * @private\n */\n\nvar simpleLanguageRegExp = /^\\s*([^\\s\\-;]+)(?:-([^\\s;]+))?\\s*(?:;(.*))?$/;\n\n/**\n * Parse the Accept-Language header.\n * @private\n */\n\nfunction parseAcceptLanguage(accept) {\n  var accepts = accept.split(',');\n\n  for (var i = 0, j = 0; i < accepts.length; i++) {\n    var language = parseLanguage(accepts[i].trim(), i);\n\n    if (language) {\n      accepts[j++] = language;\n    }\n  }\n\n  // trim accepts\n  accepts.length = j;\n\n  return accepts;\n}\n\n/**\n * Parse a language from the Accept-Language header.\n * @private\n */\n\nfunction parseLanguage(str, i) {\n  var match = simpleLanguageRegExp.exec(str);\n  if (!match) return null;\n\n  var prefix = match[1]\n  var suffix = match[2]\n  var full = prefix\n\n  if (suffix) full += \"-\" + suffix;\n\n  var q = 1;\n  if (match[3]) {\n    var params = match[3].split(';')\n    for (var j = 0; j < params.length; j++) {\n      var p = params[j].split('=');\n      if (p[0] === 'q') q = parseFloat(p[1]);\n    }\n  }\n\n  return {\n    prefix: prefix,\n    suffix: suffix,\n    q: q,\n    i: i,\n    full: full\n  };\n}\n\n/**\n * Get the priority of a language.\n * @private\n */\n\nfunction getLanguagePriority(language, accepted, index) {\n  var priority = {o: -1, q: 0, s: 0};\n\n  for (var i = 0; i < accepted.length; i++) {\n    var spec = specify(language, accepted[i], index);\n\n    if (spec && (priority.s - spec.s || priority.q - spec.q || priority.o - spec.o) < 0) {\n      priority = spec;\n    }\n  }\n\n  return priority;\n}\n\n/**\n * Get the specificity of the language.\n * @private\n */\n\nfunction specify(language, spec, index) {\n  var p = parseLanguage(language)\n  if (!p) return null;\n  var s = 0;\n  if(spec.full.toLowerCase() === p.full.toLowerCase()){\n    s |= 4;\n  } else if (spec.prefix.toLowerCase() === p.full.toLowerCase()) {\n    s |= 2;\n  } else if (spec.full.toLowerCase() === p.prefix.toLowerCase()) {\n    s |= 1;\n  } else if (spec.full !== '*' ) {\n    return null\n  }\n\n  return {\n    i: index,\n    o: spec.i,\n    q: spec.q,\n    s: s\n  }\n};\n\n/**\n * Get the preferred languages from an Accept-Language header.\n * @public\n */\n\nfunction preferredLanguages(accept, provided) {\n  // RFC 2616 sec 14.4: no header = *\n  var accepts = parseAcceptLanguage(accept === undefined ? '*' : accept || '');\n\n  if (!provided) {\n    // sorted list of all languages\n    return accepts\n      .filter(isQuality)\n      .sort(compareSpecs)\n      .map(getFullLanguage);\n  }\n\n  var priorities = provided.map(function getPriority(type, index) {\n    return getLanguagePriority(type, accepts, index);\n  });\n\n  // sorted list of accepted languages\n  return priorities.filter(isQuality).sort(compareSpecs).map(function getLanguage(priority) {\n    return provided[priorities.indexOf(priority)];\n  });\n}\n\n/**\n * Compare two specs.\n * @private\n */\n\nfunction compareSpecs(a, b) {\n  return (b.q - a.q) || (b.s - a.s) || (a.o - b.o) || (a.i - b.i) || 0;\n}\n\n/**\n * Get full language string.\n * @private\n */\n\nfunction getFullLanguage(spec) {\n  return spec.full;\n}\n\n/**\n * Check if a spec has any quality.\n * @private\n */\n\nfunction isQuality(spec) {\n  return spec.q > 0;\n}\n","/**\n * negotiator\n * Copyright(c) 2012 Isaac Z. Schlueter\n * Copyright(c) 2014 Federico Romero\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = preferredMediaTypes;\nmodule.exports.preferredMediaTypes = preferredMediaTypes;\n\n/**\n * Module variables.\n * @private\n */\n\nvar simpleMediaTypeRegExp = /^\\s*([^\\s\\/;]+)\\/([^;\\s]+)\\s*(?:;(.*))?$/;\n\n/**\n * Parse the Accept header.\n * @private\n */\n\nfunction parseAccept(accept) {\n  var accepts = splitMediaTypes(accept);\n\n  for (var i = 0, j = 0; i < accepts.length; i++) {\n    var mediaType = parseMediaType(accepts[i].trim(), i);\n\n    if (mediaType) {\n      accepts[j++] = mediaType;\n    }\n  }\n\n  // trim accepts\n  accepts.length = j;\n\n  return accepts;\n}\n\n/**\n * Parse a media type from the Accept header.\n * @private\n */\n\nfunction parseMediaType(str, i) {\n  var match = simpleMediaTypeRegExp.exec(str);\n  if (!match) return null;\n\n  var params = Object.create(null);\n  var q = 1;\n  var subtype = match[2];\n  var type = match[1];\n\n  if (match[3]) {\n    var kvps = splitParameters(match[3]).map(splitKeyValuePair);\n\n    for (var j = 0; j < kvps.length; j++) {\n      var pair = kvps[j];\n      var key = pair[0].toLowerCase();\n      var val = pair[1];\n\n      // get the value, unwrapping quotes\n      var value = val && val[0] === '\"' && val[val.length - 1] === '\"'\n        ? val.substr(1, val.length - 2)\n        : val;\n\n      if (key === 'q') {\n        q = parseFloat(value);\n        break;\n      }\n\n      // store parameter\n      params[key] = value;\n    }\n  }\n\n  return {\n    type: type,\n    subtype: subtype,\n    params: params,\n    q: q,\n    i: i\n  };\n}\n\n/**\n * Get the priority of a media type.\n * @private\n */\n\nfunction getMediaTypePriority(type, accepted, index) {\n  var priority = {o: -1, q: 0, s: 0};\n\n  for (var i = 0; i < accepted.length; i++) {\n    var spec = specify(type, accepted[i], index);\n\n    if (spec && (priority.s - spec.s || priority.q - spec.q || priority.o - spec.o) < 0) {\n      priority = spec;\n    }\n  }\n\n  return priority;\n}\n\n/**\n * Get the specificity of the media type.\n * @private\n */\n\nfunction specify(type, spec, index) {\n  var p = parseMediaType(type);\n  var s = 0;\n\n  if (!p) {\n    return null;\n  }\n\n  if(spec.type.toLowerCase() == p.type.toLowerCase()) {\n    s |= 4\n  } else if(spec.type != '*') {\n    return null;\n  }\n\n  if(spec.subtype.toLowerCase() == p.subtype.toLowerCase()) {\n    s |= 2\n  } else if(spec.subtype != '*') {\n    return null;\n  }\n\n  var keys = Object.keys(spec.params);\n  if (keys.length > 0) {\n    if (keys.every(function (k) {\n      return spec.params[k] == '*' || (spec.params[k] || '').toLowerCase() == (p.params[k] || '').toLowerCase();\n    })) {\n      s |= 1\n    } else {\n      return null\n    }\n  }\n\n  return {\n    i: index,\n    o: spec.i,\n    q: spec.q,\n    s: s,\n  }\n}\n\n/**\n * Get the preferred media types from an Accept header.\n * @public\n */\n\nfunction preferredMediaTypes(accept, provided) {\n  // RFC 2616 sec 14.2: no header = */*\n  var accepts = parseAccept(accept === undefined ? '*/*' : accept || '');\n\n  if (!provided) {\n    // sorted list of all types\n    return accepts\n      .filter(isQuality)\n      .sort(compareSpecs)\n      .map(getFullType);\n  }\n\n  var priorities = provided.map(function getPriority(type, index) {\n    return getMediaTypePriority(type, accepts, index);\n  });\n\n  // sorted list of accepted types\n  return priorities.filter(isQuality).sort(compareSpecs).map(function getType(priority) {\n    return provided[priorities.indexOf(priority)];\n  });\n}\n\n/**\n * Compare two specs.\n * @private\n */\n\nfunction compareSpecs(a, b) {\n  return (b.q - a.q) || (b.s - a.s) || (a.o - b.o) || (a.i - b.i) || 0;\n}\n\n/**\n * Get full type string.\n * @private\n */\n\nfunction getFullType(spec) {\n  return spec.type + '/' + spec.subtype;\n}\n\n/**\n * Check if a spec has any quality.\n * @private\n */\n\nfunction isQuality(spec) {\n  return spec.q > 0;\n}\n\n/**\n * Count the number of quotes in a string.\n * @private\n */\n\nfunction quoteCount(string) {\n  var count = 0;\n  var index = 0;\n\n  while ((index = string.indexOf('\"', index)) !== -1) {\n    count++;\n    index++;\n  }\n\n  return count;\n}\n\n/**\n * Split a key value pair.\n * @private\n */\n\nfunction splitKeyValuePair(str) {\n  var index = str.indexOf('=');\n  var key;\n  var val;\n\n  if (index === -1) {\n    key = str;\n  } else {\n    key = str.substr(0, index);\n    val = str.substr(index + 1);\n  }\n\n  return [key, val];\n}\n\n/**\n * Split an Accept header into media types.\n * @private\n */\n\nfunction splitMediaTypes(accept) {\n  var accepts = accept.split(',');\n\n  for (var i = 1, j = 0; i < accepts.length; i++) {\n    if (quoteCount(accepts[j]) % 2 == 0) {\n      accepts[++j] = accepts[i];\n    } else {\n      accepts[j] += ',' + accepts[i];\n    }\n  }\n\n  // trim accepts\n  accepts.length = j + 1;\n\n  return accepts;\n}\n\n/**\n * Split a string of parameters.\n * @private\n */\n\nfunction splitParameters(str) {\n  var parameters = str.split(';');\n\n  for (var i = 1, j = 0; i < parameters.length; i++) {\n    if (quoteCount(parameters[j]) % 2 == 0) {\n      parameters[++j] = parameters[i];\n    } else {\n      parameters[j] += ';' + parameters[i];\n    }\n  }\n\n  // trim parameters\n  parameters.length = j + 1;\n\n  for (var i = 0; i < parameters.length; i++) {\n    parameters[i] = parameters[i].trim();\n  }\n\n  return parameters;\n}\n","/*!\n * on-finished\n * Copyright(c) 2013 Jonathan Ong\n * Copyright(c) 2014 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = onFinished\nmodule.exports.isFinished = isFinished\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar asyncHooks = tryRequireAsyncHooks()\nvar first = require('ee-first')\n\n/**\n * Variables.\n * @private\n */\n\n/* istanbul ignore next */\nvar defer = typeof setImmediate === 'function'\n  ? setImmediate\n  : function (fn) { process.nextTick(fn.bind.apply(fn, arguments)) }\n\n/**\n * Invoke callback when the response has finished, useful for\n * cleaning up resources afterwards.\n *\n * @param {object} msg\n * @param {function} listener\n * @return {object}\n * @public\n */\n\nfunction onFinished (msg, listener) {\n  if (isFinished(msg) !== false) {\n    defer(listener, null, msg)\n    return msg\n  }\n\n  // attach the listener to the message\n  attachListener(msg, wrap(listener))\n\n  return msg\n}\n\n/**\n * Determine if message is already finished.\n *\n * @param {object} msg\n * @return {boolean}\n * @public\n */\n\nfunction isFinished (msg) {\n  var socket = msg.socket\n\n  if (typeof msg.finished === 'boolean') {\n    // OutgoingMessage\n    return Boolean(msg.finished || (socket && !socket.writable))\n  }\n\n  if (typeof msg.complete === 'boolean') {\n    // IncomingMessage\n    return Boolean(msg.upgrade || !socket || !socket.readable || (msg.complete && !msg.readable))\n  }\n\n  // don't know\n  return undefined\n}\n\n/**\n * Attach a finished listener to the message.\n *\n * @param {object} msg\n * @param {function} callback\n * @private\n */\n\nfunction attachFinishedListener (msg, callback) {\n  var eeMsg\n  var eeSocket\n  var finished = false\n\n  function onFinish (error) {\n    eeMsg.cancel()\n    eeSocket.cancel()\n\n    finished = true\n    callback(error)\n  }\n\n  // finished on first message event\n  eeMsg = eeSocket = first([[msg, 'end', 'finish']], onFinish)\n\n  function onSocket (socket) {\n    // remove listener\n    msg.removeListener('socket', onSocket)\n\n    if (finished) return\n    if (eeMsg !== eeSocket) return\n\n    // finished on first socket event\n    eeSocket = first([[socket, 'error', 'close']], onFinish)\n  }\n\n  if (msg.socket) {\n    // socket already assigned\n    onSocket(msg.socket)\n    return\n  }\n\n  // wait for socket to be assigned\n  msg.on('socket', onSocket)\n\n  if (msg.socket === undefined) {\n    // istanbul ignore next: node.js 0.8 patch\n    patchAssignSocket(msg, onSocket)\n  }\n}\n\n/**\n * Attach the listener to the message.\n *\n * @param {object} msg\n * @return {function}\n * @private\n */\n\nfunction attachListener (msg, listener) {\n  var attached = msg.__onFinished\n\n  // create a private single listener with queue\n  if (!attached || !attached.queue) {\n    attached = msg.__onFinished = createListener(msg)\n    attachFinishedListener(msg, attached)\n  }\n\n  attached.queue.push(listener)\n}\n\n/**\n * Create listener on message.\n *\n * @param {object} msg\n * @return {function}\n * @private\n */\n\nfunction createListener (msg) {\n  function listener (err) {\n    if (msg.__onFinished === listener) msg.__onFinished = null\n    if (!listener.queue) return\n\n    var queue = listener.queue\n    listener.queue = null\n\n    for (var i = 0; i < queue.length; i++) {\n      queue[i](err, msg)\n    }\n  }\n\n  listener.queue = []\n\n  return listener\n}\n\n/**\n * Patch ServerResponse.prototype.assignSocket for node.js 0.8.\n *\n * @param {ServerResponse} res\n * @param {function} callback\n * @private\n */\n\n// istanbul ignore next: node.js 0.8 patch\nfunction patchAssignSocket (res, callback) {\n  var assignSocket = res.assignSocket\n\n  if (typeof assignSocket !== 'function') return\n\n  // res.on('socket', callback) is broken in 0.8\n  res.assignSocket = function _assignSocket (socket) {\n    assignSocket.call(this, socket)\n    callback(socket)\n  }\n}\n\n/**\n * Try to require async_hooks\n * @private\n */\n\nfunction tryRequireAsyncHooks () {\n  try {\n    return require('async_hooks')\n  } catch (e) {\n    return {}\n  }\n}\n\n/**\n * Wrap function with async resource, if possible.\n * AsyncResource.bind static method backported.\n * @private\n */\n\nfunction wrap (fn) {\n  var res\n\n  // create anonymous resource\n  if (asyncHooks.AsyncResource) {\n    res = new asyncHooks.AsyncResource(fn.name || 'bound-anonymous-fn')\n  }\n\n  // incompatible node.js\n  if (!res || !res.runInAsyncScope) {\n    return fn\n  }\n\n  // return bound function\n  return res.runInAsyncScope.bind(res, fn, null)\n}\n","\nmodule.exports = function(obj, keys){\n  obj = obj || {};\n  if ('string' == typeof keys) keys = keys.split(/ +/);\n  return keys.reduce(function(ret, key){\n    if (null == obj[key]) return ret;\n    ret[key] = obj[key];\n    return ret;\n  }, {});\n};\n","/*!\n * parseurl\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2014-2017 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar url = require('url')\nvar parse = url.parse\nvar Url = url.Url\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = parseurl\nmodule.exports.original = originalurl\n\n/**\n * Parse the `req` url with memoization.\n *\n * @param {ServerRequest} req\n * @return {Object}\n * @public\n */\n\nfunction parseurl (req) {\n  var url = req.url\n\n  if (url === undefined) {\n    // URL is undefined\n    return undefined\n  }\n\n  var parsed = req._parsedUrl\n\n  if (fresh(url, parsed)) {\n    // Return cached URL parse\n    return parsed\n  }\n\n  // Parse the URL\n  parsed = fastparse(url)\n  parsed._raw = url\n\n  return (req._parsedUrl = parsed)\n};\n\n/**\n * Parse the `req` original url with fallback and memoization.\n *\n * @param {ServerRequest} req\n * @return {Object}\n * @public\n */\n\nfunction originalurl (req) {\n  var url = req.originalUrl\n\n  if (typeof url !== 'string') {\n    // Fallback\n    return parseurl(req)\n  }\n\n  var parsed = req._parsedOriginalUrl\n\n  if (fresh(url, parsed)) {\n    // Return cached URL parse\n    return parsed\n  }\n\n  // Parse the URL\n  parsed = fastparse(url)\n  parsed._raw = url\n\n  return (req._parsedOriginalUrl = parsed)\n};\n\n/**\n * Parse the `str` url with fast-path short-cut.\n *\n * @param {string} str\n * @return {Object}\n * @private\n */\n\nfunction fastparse (str) {\n  if (typeof str !== 'string' || str.charCodeAt(0) !== 0x2f /* / */) {\n    return parse(str)\n  }\n\n  var pathname = str\n  var query = null\n  var search = null\n\n  // This takes the regexp from https://github.com/joyent/node/pull/7878\n  // Which is /^(\\/[^?#\\s]*)(\\?[^#\\s]*)?$/\n  // And unrolls it into a for loop\n  for (var i = 1; i < str.length; i++) {\n    switch (str.charCodeAt(i)) {\n      case 0x3f: /* ?  */\n        if (search === null) {\n          pathname = str.substring(0, i)\n          query = str.substring(i + 1)\n          search = str.substring(i)\n        }\n        break\n      case 0x09: /* \\t */\n      case 0x0a: /* \\n */\n      case 0x0c: /* \\f */\n      case 0x0d: /* \\r */\n      case 0x20: /*    */\n      case 0x23: /* #  */\n      case 0xa0:\n      case 0xfeff:\n        return parse(str)\n    }\n  }\n\n  var url = Url !== undefined\n    ? new Url()\n    : {}\n\n  url.path = str\n  url.href = str\n  url.pathname = pathname\n\n  if (search !== null) {\n    url.query = query\n    url.search = search\n  }\n\n  return url\n}\n\n/**\n * Determine if parsed is still fresh for url.\n *\n * @param {string} url\n * @param {object} parsedUrl\n * @return {boolean}\n * @private\n */\n\nfunction fresh (url, parsedUrl) {\n  return typeof parsedUrl === 'object' &&\n    parsedUrl !== null &&\n    (Url === undefined || parsedUrl instanceof Url) &&\n    parsedUrl._raw === url\n}\n","/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","'use strict'\n/* eslint no-proto: 0 */\nmodule.exports = Object.setPrototypeOf || ({ __proto__: [] } instanceof Array ? setProtoOf : mixinProperties)\n\nfunction setProtoOf (obj, proto) {\n  obj.__proto__ = proto\n  return obj\n}\n\nfunction mixinProperties (obj, proto) {\n  for (var prop in proto) {\n    if (!Object.prototype.hasOwnProperty.call(obj, prop)) {\n      obj[prop] = proto[prop]\n    }\n  }\n  return obj\n}\n","/*!\n * statuses\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2016 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar codes = require('./codes.json')\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = status\n\n// status code to message map\nstatus.STATUS_CODES = codes\n\n// array of status codes\nstatus.codes = populateStatusesMap(status, codes)\n\n// status codes for redirects\nstatus.redirect = {\n  300: true,\n  301: true,\n  302: true,\n  303: true,\n  305: true,\n  307: true,\n  308: true\n}\n\n// status codes for empty bodies\nstatus.empty = {\n  204: true,\n  205: true,\n  304: true\n}\n\n// status codes for when you should retry the request\nstatus.retry = {\n  502: true,\n  503: true,\n  504: true\n}\n\n/**\n * Populate the statuses map for given codes.\n * @private\n */\n\nfunction populateStatusesMap (statuses, codes) {\n  var arr = []\n\n  Object.keys(codes).forEach(function forEachCode (code) {\n    var message = codes[code]\n    var status = Number(code)\n\n    // Populate properties\n    statuses[status] = message\n    statuses[message] = status\n    statuses[message.toLowerCase()] = status\n\n    // Add to array\n    arr.push(status)\n  })\n\n  return arr\n}\n\n/**\n * Get the status code.\n *\n * Given a number, this will throw if it is not a known status\n * code, otherwise the code will be returned. Given a string,\n * the string will be parsed for a number and return the code\n * if valid, otherwise will lookup the code assuming this is\n * the status message.\n *\n * @param {string|number} code\n * @returns {number}\n * @public\n */\n\nfunction status (code) {\n  if (typeof code === 'number') {\n    if (!status[code]) throw new Error('invalid status code: ' + code)\n    return code\n  }\n\n  if (typeof code !== 'string') {\n    throw new TypeError('code must be a number or string')\n  }\n\n  // '403'\n  var n = parseInt(code, 10)\n  if (!isNaN(n)) {\n    if (!status[n]) throw new Error('invalid status code: ' + n)\n    return n\n  }\n\n  n = status[code.toLowerCase()]\n  if (!n) throw new Error('invalid status message: \"' + code + '\"')\n  return n\n}\n","/*!\n * toidentifier\n * Copyright(c) 2016 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = toIdentifier\n\n/**\n * Trasform the given string into a JavaScript identifier\n *\n * @param {string} str\n * @returns {string}\n * @public\n */\n\nfunction toIdentifier (str) {\n  return str\n    .split(' ')\n    .map(function (token) {\n      return token.slice(0, 1).toUpperCase() + token.slice(1)\n    })\n    .join('')\n    .replace(/[^ _0-9a-z]/gi, '')\n}\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar koa_1 = __importDefault(require(\"koa\"));\r\nvar sequelize_1 = require(\"sequelize\");\r\nvar sqlite3_1 = __importDefault(require(\"sqlite3\"));\r\nvar sequelize = new sequelize_1.Sequelize({\r\n    dialect: 'sqlite',\r\n    storage: './database.sqlite',\r\n    dialectModule: sqlite3_1.default,\r\n    dialectOptions: {\r\n    // Your sqlite3 options here\r\n    // for instance, this is how you can configure the database opening mode:\r\n    // mode: SQLite.OPEN_READWRITE | SQLite.OPEN_CREATE | SQLite.OPEN_FULLMUTEX,\r\n    },\r\n});\r\ntry {\r\n    (function () { return __awaiter(void 0, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, sequelize.authenticate()];\r\n                case 1:\r\n                    _a.sent();\r\n                    console.log('Connection has been established successfully.');\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    }); })();\r\n}\r\ncatch (error) {\r\n    console.error('Unable to connect to the database:', error);\r\n}\r\nvar User = sequelize.define('User', {\r\n    // \r\n    firstName: {\r\n        type: sequelize_1.DataTypes.STRING,\r\n        allowNull: false\r\n    },\r\n    lastName: {\r\n        type: sequelize_1.DataTypes.STRING\r\n        // allowNull  true\r\n    }\r\n}, {\r\n    tableName: 'members'\r\n    // \r\n});\r\nUser.sync();\r\n// .then(async ()=>{\r\n//   const jane = User.build({ firstName: \"Jane\" });\r\n//   (async ()=>{\r\n//     await jane.save();\r\n//   })();\r\n//   console.log('Jane !');\r\n// });\r\nvar app = new koa_1.default();\r\napp.use(function (ctx) { return __awaiter(void 0, void 0, void 0, function () {\r\n    return __generator(this, function (_a) {\r\n        console.log('receive message');\r\n        ctx.body = 'hello world';\r\n        return [2 /*return*/];\r\n    });\r\n}); });\r\napp.listen(3000);\r\n","'use strict';\r\n\r\n// Implements Brad Hill's Double HMAC pattern from\r\n// https://www.nccgroup.trust/us/about-us/newsroom-and-events/blog/2011/february/double-hmac-verification/.\r\n// The approach is similar to the node's native implementation of timing safe buffer comparison that will be available on v6+.\r\n// https://github.com/nodejs/node/issues/3043\r\n// https://github.com/nodejs/node/pull/3073\r\n\r\nvar crypto = require('crypto');\r\n\r\nfunction bufferEqual(a, b) {\r\n  if (a.length !== b.length) {\r\n    return false;\r\n  }\r\n  // `crypto.timingSafeEqual` was introduced in Node v6.6.0\r\n  // <https://github.com/jshttp/basic-auth/issues/39>\r\n  if (crypto.timingSafeEqual) {\r\n    return crypto.timingSafeEqual(a, b);\r\n  }\r\n  for (var i = 0; i < a.length; i++) {\r\n    if (a[i] !== b[i]) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction timeSafeCompare(a, b) {\r\n  var sa = String(a);\r\n  var sb = String(b);\r\n  var key = crypto.pseudoRandomBytes(32);\r\n  var ah = crypto.createHmac('sha256', key).update(sa).digest();\r\n  var bh = crypto.createHmac('sha256', key).update(sb).digest();\r\n\r\n  return bufferEqual(ah, bh) && a === b;\r\n}\r\n\r\nmodule.exports = timeSafeCompare;\r\n","/*!\n * type-is\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar typer = require('media-typer')\nvar mime = require('mime-types')\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = typeofrequest\nmodule.exports.is = typeis\nmodule.exports.hasBody = hasbody\nmodule.exports.normalize = normalize\nmodule.exports.match = mimeMatch\n\n/**\n * Compare a `value` content-type with `types`.\n * Each `type` can be an extension like `html`,\n * a special shortcut like `multipart` or `urlencoded`,\n * or a mime type.\n *\n * If no types match, `false` is returned.\n * Otherwise, the first `type` that matches is returned.\n *\n * @param {String} value\n * @param {Array} types\n * @public\n */\n\nfunction typeis (value, types_) {\n  var i\n  var types = types_\n\n  // remove parameters and normalize\n  var val = tryNormalizeType(value)\n\n  // no type or invalid\n  if (!val) {\n    return false\n  }\n\n  // support flattened arguments\n  if (types && !Array.isArray(types)) {\n    types = new Array(arguments.length - 1)\n    for (i = 0; i < types.length; i++) {\n      types[i] = arguments[i + 1]\n    }\n  }\n\n  // no types, return the content type\n  if (!types || !types.length) {\n    return val\n  }\n\n  var type\n  for (i = 0; i < types.length; i++) {\n    if (mimeMatch(normalize(type = types[i]), val)) {\n      return type[0] === '+' || type.indexOf('*') !== -1\n        ? val\n        : type\n    }\n  }\n\n  // no matches\n  return false\n}\n\n/**\n * Check if a request has a request body.\n * A request with a body __must__ either have `transfer-encoding`\n * or `content-length` headers set.\n * http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.3\n *\n * @param {Object} request\n * @return {Boolean}\n * @public\n */\n\nfunction hasbody (req) {\n  return req.headers['transfer-encoding'] !== undefined ||\n    !isNaN(req.headers['content-length'])\n}\n\n/**\n * Check if the incoming request contains the \"Content-Type\"\n * header field, and it contains any of the give mime `type`s.\n * If there is no request body, `null` is returned.\n * If there is no content type, `false` is returned.\n * Otherwise, it returns the first `type` that matches.\n *\n * Examples:\n *\n *     // With Content-Type: text/html; charset=utf-8\n *     this.is('html'); // => 'html'\n *     this.is('text/html'); // => 'text/html'\n *     this.is('text/*', 'application/json'); // => 'text/html'\n *\n *     // When Content-Type is application/json\n *     this.is('json', 'urlencoded'); // => 'json'\n *     this.is('application/json'); // => 'application/json'\n *     this.is('html', 'application/*'); // => 'application/json'\n *\n *     this.is('html'); // => false\n *\n * @param {String|Array} types...\n * @return {String|false|null}\n * @public\n */\n\nfunction typeofrequest (req, types_) {\n  var types = types_\n\n  // no body\n  if (!hasbody(req)) {\n    return null\n  }\n\n  // support flattened arguments\n  if (arguments.length > 2) {\n    types = new Array(arguments.length - 1)\n    for (var i = 0; i < types.length; i++) {\n      types[i] = arguments[i + 1]\n    }\n  }\n\n  // request content type\n  var value = req.headers['content-type']\n\n  return typeis(value, types)\n}\n\n/**\n * Normalize a mime type.\n * If it's a shorthand, expand it to a valid mime type.\n *\n * In general, you probably want:\n *\n *   var type = is(req, ['urlencoded', 'json', 'multipart']);\n *\n * Then use the appropriate body parsers.\n * These three are the most common request body types\n * and are thus ensured to work.\n *\n * @param {String} type\n * @private\n */\n\nfunction normalize (type) {\n  if (typeof type !== 'string') {\n    // invalid type\n    return false\n  }\n\n  switch (type) {\n    case 'urlencoded':\n      return 'application/x-www-form-urlencoded'\n    case 'multipart':\n      return 'multipart/*'\n  }\n\n  if (type[0] === '+') {\n    // \"+json\" -> \"*/*+json\" expando\n    return '*/*' + type\n  }\n\n  return type.indexOf('/') === -1\n    ? mime.lookup(type)\n    : type\n}\n\n/**\n * Check if `expected` mime type\n * matches `actual` mime type with\n * wildcard and +suffix support.\n *\n * @param {String} expected\n * @param {String} actual\n * @return {Boolean}\n * @private\n */\n\nfunction mimeMatch (expected, actual) {\n  // invalid type\n  if (expected === false) {\n    return false\n  }\n\n  // split types\n  var actualParts = actual.split('/')\n  var expectedParts = expected.split('/')\n\n  // invalid format\n  if (actualParts.length !== 2 || expectedParts.length !== 2) {\n    return false\n  }\n\n  // validate type\n  if (expectedParts[0] !== '*' && expectedParts[0] !== actualParts[0]) {\n    return false\n  }\n\n  // validate suffix wildcard\n  if (expectedParts[1].substr(0, 2) === '*+') {\n    return expectedParts[1].length <= actualParts[1].length + 1 &&\n      expectedParts[1].substr(1) === actualParts[1].substr(1 - expectedParts[1].length)\n  }\n\n  // validate subtype\n  if (expectedParts[1] !== '*' && expectedParts[1] !== actualParts[1]) {\n    return false\n  }\n\n  return true\n}\n\n/**\n * Normalize a type and remove parameters.\n *\n * @param {string} value\n * @return {string}\n * @private\n */\n\nfunction normalizeType (value) {\n  // parse the type\n  var type = typer.parse(value)\n\n  // remove the parameters\n  type.parameters = undefined\n\n  // reformat it\n  return typer.format(type)\n}\n\n/**\n * Try to normalize a type and remove parameters.\n *\n * @param {string} value\n * @return {string}\n * @private\n */\n\nfunction tryNormalizeType (value) {\n  if (!value) {\n    return null\n  }\n\n  try {\n    return normalizeType(value)\n  } catch (err) {\n    return null\n  }\n}\n","/*!\n * vary\n * Copyright(c) 2014-2017 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module exports.\n */\n\nmodule.exports = vary\nmodule.exports.append = append\n\n/**\n * RegExp to match field-name in RFC 7230 sec 3.2\n *\n * field-name    = token\n * token         = 1*tchar\n * tchar         = \"!\" / \"#\" / \"$\" / \"%\" / \"&\" / \"'\" / \"*\"\n *               / \"+\" / \"-\" / \".\" / \"^\" / \"_\" / \"`\" / \"|\" / \"~\"\n *               / DIGIT / ALPHA\n *               ; any VCHAR, except delimiters\n */\n\nvar FIELD_NAME_REGEXP = /^[!#$%&'*+\\-.^_`|~0-9A-Za-z]+$/\n\n/**\n * Append a field to a vary header.\n *\n * @param {String} header\n * @param {String|Array} field\n * @return {String}\n * @public\n */\n\nfunction append (header, field) {\n  if (typeof header !== 'string') {\n    throw new TypeError('header argument is required')\n  }\n\n  if (!field) {\n    throw new TypeError('field argument is required')\n  }\n\n  // get fields array\n  var fields = !Array.isArray(field)\n    ? parse(String(field))\n    : field\n\n  // assert on invalid field names\n  for (var j = 0; j < fields.length; j++) {\n    if (!FIELD_NAME_REGEXP.test(fields[j])) {\n      throw new TypeError('field argument contains an invalid header name')\n    }\n  }\n\n  // existing, unspecified vary\n  if (header === '*') {\n    return header\n  }\n\n  // enumerate current values\n  var val = header\n  var vals = parse(header.toLowerCase())\n\n  // unspecified vary\n  if (fields.indexOf('*') !== -1 || vals.indexOf('*') !== -1) {\n    return '*'\n  }\n\n  for (var i = 0; i < fields.length; i++) {\n    var fld = fields[i].toLowerCase()\n\n    // append value (case-preserving)\n    if (vals.indexOf(fld) === -1) {\n      vals.push(fld)\n      val = val\n        ? val + ', ' + fields[i]\n        : fields[i]\n    }\n  }\n\n  return val\n}\n\n/**\n * Parse a vary header into an array.\n *\n * @param {String} header\n * @return {Array}\n * @private\n */\n\nfunction parse (header) {\n  var end = 0\n  var list = []\n  var start = 0\n\n  // gather tokens\n  for (var i = 0, len = header.length; i < len; i++) {\n    switch (header.charCodeAt(i)) {\n      case 0x20: /*   */\n        if (start === end) {\n          start = end = i + 1\n        }\n        break\n      case 0x2c: /* , */\n        list.push(header.substring(start, end))\n        start = end = i + 1\n        break\n      default:\n        end = i + 1\n        break\n    }\n  }\n\n  // final token\n  list.push(header.substring(start, end))\n\n  return list\n}\n\n/**\n * Mark that a request is varied on a header field.\n *\n * @param {Object} res\n * @param {String|Array} field\n * @public\n */\n\nfunction vary (res, field) {\n  if (!res || !res.getHeader || !res.setHeader) {\n    // quack quack\n    throw new TypeError('res argument is required')\n  }\n\n  // get existing header\n  var val = res.getHeader('Vary') || ''\n  var header = Array.isArray(val)\n    ? val.join(', ')\n    : String(val)\n\n  // set new header\n  if ((val = append(header, field))) {\n    res.setHeader('Vary', val)\n  }\n}\n","'use strict';\n\nclass LRU {\n  constructor(max) {\n    this.max = max;\n    this.size = 0;\n    this.cache = new Map();\n    this._cache = new Map();\n  }\n\n  get(key, options) {\n    let item = this.cache.get(key);\n    const maxAge = options && options.maxAge;\n    // only call Date.now() when necessary\n    let now;\n    function getNow() {\n      now = now || Date.now();\n      return now;\n    }\n    if (item) {\n      // check expired\n      if (item.expired && getNow() > item.expired) {\n        item.expired = 0;\n        item.value = undefined;\n      } else {\n        // update expired in get\n        if (maxAge !== undefined) {\n          const expired = maxAge ? getNow() + maxAge : 0;\n          item.expired = expired;\n        }\n      }\n      return item.value;\n    }\n\n    // try to read from _cache\n    item = this._cache.get(key);\n    if (item) {\n      // check expired\n      if (item.expired && getNow() > item.expired) {\n        item.expired = 0;\n        item.value = undefined;\n      } else {\n        // not expired, save to cache\n        this._update(key, item);\n        // update expired in get\n        if (maxAge !== undefined) {\n          const expired = maxAge ? getNow() + maxAge : 0;\n          item.expired = expired;\n        }\n      }\n      return item.value;\n    }\n  }\n\n  set(key, value, options) {\n    const maxAge = options && options.maxAge;\n    const expired = maxAge ? Date.now() + maxAge : 0;\n    let item = this.cache.get(key);\n    if (item) {\n      item.expired = expired;\n      item.value = value;\n    } else {\n      item = {\n        value,\n        expired,\n      };\n      this._update(key, item);\n    }\n  }\n\n  keys() {\n    const cacheKeys = new Set();\n    const now = Date.now();\n\n    for (const entry of this.cache.entries()) {\n      checkEntry(entry);\n    }\n\n    for (const entry of this._cache.entries()) {\n      checkEntry(entry);\n    }\n\n    function checkEntry(entry) {\n      const key = entry[0];\n      const item = entry[1];\n      if (entry[1].value && (!entry[1].expired) || item.expired >= now) {\n        cacheKeys.add(key);\n      }\n    }\n\n    return Array.from(cacheKeys.keys());\n  }\n\n  _update(key, item) {\n    this.cache.set(key, item);\n    this.size++;\n    if (this.size >= this.max) {\n      this.size = 0;\n      this._cache = this.cache;\n      this.cache = new Map();\n    }\n  }\n}\n\nmodule.exports = LRU;\n\n","module.exports = require(\"assert\");","module.exports = require(\"async_hooks\");","module.exports = require(\"buffer\");","module.exports = require(\"crypto\");","module.exports = require(\"events\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"net\");","module.exports = require(\"path\");","module.exports = require(\"querystring\");","module.exports = require(\"stream\");","module.exports = require(\"url\");","module.exports = require(\"util\");","module.exports = require(\"zlib\");","module.exports = require('sequelize');","module.exports = require('sqlite3');","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(3607);\n"],"names":["Negotiator","mime","Accepts","req","this","headers","negotiator","extToMime","type","indexOf","lookup","validMime","module","exports","prototype","types","types_","Array","isArray","arguments","length","i","mediaTypes","accept","mimes","map","first","filter","encoding","encodings","encodings_","charset","charsets","charsets_","lang","langs","language","languages","languages_","mimeTypes","typeLRUCache","mimeType","get","contentType","set","slice","co","gen","ctx","args","call","Promise","resolve","reject","apply","next","onFulfilled","res","ret","e","onRejected","err","throw","done","value","toPromise","isPromise","then","TypeError","String","obj","constructor","name","displayName","isGenerator","isGeneratorFunction","thunkToPromise","arrayToPromise","Object","objectToPromise","fn","all","results","keys","promises","key","promise","defer","undefined","push","wrap","createPromise","__generatorFunction__","filename","options","opts","params","fallback","NON_LATIN1_REGEXP","test","basename","isQuotedString","TEXT_REGEXP","fallbackName","getlatin1","hasFallback","HEX_ESCAPE_REGEXP","createparams","parameters","TOKEN_REGEXP","string","toLowerCase","param","sort","val","substr","ustring","qstring","format","ContentDisposition","parse","match","DISPOSITION_TYPE_REGEXP","exec","index","names","PARAM_REGEXP","lastIndex","replace","QESC_REGEXP","decodefield","Buffer","ENCODE_URL_ATTR_CHAR_REGEXP","HEX_ESCAPE_REPLACE_REGEXP","QUOTE_REGEXP","EXT_VALUE_REGEXP","str","binary","pdecode","from","toString","hex","fromCharCode","parseInt","pencode","char","charCodeAt","toUpperCase","encodeURIComponent","TYPE_REGEXP","ContentType","create","header","getHeader","getcontenttype","trim","deprecate","Keygrip","http","cache","fieldContentRegExp","SAME_SITE_REGEXP","Cookies","request","response","secure","Cookie","attrs","expires","Date","maxAge","path","domain","sameSite","pushCookie","cookie","overwrite","splice","toHeader","remote","data","sigName","signed","RegExp","getPattern","Error","sign","protocol","connection","encrypted","secureProxy","OutgoingMessage","setHeader","httpOnly","now","toUTCString","defineProperty","configurable","enumerable","property","connect","express","cookies","wrapfunction","message","wrapproperty","prop","descriptor","getOwnPropertyDescriptor","namespace","_file","_ignored","_namespace","_traced","_warned","function","formatArgs","useColors","humanize","diff","c","color","lastC","save","namespaces","storage","setItem","removeItem","error","load","r","getItem","process","env","DEBUG","window","__nwjs","navigator","userAgent","document","documentElement","style","WebkitAppearance","console","firebug","exception","table","$1","localStorage","localstorage","destroy","warned","warn","colors","log","debug","formatters","j","v","JSON","stringify","createDebug","prevTime","namespacesCache","enabledCache","enableOverride","enabled","self","curr","Number","ms","prev","coerce","unshift","formatter","selectColor","extend","init","delimiter","newDebug","toNamespace","regexp","substring","default","stack","disable","skips","join","enable","split","len","forEach","hash","Math","abs","pSlice","objectKeys","isArguments","deepEqual","actual","expected","getTime","strict","a","b","isUndefinedOrNull","isBuffer","ka","kb","objEquiv","x","copy","supportsArgumentsClass","supported","object","unsupported","hasOwnProperty","propertyIsEnumerable","shim","Delegator","proto","target","methods","getters","setters","fluents","method","access","getter","setter","__defineGetter__","__defineSetter__","fluent","EventEmitter","ReadStream","Stream","Zlib","noop","onDrainClearBinding","_binding","clear","onOpenClose","fd","close","stream","suppress","isFsReadStream","Gzip","Gunzip","Deflate","DeflateRaw","Inflate","InflateRaw","Unzip","isZlibStream","_processing","_needDrain","once","_destroy","Transform","destroyed","_hadError","closeZlibStream","destroyZlibStream","hasDestroy","on","destroyReadStream","removeAllListeners","addListener","listener","event","arg1","stuff","cleanups","arr","ee","callback","cleanup","removeListener","thunk","cancel","url","UNMATCHED_SURROGATE_PAIR_REGEXP","UNMATCHED_SURROGATE_PAIR_REPLACE","ENCODE_CHARS_REGEXP","encodeURI","matchHtmlRegExp","escape","html","CACHE_CONTROL_NO_CACHE_REGEXP","parseHttpDate","date","timestamp","NaN","reqHeaders","resHeaders","modifiedSince","noneMatch","cacheControl","etag","etagStale","matches","end","list","start","parseTokenList","lastModified","Symbol","getOwnPropertySymbols","iterator","sym","symObj","getOwnPropertyNames","syms","hasSymbols","toStringTag","createError","eql","assert","status","msg","fail","equal","notEqual","ok","strictEqual","notStrictEqual","notDeepEqual","HttpError","setPrototypeOf","statuses","inherits","toIdentifier","codeClass","charAt","nameFunc","func","desc","toClassName","props","arg","statusCode","captureStackTrace","expose","createHttpErrorConstructor","isHttpError","codes","code","CodeError","className","ClientError","writable","createClientErrorConstructor","ServerError","createServerErrorConstructor","ImATeapot","populateConstructorExports","ctor","superCtor","super_","TempCtor","GeneratorFunction","toStr","fnToStr","Function","isFnRegex","hasToStringTag","getProto","getPrototypeOf","generatorFunc","getGeneratorFunc","compare","crypto","algorithm","createHmac","update","digest","verify","l","middleware","context","dispatch","bind","compose","convert","mw","converted","_name","back","called","onFinished","Emitter","util","only","Application","super","proxy","subdomainOffset","proxyIpHeader","maxIpsCount","inspect","custom","asyncLocalStorage","AsyncLocalStorage","ctxStorage","use","createAsyncCtxStorageMiddleware","listen","createServer","toJSON","listenerCount","onerror","createContext","handleRequest","currentContext","getStore","fnMiddleware","respond","body","empty","headersSent","has","isInteger","_explicitNullBody","remove","httpVersionMajor","byteLength","pipe","catch","app","originalUrl","state","silent","async","run","httpAssert","delegate","COOKIES","socket","headerSent","emit","getHeaderNames","removeHeader","_headers","_cookies","URL","net","accepts","qs","typeis","fresh","IP","origin","host","href","pathname","query","querystring","_querycache","search","hostname","memoizedURL","s","stale","idempotent","ips","ip","remoteAddress","_ip","subdomains","offset","isIP","reverse","_accept","acceptsEncodings","acceptsCharsets","acceptsLanguages","is","field","referrer","referer","contentDisposition","getType","onFinish","extname","vary","encodeUrl","getHeaders","_explicitStatus","statusMessage","_body","original","setType","n","redirect","alt","attachment","hasHeader","append","concat","writableEnded","finished","o","flushHeaders","paramRegExp","textRegExp","tokenRegExp","qescRegExp","quoteRegExp","subtypeNameRegExp","typeNameRegExp","typeRegExp","subtype","suffix","lastIndexOf","splitType","extensions","preference","db","EXTRACT_TYPE_REGEXP","TEXT_TYPE_REGEXP","extension","exts","source","to","m","h","d","plural","msAbs","isPlural","round","parseFloat","isFinite","long","fmtShort","preferredCharsets","preferredEncodings","preferredLanguages","preferredMediaTypes","available","mediaType","preferredCharset","preferredEncoding","preferredLanguage","preferredMediaType","simpleCharsetRegExp","parseCharset","q","p","specify","spec","provided","parseAcceptCharset","isQuality","compareSpecs","getFullCharset","priorities","accepted","priority","getCharsetPriority","simpleEncodingRegExp","parseEncoding","hasIdentity","minQuality","min","parseAcceptEncoding","getFullEncoding","getEncodingPriority","simpleLanguageRegExp","parseLanguage","prefix","full","parseAcceptLanguage","getFullLanguage","getLanguagePriority","simpleMediaTypeRegExp","parseMediaType","kvps","quoteCount","splitParameters","splitKeyValuePair","pair","every","k","splitMediaTypes","parseAccept","getFullType","getMediaTypePriority","count","isFinished","attached","__onFinished","queue","createListener","eeMsg","eeSocket","onSocket","assignSocket","patchAssignSocket","attachFinishedListener","attachListener","asyncHooks","AsyncResource","runInAsyncScope","tryRequireAsyncHooks","setImmediate","nextTick","Boolean","complete","upgrade","readable","reduce","Url","parseurl","parsed","_parsedUrl","fastparse","_raw","parsedUrl","_parsedOriginalUrl","buffer","copyProps","src","dst","SafeBuffer","encodingOrOffset","alloc","allocUnsafe","allocUnsafeSlow","size","fill","buf","SlowBuffer","__proto__","isNaN","STATUS_CODES","populateStatusesMap","retry","token","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","rejected","result","__generator","f","y","t","g","_","label","sent","trys","ops","verb","op","pop","__importDefault","mod","__esModule","koa_1","sequelize_1","sqlite3_1","sequelize","Sequelize","dialect","dialectModule","dialectOptions","_a","authenticate","define","firstName","DataTypes","STRING","allowNull","lastName","tableName","sync","sa","sb","pseudoRandomBytes","timingSafeEqual","bufferEqual","typer","normalizeType","tryNormalizeType","mimeMatch","normalize","hasbody","actualParts","expectedParts","hasBody","FIELD_NAME_REGEXP","fields","vals","fld","max","Map","_cache","item","getNow","expired","_update","cacheKeys","Set","entry","entries","checkEntry","add","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}